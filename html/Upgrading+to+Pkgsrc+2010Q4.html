<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Micloud.github.com by micloud</title>

    <link rel="stylesheet" href="/stylesheets/styles.css">
    <link rel="stylesheet" href="/stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <style>
    html, body {
      margin: 0;
      text-align: center;
    }
    </style>
  </head>
  <body>
  
  <div style="width:100%" align="center">
  <div style="width:960px;vertical-align:bottom" align="left">
    <span style="text-align:left">
    <a href="index.html">
    <img src="/images/wiki-logo.png" height="50px"/>
    <img src="/images/micloud-logo.png" height="40px"/>
    </a>
    </span>
    <div align="left" style="width:100%;text-align:right">
    <a href="index.html" >
      <img src="/images/back.png" height="20px"/>
      Back to Wiki
    </a>
    </div>
  </div>
  <hr style="width:960px"/>
  <div align="center" style="text-align:left; width:960px;">
    <p>If you have an older Node.js™ SmartMachine, you may not be running the latest pkgsrc repository. This page shows you how to update your Node.js SmartMachine to the 2010Q4 repository.</p>
<p>In this page:</p>
<h1>Update to Pkgsrc 2010Q4</h1>
<p>1.Log in to your Node.js Smart Machine using the admin username:</p>
<pre><code>$ ssh admin@mymachine.no.de</code></pre>
<pre><code>If you cannot log in as admin, stop now and contact support .</code></pre>
<p>2.Verify the version of pkgsrc you are currently using:</p>
<pre><code>$ pkgin up
database for http://pkgsrc.joyent.com/2010Q2/All/ is up-to-date</code></pre>
<p>If you are using version <a href="http://pkgsrc.joyent.com/sdc/2010Q4/gcc45">http://pkgsrc.joyent.com/sdc/2010Q4/gcc45</a>, you are up to date and don&#39;t need to upgrade.<br>3.Run the no.de.2010Q4.sh shell script attached to this page. The easiest way is like this:</p>
<pre><code>$ curl -L http://wiki.joyent.com/download/attachments/1639244/no.de.2010Q4.sh | sudo bash</code></pre>
<p>The output will look like this:</p>
<pre><code>Recording packages installed before the update
Backing up existing software base
Moving existing software base away
Downloading new software bootstrap image
Configuring package tools
Re-installing base packages
Updating OpenSSL certificate database
Removing deprecated system files
Updating tool configuration
Re-installing missing packages
(gcc34 gmake gmp libffi mpfr mysql-client mysql-server python26 redis scmgit scmgit-docs tcp_wrappers zip)

*   * *
Your software was upgraded using packages from:

http://pkgsrc.joyent.com/sdc/2010Q4/gcc45

A backup of &#39;/opt/local&#39; was archived as:

/var/tmp/pkgsrc-backup-20110505-041037.tgz

Feel free to remove that file if you don&#39;t need it anymore.
Latest versions of all your previously installed packages
have been installed. You can run &#39;pkgin ls&#39; for a full
listing of installed packages.

*   * *
You had the gcc44 package installed. This is no longer provided
in this package set. Please install the &#39;gcc-compiler&#39; package
instead which provides an optimized GCC 4.5.2 compiler suite.</code></pre>
<p>4.Be sure to log out of the admin account and back into the node account before you install new packages.</p>
<h1>Verify the Update</h1>
<p>1.Log out of the admin account.<br>2.Log in to the node account:</p>
<pre><code>$ ssh node@mymachine.no.de</code></pre>
<p>3.Run the pkgin up command. The output should look like this:</p>
<pre><code>$ pkgin up
database for http://pkgsrc.joyent.com/sdc/2010Q4/gcc45/All is up-to-date</code></pre>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>

  </div>
  </div>
  </body>
</html>