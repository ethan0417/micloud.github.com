<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Micloud.github.com by micloud</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <style>
    html, body {
      margin: 0;
      text-align: center;
    }
    </style>
  </head>
  <body>
  <div style="width:100%" align="center">
  <div align="center" style="text-align:left; width:960px;">
    <h1 style="vertical-align:middle"><img src="images/wiki-logo.png" width="128px"/><a href="http://doc.micloud.tw">MiCloud Wiki Document</a></h1><hr/><p  id="3PartyCloudServer.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=3PartyCloudServer.md">3PartyCloudServer.md</a></h1><br/><h1>第三方服務主機</h1>
<ul>
<li><a href="/index.html?page=Percona+install.md">安裝Percona</a></li>
<li><a href="/index.html?page=Riak+SmartMachine.md">安裝Riak</a></li>
<li><a href="/index.html?page=Stingray+SmartMachine.md">Stingray 基本操作說明</a></li>
<li><a href="/index.html?page=MongoDB+SmartMachine.md">安裝MongoDB 與操作說明</a></li>
</ul>
<hr>
<ul>
<li>Node.js<ul>
<li><a href="/index.html?page=Installing+Node.js+on+a+Joyent+SmartOS+SmartMachine.md">安裝Node.js</a></li>
<li><a href="/index.html?page=Npm+usage.md">Npm安裝及操作</a></li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>MySQL<ul>
<li><a href="/index.html?page=Install+MySQL+on+SmartOS.md">SmartOS上安裝及設定</a></li>
<li><a href="/index.html?page=Install+MySQL+on+Linux.md">Linux上安裝及設定</a></li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>Virtualmin/Webmin操作<ul>
<li><a href="/index.html?page=Disabling+or+Restarting+Webmin.md">關閉或重啓Webmin</a></li>
<li><a href="/index.html?page=Managing+SSL+Certificates+with+Virtualmin.md">使用Virtuakmin管理SSL認證</a></li>
<li><a href="/index.html?page=Updating+Webmin.md">更新Webmin</a></li>
<li><a href="/index.html?page=Recovering+a+Forgotten+SmartMachine+Password.md">使用Webmin回復SmartMachine密碼</a></li>
<li><a href="/index.html?page=Setting+Up+a+New+Domain.md">設定新的Domain</a></li>
</ul>
</li>
</ul>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="About+Swap+Adjust.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=About+Swap+Adjust.md">About+Swap+Adjust.md</a></h1><br/><h1>Swap調整</h1>
<p>Micloud 客戶的Linux虛擬機會有兩個虛擬磁碟，第一個是OS掛載在&quot;/&quot;之下，另一個是packages中設定的disk space，預設掛載在/data下。 MiCloud已為SmartMachine、及1G以下用戶預先做好swap空間的預留，其餘類型的虛擬主機沒有預設swap空間，用戶需自行做設定。</p>
<p>如果客戶新建一個新的VM，可以採用下列Partition swap及File swap兩種方式中任一種，如果客戶已經寫了資料在/data 且無法更動，那只能選擇File swap的方式。</p>
<p>兩種swap設定方法及說明如下：</p>
<h2>Partition swap</h2>
<p>可以做為多重開機的swap重複使用，理論效能比較高一點點，但是無法變更大小，步驟稍為複雜，設定步驟如下。</p>
<p>(1)檢查您的磁碟</p>
<pre><code>#fdisk -l</code></pre>
<p><img src='images/About+Swap+Adjust-p3.jpg' width='650' align='center'/></p>
<center>( 請檢查是否有 vda 與 vdb，其容量大小是否為您所申請的容量 )</center>



<p>(2)卸載 /dev/vdb1</p>
<pre><code>#umount /dev/vdb1</code></pre>
<p>(3)磁碟分割，用您擅用的磁碟分割工具，我們以 fdisk 為例</p>
<pre><code>#fdisk /dev/vdb</code></pre>
<p><img src='images/About+Swap+Adjust-fdisk.jpg' width='650' align='center'/></p>
<p>(4)製作檔案系統</p>
<pre><code>#mkfs.ext4 /dev/vdb1</code></pre>
<p><img src='images/About+Swap+Adjust-mk.jpg' width='650' align='center'/></p>
<pre><code>#mkswap /dev/vdb2</code></pre>
<p><img src='images/About+Swap+Adjust-mk2.jpg' width='650' align='center'/></p>
<p>(5)掛載檔案系統</p>
<pre><code>#mount /dev/vdb1
#swapon /dev/vdb2</code></pre>
<p>(6)檢查是否生效</p>
<pre><code>#df -h ( 檢查 /dev/vdb1 是否已經掛載 )</code></pre>
<p><img src='images/About+Swap+Adjust-df.jpg' width='650' align='center'/></p>
<pre><code>#free -m ( 檢查 swap 是否有數值 )</code></pre>
<p><img src='images/About+Swap+Adjust-free2.jpg' width='650' align='center'/></p>
<p>(7)開機自動掛載</p>
<pre><code>#vi /etc/fstab
加入一行 /dev/vdb2 swap swap defaults 0 0</code></pre>
<p><img src='images/About+Swap+Adjust-mount.jpg' width='650' align='center'/></p>
<p>(8)重新開機並驗證<br><img src='images/About+Swap+Adjust-free2.jpg' width='650' align='center'/></p>
<h2>File swap</h2>
<p>File swap的檔案是置於檔案系統之上，所以理論效能差一點點，可以刪除、移動與變更大小，步驟比partition swap簡單，其設定步驟如下。</p>
<p>(1)製作一個當作 swap 的檔案</p>
<pre><code># dd if=/dev/zero of=/data/swap.img bs=1024k count=1024
( 1024k x 1024 = 1GB，請調整 count 達到您要的大小 )</code></pre>
<p><img src='images/About+Swap+Adjust-dd.jpg' width='650' align='center'/></p>
<p>(2)製作SWAP檔案格式</p>
<pre><code># mkswap /data/swap.img</code></pre>
<p><img src='images/About+Swap+Adjust-filemk.jpg' width='650' align='center'/></p>
<p>(3)立刻啟動SWAP空間</p>
<pre><code># swapon /data/swap.img</code></pre>
<p>(4)檢查是否生效</p>
<pre><code>#free -m</code></pre>
<p><img src='images/About+Swap+Adjust-free.jpg' width='650' align='center'/></p>
<p>(5)自動掛載SWAP</p>
<pre><code># vi /etc/fstab
加入一行/data/swap.img swap swap defaults 0 0</code></pre>
<p><img src='images/About+Swap+Adjust-mount2.jpg' width='650' align='center'/><br>附註： /data 是目前 MiCloud Linux VMs 預設第二顆磁碟的掛載點，依客戶使用方式不同而有所差異</p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Accessing+Your+Machine+from+Mac+OS+X.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Accessing+Your+Machine+from+Mac+OS+X.md">Accessing+Your+Machine+from+Mac+OS+X.md</a></h1><br/><h1>Access Machine from Mac OS</h1>
<p>This page shows you how to use the Terminal application to generate an SSH key and to log in to your JoyentCloud machine.</p>
<p>In this page:</p>
<h1>About the Terminal Application</h1>
<p>To access your JoyentCloud machine and to generate SSH keys, you will use the Terminal application. The terminal gives you a command line interface to the Unix underpinnings of Mac OS X.</p>
<p>To open the Terminal application follow these steps.</p>
<ul>
<li>In the Finder, choose <strong>Utilities</strong> from the Go menu. The Utilities folder will open.</li>
<li>Find the Terminal application in the Utilities window.</li>
<li>Double-click the Terminal application to open it.<br>When the Terminal window opens, you&#39;ll se some text that looks like this. Yours will have the name of your machine and your username instead of mymac and myname.</li>
</ul>
<pre><code>mymac:~ myname$</code></pre>
<p>This is the Terminal prompt where you will be entering commands. Be sure to press the Return key after entering a command.</p>
<h1>Generating an SSH Key</h1>
<p>An SSH key consists of a pair of files. One is the private key, which you should never give to anyone. The other is the public key. You will need a public key to log into most machines you provision.</p>
<p>To generate an SSH key on a Macintosh, follow these steps.</p>
<ul>
<li>Type the following command in the Terminal window.</li>
</ul>
<pre><code>mymac:~ myname$ ssh-keygen -t rsa</code></pre>
<ul>
<li>After you press the Return key, the ssh-keygen tool asks you where to store the key.</li>
</ul>
<pre><code>Generating public/private rsa key pair.
Enter file in which to save the key (/Users/myname/.ssh/id_rsa):</code></pre>
<p>Press the Return key to accept the default.<br>*  The command asks you for a passphrase. Enter a phrase you can remember. You can use a key without a passphrase, but this is not recommended.</p>
<pre><code>Enter passphrase (empty for no passphrase):</code></pre>
<ul>
<li>The command asks you to enter the passphrase again to confirm it.</li>
</ul>
<pre><code>Enter same passphrase again:</code></pre>
<p>After you confirm the passphrase, the command generates the key pair</p>
<pre><code>Your identification has been saved in /Users/myname/.ssh/id_rsa.
Your public key has been saved in /Users/myname/.ssh/id_rsa.pub.
The key fingerprint is:
ae:89:72:0b:85:da:5a:f4:7c:1f:c2:43:fd:c6:44:38 myname@mymac.local
The key&#39;s randomart image is:
+--[ RSA 2048]----+](+--[ RSA 2048----+)
|                 |
|         .       |
|        E .      |
|   .   . o       |
|  o . . S .      |
| + + o . +       |
|. + o = o +      |
| o...o * o       |
|.  oo.o .        |
+-----------------+</code></pre>
<p>Your private key is saved in the file named id_rsa in the .ssh directory. Never provide this file to anyone.</p>
<p>Your public key is saved in the file named id_rsa.pub. This file contains the information you&#39;ll add to your JoyentCloud account. The easiest way to do this is to put the key data on the Macintosh clipboard.</p>
<p>Use this command in the Terminal window to load your public key on the clipboard:</p>
<pre><code>mymac:~ myname$ pbcopy &lt; ~/.ssh/id_rsa.pub</code></pre>
<h1>Adding the Public Key to Your JoyentCloud Account</h1>
<p>To add your public key to your JoyentCloud account, follow these steps.</p>
<ul>
<li>Make sure that your public key is copied to the clipboard.</li>
<li>Log in to your JoyentCloud account.</li>
<li>In the top right corner of the browser, click the Account Settings link.</li>
<li>Click the SSH Keys tab.</li>
<li>Type a name for the key in the Name field. This name is only for your convenience. You can use the name of your machine, your user name, or anything that will help you remember which key belongs to whom.</li>
<li>Paste your public key in the SSH Key field.</li>
<li>Click Add This Key to finish.</li>
</ul>
<p><img src='images/Accessing+Your+Machine+from+Mac+OS+X-SSHKeysPortal.png' width='650'/></p>
<h1>Connecting to Your Machine</h1>
<p>You use the Terminal application and the ssh command to log in to your machine in the JoyentCloud. When you provision a machine, you will notice two IP addresses listed in the Overview section of the Machine Details page. One of the IP addresses is the public address. The second is the internal address for communication between SmartMachines / Virtual Machines in the same datacenter. After you provision a new machine, be sure to note the IP addresses. You will use the public address to connect to your machine.</p>
<ul>
<li>In a Terminal window, type this command to log in to your provisioned machine.</li>
</ul>
<pre><code>mymac:~ myname$ ssh root@198.51.100.27</code></pre>
<ul>
<li>If your SSH key has a passphrase, a window opens. Type in your passphrase and click OK.</li>
</ul>
<p><img src='images/Accessing+Your+Machine+from+Mac+OS+X-SSHAgent.png' width='650'/></p>
<ul>
<li>If you entered your passphrase correctly, you will be logged in to your machine.</li>
</ul>
<pre><code>root@myprovisioned:~#</code></pre>
<h1>Troubleshooting</h1>
<p>There are a few reasons that you may see a password prompt like this:</p>
<pre><code>mymac:~ myname$ ssh root@198.51.100.27
root@198.51.100.27&#39;s password:</code></pre>
<ul>
<li>You did not enter the correct passphrase.</li>
<li>The private key on you Macintosh (id_rsa) does not match the public key stored with your JoyentCloud account.</li>
<li>The public key was not entered correctly in your JoyentCloud account.</li>
</ul>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Accessing+Your+SmartMachine+from+Windows+with+PuTTY.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Accessing+Your+SmartMachine+from+Windows+with+PuTTY.md">Accessing+Your+SmartMachine+from+Windows+with+PuTTY.md</a></h1><br/><p><a href="http://p.castfire.com/NTYYi/video/511975/511975-2011-02-14-160415.sd.m4v">Link</a></p>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="All+Package+List+of+SmartOS.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=All+Package+List+of+SmartOS.md">All+Package+List+of+SmartOS.md</a></h1><br/><h1>各版本SmartOS套件</h1>
<p>可使用pkgin search指令去查詢您需要的套件安裝</p>
<p>pkgin詳細指令:<br><a href="[Pkgin+usage.md">pkgin usage]</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Application+Micloud.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Application+Micloud.md">Application+Micloud.md</a></h1><br/><h1>我要如何申請MiCloud服務？</h1>
<p><strong>帳戶申請</strong><br><em>  您可透過連線<a href="http://micloud.tw"><a href="http://micloud.tw">http://micloud.tw</a> </a><br><strong>登入系統</strong>
</em>  申請帳號完成後，系統將寄發通知信函給您，表示您已完成註冊。</p>
<h1>MiCloud的計費方式如何？</h1>
<ul>
<li>MiCloud提供三種不同的虛擬主機服務：SmartMachine、Ubuntu Linux、Windows R2 2008，分別可針對不同需求有不同的記憶體、CPU、硬碟規格，詳細計費方式，請參考micloud產品價目表:<a href="http://portal.micloud.tw/price/price"><a href="http://portal.micloud.tw/price/price">http://portal.micloud.tw/price/price</a> </a></li>
</ul>
<h1>有試用版可以先使用嗎？</h1>
<ul>
<li>目前Micloud已有提供公測/免費主機，提供客戶三十天免費使用，每個email可免費申請256MB主機一台。<br>&nbsp;&nbsp;&nbsp;&nbsp;申請管道: 直接至<a href="http://micloud.tw"><a href="https://micloud.tw">https://micloud.tw</a></a></li>
</ul>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Apply+MiCloud+Account%28Enterprise%29.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Apply+MiCloud+Account%28Enterprise%29.md">Apply+MiCloud+Account%28Enterprise%29.md</a></h1><br/><p>影片:<a href="http://www.youtube.com/watch?v=24qrH7xNDwg">MiCloud企業用戶註冊教學</a></p>
<p><div align="center"><br>[{Flash src=&#39;<a href="http://www.youtube.com/v/24qrH7xNDwg&amp;hd=1">http://www.youtube.com/v/24qrH7xNDwg&amp;hd=1</a>&#39; controls= &#39;false&#39; play=&#39;false&#39; width=640 height=480 }]<br></div></p>
<h1>申請<strong>MiCloud</strong>帳號(企業用戶)(<strong>[<a href="http://micloud.tw">http://micloud.tw</a>]</strong>)</h1>
<h1>](申請<strong>MiCloud</strong>帳號 - 企業用戶 - <strong>[<a href="http://micloud.tw">http://micloud.tw</a></strong></h1>
<p>)<br>若您還未註冊<strong>MiCloud</strong>，請於網頁左上角點選右邊選項＜<strong>註冊</strong>＞。</p>
<p>若您已註冊完<strong>MiCloud</strong>，請於網頁左上角點選左邊選項＜<strong>登入</strong>＞([帳戶資訊修改](MiCloud Account Modify)</p>
<h2><img src='images/Apply+MiCloud+Account-Enterprise-p1_2.png' width='650' align='center'/></h2>
<h1> <Step 1>設定帳號&amp;密碼</h1>
<p>進入註冊新帳戶頁面填寫您的資料</p>
<p>請於紅色框框內選擇您的帳戶類別(企業用戶)</p>
<p><img src='images/Apply+MiCloud+Account-Enterprise-p1+-12.png' width='650' align='center'/></p>
<h1> <Step 2>填寫會員資料</h1>
<p><img src='images/Apply+MiCloud+Account-Enterprise-p1+-13.png' width='650' align='center'/></p>
<h1> <Step 3>填寫帳單資料</h1>
<h2><img src='images/Apply+MiCloud+Account-Enterprise-p1+-14.png' width='650' align='center'/></h2>
<h1>註冊完成</h1>
<p>註冊完成後您將可以看到我們所提供的產品</p>
<p>若您想要購買我們的產品</p>
<p>將需要您先行填寫信用卡資料才可進行購買(若您選擇信用卡付款)</p>
<p>信用卡資料填寫可於頁面右上角&quot;[帳戶設定](MiCloud Account Modify)</p>
<p><img src='images/Apply+MiCloud+Account-Enterprise-p1+-5_2.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Apply+MiCloud+Account%28Personal%29.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Apply+MiCloud+Account%28Personal%29.md">Apply+MiCloud+Account%28Personal%29.md</a></h1><br/><p>影片:<a href="http://www.youtube.com/watch?v=No2F5sJcwXE">MiCloud個人用戶註冊教學</a></p>
<p><div align="center"><br>[{Flash src=&#39;<a href="http://www.youtube.com/v/No2F5sJcwXE&amp;hd=1">http://www.youtube.com/v/No2F5sJcwXE&amp;hd=1</a>&#39; controls= &#39;false&#39; play=&#39;false&#39; width=640 height=480 }]<br></div></p>
<h1>申請<strong>MiCloud</strong>帳號(個人用戶)(<strong>[<a href="http://micloud.tw">http://micloud.tw</a>]</strong>)</h1>
<h1>](申請<strong>MiCloud</strong>帳號 - 個人用戶 - <strong>[<a href="http://micloud.tw">http://micloud.tw</a></strong></h1>
<p>)<br>若您還未註冊<strong>MiCloud</strong>，請於網頁左上角點選右邊選項＜<strong>註冊</strong>＞。</p>
<p>若您已註冊完<strong>MiCloud</strong>，請於網頁左上角點選左邊選項＜<strong>登入</strong>＞([帳戶資訊修改](MiCloud Account Modify)</p>
<h2><img src='images/Apply+MiCloud+Account-Personal-p1_2.png' width='650' align='center'/></h2>
<h1><Step 1>設定帳號&amp;密碼</h1>
<p>進入註冊新帳戶頁面填寫您的資料</p>
<p>請於紅色框框內選擇您的帳戶類別</p>
<p><img src='images/Apply+MiCloud+Account-Personal-p1+-1.png' width='650' align='center'/></p>
<h1><Step 2>填寫會員資料</h1>
<p><img src='images/Apply+MiCloud+Account-Personal-p1+-3.png' width='650' align='center'/></p>
<h1><Step 3>填寫帳單資料</h1>
<h2><img src='images/Apply+MiCloud+Account-Personal-p1+-4.png' width='650' align='center'/></h2>
<h1>註冊完成</h1>
<p>註冊完成後您將可以看到我們所提供的產品</p>
<p>若您想要購買我們的產品</p>
<p>將需要您先行填寫信用卡資料才可進行購買</p>
<p>信用卡資料填寫可於頁面右上角&quot;[帳戶設定](MiCloud Account Modify)</p>
<p><img src='images/Apply+MiCloud+Account-Personal-p1+-5_2.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Apply+MiCloud+Account(new).md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Apply+MiCloud+Account(new).md">Apply+MiCloud+Account(new).md</a></h1><br/><h1><a href="http://micloud.tw">申請MiCloud帳號</a></h1>
<h1>](申請<strong>MiCloud</strong>帳號 - <strong>[<a href="http://micloud.tw">http://micloud.tw</a></strong></h1>
<p>)<br>請於<strong>MiCloud</strong>首頁左上角點選右邊選項＜<strong>註冊</strong>＞。</p>
<p><img src='images/Apply+MiCloud+Account-new-p1_2.png' width='650' align='center'/></p>
<hr>
<h1>設定帳號&amp;密碼</h1>
<p>進入註冊新帳戶頁面填寫電子郵件&amp;密碼</p>
<p>電子郵件將作為日後登入之用途，平台相關資訊將寄送至此註冊之郵件地址，請務必填寫正確之地址，以避免權益受損。</p>
<p><img src='images/Apply+MiCloud+Account-new-set.jpg' width='650' align='center'/></p>
<hr>
<h1>註冊完成</h1>
<p>註冊完成後，您將可以訂購我們所提供的產品(訂購前，需至先先完成帳單資訊及付款方式填寫，此相關操作說明，請參考&quot;[帳戶資訊修改](MiCloud Account Modify)</p>
<p><img src='images/Apply+MiCloud+Account-new-set2.jpg' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Apply+MiCloud+Account-Enterprise.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Apply+MiCloud+Account-Enterprise.md">Apply+MiCloud+Account-Enterprise.md</a></h1><br/><p>影片:<a href="http://www.youtube.com/watch?v=24qrH7xNDwg">MiCloud企業用戶註冊教學</a></p>
<p><div align="center"></p>
<p><embed width="420" height="345" src="http://www.youtube.com/v/24qrH7xNDwg&hd=1" type="application/x-shockwave-flash"></embed><br></div></p>
<h1>申請<strong>MiCloud</strong>帳號(企業用戶)(<strong>[<a href="http://micloud.tw">http://micloud.tw</a>]</strong>)</h1>
<h1>](申請--MiCloud--帳號 - 企業用戶 - --[<a href="http://micloud.tw--">http://micloud.tw--</a></h1>
<p>)<br>若您還未註冊<strong>MiCloud</strong>，請於網頁左上角點選右邊選項＜<strong>註冊</strong>＞。</p>
<p>若您已註冊完<strong>MiCloud</strong>，請於網頁左上角點選左邊選項＜<strong>登入</strong>＞([帳戶資訊修改](MiCloud Account Modify)</p>
<h2><img src='images/Apply+MiCloud+Account-Enterprise-p1-2.png' width='650' align='center'/></h2>
<h1> <Step 1>設定帳號&amp;密碼</h1>
<p>進入註冊新帳戶頁面填寫您的資料</p>
<p>請於紅色框框內選擇您的帳戶類別(企業用戶)</p>
<p><img src='images/Apply+MiCloud+Account-Enterprise-p1+-12.png' width='650' align='center'/></p>
<h1> <Step 2>填寫會員資料</h1>
<p><img src='images/Apply+MiCloud+Account-Enterprise-p1+-13.png' width='650' align='center'/></p>
<h1> <Step 3>填寫帳單資料</h1>
<h2><img src='images/Apply+MiCloud+Account-Enterprise-p1+-14.png' width='650' align='center'/></h2>
<h1>註冊完成</h1>
<p>註冊完成後您將可以看到我們所提供的產品</p>
<p>若您想要購買我們的產品</p>
<p>將需要您先行填寫信用卡資料才可進行購買(若您選擇信用卡付款)</p>
<p>信用卡資料填寫可於頁面右上角&quot;[帳戶設定](MiCloud Account Modify)</p>
<p><img src='images/Apply+MiCloud+Account-Enterprise-p1+-5-2.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Apply+MiCloud+Account-new.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Apply+MiCloud+Account-new.md">Apply+MiCloud+Account-new.md</a></h1><br/><h1>申請MiCloud帳號(<a href="http://micloud.tw">http://micloud.tw</a>)</h1>
<h2>申請MiCloud帳號</h2>
<p>請於<strong>MiCloud</strong>首頁左上角點選右邊選項＜<strong>註冊</strong>＞。</p>
<p><img src='images/Apply+MiCloud+Account-new-p1-2.png' width='650' align='center'/></p>
<hr>
<h1>設定帳號&amp;密碼</h1>
<p>進入註冊新帳戶頁面填寫電子郵件&amp;密碼</p>
<p>電子郵件將作為日後登入之用途，平台相關資訊將寄送至此註冊之郵件地址，請務必填寫正確之地址，以避免權益受損。</p>
<p><img src='images/Apply+MiCloud+Account-new-set.jpg' width='650' align='center'/></p>
<hr>
<h1>註冊完成</h1>
<p>註冊完成後，您將可以訂購我們所提供的產品(訂購前，需至先先完成帳單資訊及付款方式填寫，此相關操作說明，請參考&quot;[帳戶資訊修改](MiCloud Account Modify)</p>
<p><img src='images/Apply+MiCloud+Account-new-set2.jpg' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Apply+MiCloud+Account-Personal.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Apply+MiCloud+Account-Personal.md">Apply+MiCloud+Account-Personal.md</a></h1><br/><p>影片:<a href="http://www.youtube.com/watch?v=No2F5sJcwXE">MiCloud個人用戶註冊教學</a></p>
<p><div align="center"></p>
<p><embed width="420" height="345" src="http://www.youtube.com/v/No2F5sJcwXE&hd=1" type="application/x-shockwave-flash"></embed><br></div></p>
<h1>申請<strong>MiCloud</strong>帳號(個人用戶)(<strong>[<a href="http://micloud.tw">http://micloud.tw</a>]</strong>)</h1>
<h1>](申請--MiCloud--帳號 - 個人用戶 - --[<a href="http://micloud.tw--">http://micloud.tw--</a></h1>
<p>)<br>若您還未註冊<strong>MiCloud</strong>，請於網頁左上角點選右邊選項＜<strong>註冊</strong>＞。</p>
<p>若您已註冊完<strong>MiCloud</strong>，請於網頁左上角點選左邊選項＜<strong>登入</strong>＞([帳戶資訊修改](MiCloud Account Modify)</p>
<h2><img src='images/Apply+MiCloud+Account-Personal-p1-2.png' width='650' align='center'/></h2>
<h1><Step 1>設定帳號&amp;密碼</h1>
<p>進入註冊新帳戶頁面填寫您的資料</p>
<p>請於紅色框框內選擇您的帳戶類別</p>
<p><img src='images/Apply+MiCloud+Account-Personal-p1+-1.png' width='650' align='center'/></p>
<h1><Step 2>填寫會員資料</h1>
<p><img src='images/Apply+MiCloud+Account-Personal-p1+-3.png' width='650' align='center'/></p>
<h1><Step 3>填寫帳單資料</h1>
<h2><img src='images/Apply+MiCloud+Account-Personal-p1+-4.png' width='650' align='center'/></h2>
<h1>註冊完成</h1>
<p>註冊完成後您將可以看到我們所提供的產品</p>
<p>若您想要購買我們的產品</p>
<p>將需要您先行填寫信用卡資料才可進行購買</p>
<p>信用卡資料填寫可於頁面右上角&quot;[帳戶設定](MiCloud Account Modify)</p>
<p><img src='images/Apply+MiCloud+Account-Personal-p1+-5-2.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Apply+MiCloud+Account.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Apply+MiCloud+Account.md">Apply+MiCloud+Account.md</a></h1><br/><p>===</p>
<h2><img src='images/Apply+MiCloud+Account-p1+-5-2.png' width='650' align='center'/></h2>
<p>===</p>
<h2><img src='images/Apply+MiCloud+Account-p1+-6.png' width='650' align='center'/></h2>
<p>===</p>
<h2><img src='images/Apply+MiCloud+Account-p1+-7.png' width='650' align='center'/></h2>
<p>===</p>
<h2><img src='images/Apply+MiCloud+Account-p1+-8.png' width='650' align='center'/></h2>
<p>===</p>
<h2><img src='images/Apply+MiCloud+Account-p1+-9.png' width='650' align='center'/></h2>
<p>===</p>
<h2><img src='images/Apply+MiCloud+Account-p1+-10.png' width='650' align='center'/></h2>
<p>===</p>
<h2><img src='images/Apply+MiCloud+Account-CC3.JPG' width='650' align='center'/></h2>
<p>===</p>
<h2><img src='images/Apply+MiCloud+Account-CC1.JPG' width='650' align='center'/></h2>
<p>===</p>
<h2><img src='images/Apply+MiCloud+Account-p1+-11.png' width='650' align='center'/></h2>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="ApplyAndOrder.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=ApplyAndOrder.md">ApplyAndOrder.md</a></h1><br/><h2>MiCloud自助服務操作資訊</h2>
<h3>申請及訂購</h3>
<ul>
<li><a href="/index.html?page=Apply+MiCloud+Account-new.md">申請帳號</a></li>
<li><a href="/index.html?page=Order+a+Machine.md">訂購主機</a></li>
<li><a href="/index.html?page=Instruction+for+2XS+Machine.md">2XS 256MB主機使用說明</a></li>
</ul>
<hr>
<h3>線上管理</h3>
<ul>
<li>帳戶管理<ul>
<li><a href="/index.html?page=MiCloud+Account+Modify.md">帳戶資訊管理</a></li>
<li><a href="/index.html?page=MiCloud+SSH+Key.md">SSH金鑰管理</a></li>
<li><a href="/index.html?page=Micloud+Password.md">登入密碼管理</a></li>
<li><a href="/index.html?page=Pay+way.md">付款方式</a></li>
<li><a href="/index.html?page=MiCloud+billing.md">帳單資料</a></li>
</ul>
</li>
<li>主機管理<ul>
<li><a href="/index.html?page=Manage+your+Machines.md">主機清單</a></li>
<li><a href="/index.html?page=Snapshot+recovery.md">使用系統快照備份及還原</a></li>
<li><a href="/index.html?page=MiCloud+Credential+Description.md">預載軟件之預設密碼</a></li>
<li><a href="/index.html?page=Server+Restart+From+Portal.md">重新啟動、關閉與刪除主機</a></li>
<li><a href="/index.html?page=Using+Cloud+Analytics.md">使用MiCloud分析工具-DTrace</a></li>
<li><a href="/index.html?page=Mounting+the+Data+Volume+on+Windows.md">Windows主機掛載硬碟</a></li>
<li><a href="/index.html?page=Connect+windows.md">遠端連線Windows主機</a></li>
<li><a href="/index.html?page=Monitor+System.md">系統監控</a></li>
<li><a href="/index.html?page=Linux+Update+Timezone.md">時區設定</a></li>
<li><a href="/index.html?page=DNS+Manage.md">DNS管理</a></li>
</ul>
</li>
</ul>
<hr>
<h3>更新主機套件庫來源及安裝軟體</h3>
<ul>
<li><a href="/index.html?page=Ubuntu+mirror+site.md">變更套件庫來源及安裝軟體(Ubuntu)</a></li>
<li><a href="/index.html?page=Debian+mirror+site.md">變更套件庫來源及安裝軟體(Debian)</a></li>
<li><a href="/index.html?page=CentOS+mirror+site.md">變更套件庫來源及安裝軟體(CentOS)</a></li>
<li><a href="/index.html?page=Fedora+mirror+site.md">變更套件庫來源及安裝軟體(Fedora)</a></li>
<li><a href="/index.html?page=Install+SmartOS+Packages.md">更新套件庫及安裝軟體(SmartOS)</a></li>
</ul>
<hr>
<h3>金鑰相關使用教學</h3>
<ul>
<li><a href="/index.html?page=SSH+KeyGen+%26+Connect+Tutorial-Windows.MD">金鑰產生與連線教學(Windows)</a></li>
<li><a href="/index.html?page=SSH+KeyGen+%26+Connect+Tutorial-Linux+or+Unix.md">金鑰產生與連線教學(Linux/Unix)</a></li>
<li><a href="/index.html?page=SSH+KeyGen+%26+Connect+Tutorial-MacOS.md">金鑰產生與連線教學(MacOS)</a></li>
<li><a href="/index.html?page=Free+machine+%26+Connect+Tutorial.md">主機金鑰設置與連線教學</a></li>
</ul>
<hr>
<h3>檔案上傳教學</h3>
<ul>
<li><a href="/index.html?page=File+Upload+Tutorial-PSCP.md">使用指令上傳檔案(Windows至Linux)</a></li>
<li><a href="/index.html?page=File+Upload+Tutorial-Linux+or+Unix.md">使用指令上傳檔案(Linux/Unix)</a></li>
<li><a href="/index.html?page=File+Upload+Tutorial-MacOS.md">使用指令上傳檔案(MacOS)</a></li>
<li><a href="/index.html?page=File+Upload+Tutorial-WinScp.md">使用軟體上傳檔案(WinScp)</a></li>
<li><a href="/index.html?page=File+Upload+Tutorial-FileZilla.md">使用軟體上傳檔案(FileZilla)</a></li>
<li><a href="/index.html?page=File+Upload+Tutorial-Windows+to+Windows.md">使用指令上傳檔案(Windows至Windows)</a></li>
<li><a href="/index.html?page=File+Upload+Tutorial-Linux+to+Windows.md">使用指令上傳檔案(Linux至Windows)</a></li>
</ul>
<hr>
<h3>Hostname設定教學</h3>
<ul>
<li><a href="/index.html?page=Setting+hostname+on+SmartOS.md">SmartOS Hostname設置</a></li>
<li><a href="/index.html?page=Setting+hostname+on+Linux.md">Linux Hostname設置</a></li>
<li><a href="/index.html?page=Setting+hostname+on+Windows.md">Windows Hostname設置</a></li>
</ul>
<hr>
<h3>常見之設定</h3>
<ul>
<li><a href="/index.html?page=About+Swap+Adjust.md">swap設置</a></li>
<li><a href="/index.html?page=Setting+IPFilter.md">設定IPFilter</a></li>
<li><a href="/index.html?page=Using+Memcached.md">使用memcached</a></li>
<li><a href="/index.html?page=Enable+SMTP+on+SmartOS+Plus.md">啓動SmartOS Plus上之SMTP</a></li>
<li><a href="/index.html?page=Svcadm+usage.md">使用svcadm來管理系統服務</a></li>
<li><a href="/index.html?page=Setting+Nagios.md">建置Nagios網路監控主機</a></li>
<li><a href="/index.html?page=Setting+SMF+on+SmartOS.md">在SmartOS上設置SMF</a></li>
</ul>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Backing+Up+MySQL+with+Webmin.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Backing+Up+MySQL+with+Webmin.md">Backing+Up+MySQL+with+Webmin.md</a></h1><br/><p><a href="http://p.castfire.com/NTYYi/video/512011/512011-2011-02-14-160711.sd.m4v">Link</a></p>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="BlogShare.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=BlogShare.md">BlogShare.md</a></h1><br/><h1>Blog分享</h1>
<ul>
<li><a href="/index.html?page=Share+by+qrtt1.md">Micloud API</a></li>
</ul>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="CentOS+mirror+site.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=CentOS+mirror+site.md">CentOS+mirror+site.md</a></h1><br/><p>目前MiCloud提供的系統各自採用國外所提供的套件庫，主要是因為台灣的鏡像站點並不保證其服務的可靠度及可用率，但您也可以透過修改設定檔將套件庫來源指向台灣，其可靠度您必須自行評估，以保障您的虛擬主機。</p>
<p>CentOS引入了為Yellow Dog Linux 而設的YUM系統套件管理工具，其套件庫的修改與設定相似。實際修改方式如下說明:</p>
<h1>變更套件來源</h1>
<p>登入後，請先複製“CentOS-Base.repo”檔案，此檔案存放在“/etc/yum.repos.d/”下，此複製動作針對改錯時，未來可以回復原來的檔案。將CentOS-Base.repo檔案複製一份，命名為CentOS-Base.repo.bak，指令如下</p>
<pre><code>#cp /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak</code></pre>
<p>備份完成後請至/etc/yum.repos.d下確認是否成功增加CentOS-Base.repo.bak檔，如下圖</p>
<p><img src='images/CentOS+mirror+site-cecp.jpg' width='650' align='center'/></p>
<p>編輯repo檔，編輯指令如下:</p>
<pre><code>#vi /etc/yum.repos.d/CentOS-Base.repo</code></pre>
<p>原來的套件庫參考網站為<a href="http://mirror.centos.org/centos，將其改為參考台灣鏡像站http://opensource.nchn.org.tw/centos，下圖紅色框框部分包含原來的套件來源(已註解掉，將不會再執行)，以及修改至台灣鏡像站的網址。CentOS有分很多模組，用戶可以自行選擇哪幾個要變更。">http://mirror.centos.org/centos，將其改為參考台灣鏡像站http://opensource.nchn.org.tw/centos，下圖紅色框框部分包含原來的套件來源(已註解掉，將不會再執行)，以及修改至台灣鏡像站的網址。CentOS有分很多模組，用戶可以自行選擇哪幾個要變更。</a></p>
<pre><code>[base]]([base)
#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=os
baseurl=http://opensource.nchc.org.tw/centos/$releasever/os/$basearch/
[updates]]([updates)
#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=updates
baseurl=http://opensource.nchc.org.tw/centos/$releasever/updates/$basearch/
[extras]]([extras)
#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=extras
baseurl=http://opensource.nchc.org.tw/centos/$releasever/extras/$basearch/
[centosplus]]([centosplus)
#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=centosplus
baseurl=http://opensource.nchc.org.tw/centos/$releasever/centosplus/$basearch/
[contrib]]([contrib)
#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=contrib
baseurl=http://opensource.nchc.org.tw/centos/$releasever/contrib/$basearch/</code></pre>
<p>修改完後儲存即可。</p>
<p><img src='images/CentOS+mirror+site-cechange.jpg' width='650' align='center'/></p>
<p>請執行更改後的檔案，並確認是否更新，執行指令及畫面如下</p>
<ul>
<li>清除yum的暫存</li>
</ul>
<pre><code>#yum clean all</code></pre>
<p><img src='images/CentOS+mirror+site-ceclean.jpg' width='650' align='center'/></p>
<ul>
<li>列出有更新的檔案</li>
</ul>
<pre><code>#yum list</code></pre>
<p><img src='images/CentOS+mirror+site-celist.jpg' width='650' align='center'/></p>
<ul>
<li>執行更新</li>
</ul>
<pre><code>#yum update</code></pre>
<p><img src='images/CentOS+mirror+site-ceupdate.jpg' width='650' align='center'/></p>
<ul>
<li>找到您更新過的路徑</li>
</ul>
<pre><code>#yum repolist –v</code></pre>
<p><img src='images/CentOS+mirror+site-cerepolist.jpg' width='650' align='center'/></p>
<h1>更多CentOS mirror site list</h1>
<ul>
<li>Debian全球映射站</li>
</ul>
<p><a href="http://www.centos.org/modules/tinycontent/index.php?id=30">http://www.centos.org/modules/tinycontent/index.php?id=30</a></p>
<ul>
<li>台灣鏡像站推薦使用</li>
</ul>
<p><a href="http://opensource.nchc.org.tw/centos/">http://opensource.nchc.org.tw/centos/</a></p>
<p><a href="http://mirror01.idc.hinet.net/CentOS/">http://mirror01.idc.hinet.net/CentOS/</a></p>
<p><a href="http://ftp.twaren.net/Linux/CentOS/">http://ftp.twaren.net/Linux/CentOS/</a></p>
<p><a href="http://ftp.isu.edu.tw/pub/Linux/CentOS/">http://ftp.isu.edu.tw/pub/Linux/CentOS/</a></p>
<hr>
<h1>安裝非預載套件</h1>
<p>使用yum指令安裝CentOS套件，相關指令如下:</p>
<p>先查詢可安裝的套件</p>
<pre><code>#yum list</code></pre>
<p><img src='images/CentOS+mirror+site-ce-list.jpg' width='650' align='center'/></p>
<p>若找不到您需要的套件也可透過下面的指令來搜尋</p>
<pre><code>#yum search [套件名稱/關鍵字]](#yum search [套件名稱/關鍵字)</code></pre>
<p><img src='images/CentOS+mirror+site-ce-search.jpg' width='650' align='center'/></p>
<p>再執行安裝，指令如下</p>
<pre><code>#yum install [套件名稱]](#yum install [套件名稱)</code></pre>
<p><img src='images/CentOS+mirror+site-ce-install.jpg' width='650' align='center'/></p>
<p>若想移除套件，指令如下</p>
<pre><code>#yum remove [套件名稱]](#yum remove [套件名稱)</code></pre>
<p><img src='images/CentOS+mirror+site-ce-remove.jpg' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Changing+Default+SmartMachine+Passwords.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Changing+Default+SmartMachine+Passwords.md">Changing+Default+SmartMachine+Passwords.md</a></h1><br/><p>There are a few default passwords that should be changed when you first get your SmartMachine. This is how to change them via the command line.</p>
<p>If you intend to use Virtualmin to manage hosting for your SmartMachine, it&#39;s advisable to use the Virtualmin controls for password changing, so that Virtualmin knows the passwords for your users and can use them as it goes. Otherwise you may get into a situation where a single user has a different password for system login, and for MySQL or SVN. This applies to users created through Virtualmin (i.e. not &#39;root&#39; and &#39;admin&#39;).</p>
<p>Please note, once you change any passwords, those will not update your machine credentials in your my.joyentcloud.com portal.</p>
<pre><code>You should change passwords on older cloud SmartMachines.
If you use my.joyentcloud.com for your SmartMachines the admin and root system accounts are secured with their system passwords locked.
You can use this process to set the system passwords if you need to on a new Joyent cloud SmartMachine.</code></pre>
<h1>Admin User</h1>
<p>Log in to your SmartMachine over ssh.<br>Run this command:</p>
<p><code>passwd</code></p>
<p>You will need to enter your current password (supplied by Joyent) and your new password.<br>Root User<br>First log in as the admin user<br>Run this command:<br>sudo passwd root<br>You will not be prompted for the current password, but asked to enter in your new one.</p>
<h1>MySQL Root User</h1>
<p>1.Log in to MySQL:</p>
<pre><code class="language-mysql">-u root
-p</code></pre>
<p>2.You&#39;ll be prompted for your MySQL password, supplied by Joyent. Once at the MySQL prompt, run this command:</p>
<p><code>SET PASSWORD FOR root@localhost=PASSWORD(&#39;yournewpassword&#39;);</code></p>
<p>MySQL should return something like this</p>
<p><code>Query OK, 0 rows affected (0.05 sec)</code></p>
<p>You can then type quit to exit the command line MySQL interface.</p>
<p><code>After exiting the MySQL command line interface, you should edit your .mysql_history file to remove the entry that shows your password.</code></p>
<note error><br>If you use webmin you also need to update the password there as well either via the webmin interface or editing /etc/webmin/mysql/config</note>

<h1>Webmin User</h1>
<p>Run this command:</p>
<p><code>sudo /opt/webmin-1.380/changepass.pl /etc/webmin admin yournewpassword</code></p>
<p>And that should allow you to change the password from the command line.</p>
<pre><code>The path to changepass.pl may change as the version of webmin increases. In the example above its version 1.380.
After logging out and back in, you should edit your .bash_history file to remove the entry that shows your password.</code></pre>
<p>There is also probably a way to change the password from within webmin.</p>
<h1>From within Webmin</h1>
<ul>
<li>After logging in, click on the &quot;Webmin&quot; link at the top, next to Virtualmin,</li>
<li>Then click on the +Webmin link to open the Webmin options.</li>
<li>From there click on Webmin Users to view your list of users</li>
<li>Click on Admin and you can change the password.<h1>Updating Webmin modules configuration</h1>
If you changed the password of MySQL or PostgreSQL, and you care of any Webmin or Virtualmin functionality, you&#39;ll need to update both modules configuration in Webmin so that it has access. Just login to Webmin, switch your view to the Webmin pane, click MySQL or PostgreSQL and follow the &#39;Module Config&#39; option on the top for a form that will let you enter the new root password for the service.</li>
</ul>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Checking+Disk+Usage.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Checking+Disk+Usage.md">Checking+Disk+Usage.md</a></h1><br/><h1>檢查磁碟使用情況</h1>
<p>||如何得到這個資訊    ||請使用此命令<br>|查詢整個文件系統的磁碟空間使用情況    |df -ht<br>|查詢當前目錄的磁碟空間使用情況    |du -h<br>|查詢摘要目錄使用的空間    |du -hs /opt<br>在這些命令中的-h參數的結果，是以“人類可讀”的形式呈現。</p>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Connect+windows.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Connect+windows.md">Connect+windows.md</a></h1><br/><h1>Windows 遠端桌面連線</h1>
<p>MiCloud Windows Server預設開啓遠端桌面連線服務，讓您可以透過internet連線操控與安裝相關軟體，下面介紹如何使用遠端桌面連線從您的電腦連線至MiCloud Windows Server：</p>
<h1>Windows 下遠端桌面連線 Windows</h1>
<p>1.開啟&quot;遠端桌面連線&quot;,輸入您的ip並按下連線<br><img src='images/Connect+windows-p.png' width='450' align='center'/><br>2.輸入您的密碼,,進入後您就可以開始使用<br><img src='images/Connect+windows-p+-1.png' width='650' align='center'/></p>
<h2><img src='images/Connect+windows-p+-2.png' width='650' align='center'/></h2>
<h1>Linux 下遠端桌面連線 Windows</h1>
<p>1.再左上方搜尋欄位中輸入搜尋欄位中輸入&quot;remote desktop viewer&quot;,並點選開啟<br><img src='images/Connect+windows-x1.png' width='550' align='center'/><br>2.開啟&quot;remote desktop viewer&quot;於左上方點選連線<br><img src='images/Connect+windows-x2.png' width='550' align='center'/><br>3.於&quot;主機(H):&quot;欄位中輸入您將遠端連線的ip,&quot;使用者名稱(U):&quot;欄位中輸入您的帳號,並按下連線<br><img src='images/Connect+windows-x3.png' width='450' align='center'/><br>2.輸入您的密碼,,進入後您就可以開始使用<br><img src='images/Connect+windows-x4.png' width='650' align='center'/></p>
<h2><img src='images/Connect+windows-x5.png' width='650' align='center'/></h2>
<h1>Mac 下遠端桌面連線Windows</h1>
<p>Mac下使用遠端桌面連線至windows server，要先安裝Microsoft Remote Desktop Connection Client for Mac(<a href="http://www.microsoft.com/mac/remote-desktop-client">下載</a><br>相關設定如下:</p>
<p>1.安裝完成後，開啟Microsoft Remote Desktop Connection Client for Mac，輸入您的ip並按下connect。<br><img src='images/Connect+windows-RDCMacIntro.png' width='650' align='center'/></p>
<p>2.輸入您的User name及Password，而Domain為您主機的ip，您就可開始使用。<br><img src='images/Connect+windows-RDCMacLogin.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Control+Panel+%26+Analysis.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Control+Panel+%26+Analysis.md">Control+Panel+%26+Analysis.md</a></h1><br/><h1>控制面板</h1>
<p>此頁可讓您觀察來自世界各地的連線來源分佈狀況(如果想提供的是全球性的服務，此圖表數據相信會對您有所幫助)。</p>
<p>下方則是提供每秒TCP or HTTP連線數量。<br><img src='images/Control+Panel+%26+Analysis-p3.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Control+Panel+&+Analysis.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Control+Panel+&+Analysis.md">Control+Panel+&+Analysis.md</a></h1><br/><h1>控制面板</h1>
<p>此頁可讓您觀察來自世界各地的連線來源分佈狀況(如果想提供的是全球性的服務，此圖表數據相信會對您有所幫助)。</p>
<p>下方則是提供每秒TCP or HTTP連線數量。<br><img src='images/Control+Panel+&+Analysis-p3.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Creating+a+Deploy+User.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Creating+a+Deploy+User.md">Creating+a+Deploy+User.md</a></h1><br/><p>If you&#39;re using Capistrano or some other deployment utility, you should create a user account that has the proper rights and roles to deploy your application.</p>
<p>This user is called the &quot;deploy user&quot;.<br>In this page:</p>
<h1>Before You Begin</h1>
<p>This topic assumes that you are deploying multiple applications on a SmartMachine and that your applications live on your SmartMachine like this:</p>
<pre><code>/home/www.example.com/
/home/www.example2.com/</code></pre>
<p>You should have copies of the public SSH keys for each developer in your project who can deploy the application.</p>
<h1>Creating the Deploy User</h1>
<pre><code>You can use the default user, jill, as the deploy user if you&#39;re deploying only a single application on your SmartMachine.</code></pre>
<ul>
<li>In Virtualmin, create a new user named deploy.</li>
<li>Log in to your SmartMachine and run the following command to grant deploy role-based rights to use svcadm, svccfg, and other SMF commands:</li>
</ul>
<pre><code>usermod -P &quot;Service Management&quot; deploy</code></pre>
<ul>
<li>Add each developer&#39;s SSH public key to /home/deploy/.ssh/authorized_keys<h1>Examples</h1>
</li>
</ul>
<p>This section contains examples for different deployment systems.</p>
<h1>Capistrano</h1>
<p>To deploy new code have your developers SSH in and run these commands:</p>
<pre><code>set :user, &quot;deploy&quot;
set :runner, &quot;deploy&quot;

task :restart_web_server, :roles =&gt; :web do
run &quot;svcadm restart http&quot;
end</code></pre>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Debian+mirror+site.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Debian+mirror+site.md">Debian+mirror+site.md</a></h1><br/><p>目前MiCloud提供的系統各自採用國外所提供的套件庫，主要是因為台灣的鏡像站點並不保證其服務的可靠度及可用率，但您也可以透過修改設定檔將套件庫來源指向台灣，其可靠度您必須自行評估，以保障您的虛擬主機。</p>
<p>Debian採用APT套件管理，其套件庫的修改與設定相似，實際修改方式如下說明:</p>
<h1>變更套件來源</h1>
<p>登入後，請先複製“sources.list”檔案，此檔案存放在“/etc/apt/”下，此複製動作針對改錯時，未來可以回復原來的檔案。將sources.list檔案複製一份，命名為sources.bak，指令如下</p>
<pre><code>#cp /etc/apt/sources.list /etc/apt/sources.list.bak</code></pre>
<p>備份完成後請至/etc/apt下確認是否成功增加sources.list.bak檔，如下圖</p>
<p><img src='images/Debian+mirror+site-decp.jpg' width='650' align='center'/></p>
<p>確認Debian 版本並編輯sources.list，編輯指令如下:</p>
<pre><code>#vi /etc/apt/sources.list</code></pre>
<p>原來的套件庫參考網站為<a href="http://http.us.debian.org/debian/，將其改為參考台灣鏡像站http://opensource.nchn.org.tw/debian/”">http://http.us.debian.org/debian/，將其改為參考台灣鏡像站http://opensource.nchn.org.tw/debian/”</a> 下圖紅色框框部分即是要修改的部分</p>
<pre><code>deb http://opensource.nchc.org.tw/debian squeeze main contrib non-free
deb http://opensource.nchc.org.tw/debian squeeze-updates main contrib non-free
deb http://security.debian.org/ squeeze/updates main contrib non-free</code></pre>
<p>修改完後儲存即可。</p>
<p><img src='images/Debian+mirror+site-dechange.jpg' width='650' align='center'/></p>
<p>請執行更改後的檔案，並確認是否更新，執行指令及畫面如下系統將於您更改的路徑中找到可更新的套件。(如下方黃色底線)</p>
<pre><code>#apt-get update</code></pre>
<p><img src='images/Debian+mirror+site-deupdate.jpg' width='650' align='center'/></p>
<h1>更多Debian mirror site list</h1>
<ul>
<li>Debian全球映射站</li>
</ul>
<p><a href="http://www.debian.org/mirror/list">http://www.debian.org/mirror/list</a></p>
<ul>
<li>台灣鏡像站推薦使用</li>
</ul>
<p><a href="http://opensource.nchc.org.tw/debian/">http://opensource.nchc.org.tw/debian/</a></p>
<p><a href="http://ftp.tw.debian.org/debian/">http://ftp.tw.debian.org/debian/</a></p>
<p><a href="http://opensource.nchc.org.tw/debian/">http://opensource.nchc.org.tw/debian/</a></p>
<p><a href="http://debian.linux.org.tw/debian/">http://debian.linux.org.tw/debian/</a></p>
<hr>
<h1>安裝非預載套件</h1>
<p>使用apt指令安裝Debian套件，相關指令如下:</p>
<p>先查詢可安裝的套件</p>
<pre><code>#apt-cache pkgnames</code></pre>
<p><img src='images/Debian+mirror+site-de-apt-cache.jpg' width='650' align='center'/></p>
<p>若找不到您需要的套件也可透過下面的指令來搜尋</p>
<pre><code>#apt-cache search [套件名稱/關鍵字]](#apt-cache search [套件名稱/關鍵字)</code></pre>
<p><img src='images/Debian+mirror+site-de-apt-cache-search.jpg' width='650' align='center'/></p>
<p>再執行安裝，指令如下</p>
<pre><code>#apt-get install [套件名稱]](#apt-get install [套件名稱)</code></pre>
<p><img src='images/Debian+mirror+site-de-apt-+install.png' width='650' align='center'/></p>
<p>檢查是否安裝成功，指令如下</p>
<pre><code>#dpkg --get-selections | grep &quot;套件名稱&quot;</code></pre>
<p><img src='images/Debian+mirror+site-de-selection.jpg' width='650' align='center'/></p>
<p>若想移除套件，指令如下</p>
<pre><code>#apt-get remove [套件名稱]](#apt-get remove [套件名稱)</code></pre>
<p><img src='images/Debian+mirror+site-de-remove.jpg' width='650' align='center'/></p>
<p>若要更新所有己安裝的套件，指令如下:</p>
<pre><code>#apt-get upgrade</code></pre>
<p><img src='images/Debian+mirror+site-de-aptupgrade.jpg' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Different.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Different.md">Different.md</a></h1><br/><h1>租用MiCloud與租用虛擬主機有何不同？</h1>
<ul>
<li>租用的虛擬主機的運算效能與資源皆是由一台主機去分割使用的，所以當其中的一個使用者所使用的資源過大時，其他的使用者都將會受到影響。而MiCloud擁有Joyent所開發的雲端運算作業系統，不但能夠將運算效能與資源完全獨立分割出來，相對於租用的虛擬主機無法進行橫向、直向的擴充以及資源的調配，MiCloud都能輕鬆的完成。</li>
</ul>
<h1>MiCloud服務能做些什麼？</h1>
<ul>
<li>MiCloud針對不同產業殊特需求提供服務，例如中小企業使用的ERP服務MiERP，讓中小企業可以客製化自己的線上ERP系統，還有鎖定教育市場的線上互動學習系統、網路商店服務。</li>
<li>針對醫療產業所提供的服務，包括了提供醫院與病患使用的行動照護平台，醫院內部門診管理、健保申報、統計分析的資訊系統，還有針對生技研究需求的研究平台，供物種定序與個人基因解碼研究。</li>
</ul>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Disabling+or+Restarting+Webmin.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Disabling+or+Restarting+Webmin.md">Disabling+or+Restarting+Webmin.md</a></h1><br/><p>At times it may be necessary to disable the administration web server of your SmartMachine (aka. Virtualmin or Webmin).  The following is how you disable and restart this service using SMF.</p>
<p>In this page:</p>
<h1>Disable Webmin</h1>
<p>SSH into your SmartMachine, then switch to the root user and run:</p>
<pre><code>svcadm disable webmin</code></pre>
<h1>Restart Webmin</h1>
<p>If a service crashes that is maintained by SMF it will be placed into a &#39;maintenance mode&#39;.  The following process is how to restart a service that has been disabled or that is in maintenance mode:</p>
<h1>Check to see if service is in Maintenance Mode</h1>
<p>If a service is in maintenance mode it has cashed and is usually inductive of an error with the service or your SmartMachine is running out of RAM or Disk.</p>
<p>To check that a service is in maintenance mode:</p>
<pre><code>svcs -a</code></pre>
<p>If the service is in maintenance mode you will see something similar to this:</p>
<p>maintenence 18:50:25 svc:/network/webmin:webmin</p>
<p>You should review the log and check for a core file to derive root cause of why the service was in maintenance mode.</p>
<p>To bring a service out of maintenance mode run the following as root:</p>
<pre><code>svcadm clear service_name</code></pre>
<h1>Verify service is disabled</h1>
<p>To verify a service is disabled run this command:</p>
<pre><code>svcs -a</code></pre>
<p>If the service is disabled you will see something similar to this:</p>
<p>disabled 18:51:10 svc:/network/webmin:webmin</p>
<h1>Enable service</h1>
<p>To start a service run this command as root:</p>
<pre><code>svcadm enable service_name</code></pre>
<p>Then verify the service is running with:</p>
<pre><code>svcs -a | grep service_name</code></pre>
<p>You should see something similar to this:</p>
<p>online 18:50:25 svc:/network/webmin:webmin</p>
<p>&quot;online&quot; state indicates that the service is back and running.</p>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="DNS+Manage.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=DNS+Manage.md">DNS+Manage.md</a></h1><br/><h1>DNS設置</h1>
<p>若您想在MiCloud主機上設置DNS，請先至網址註冊商(例如:Godaddy)申請一個Domain Name，設置方式有以下二種:<br><em>  子網域指向MiCloud DNS Server
</em>  直接將您所申請的Domain Name指向MiCloud DNS Server<br>詳細說明如下:</p>
<h1>設置子網域</h1>
<ol>
<li>請先新增一個子網域，並將Points to設為MiCloud DNS Server :</li>
</ol>
<p><code>dns60.micloud.tw或dns64.micloud.tw</code></p>
<p><img src='images/DNS+Manage-sub-1.png' width='650' align='center'/></p>
<p>2.新增完成後，請至MiCloud平台點選”DNS管理”下”專屬網域之主機”按鈕。<br><img src='images/DNS+Manage-sub-2.png' width='650' align='center'/><br><img src='images/DNS+Manage-sub-3.png' width='650' align='center'/></p>
<p>3.進入頁面後，請點選”新增Domain”按鈕，將剛剛所新增的子網域名稱加入頁面中。<br><img src='images/DNS+Manage-sub-4.png' width='650' align='center'/><br><img src='images/DNS+Manage-sub-5.png' width='650' align='center'/></p>
<p>4.新增成功後，點選”新增A Record”，即可為您的主機設置Domain name。<br><img src='images/DNS+Manage-sub-7.png' width='650' align='center'/><br><img src='images/DNS+Manage-sub-6.png' width='650' align='center'/></p>
<p>5.驗證Domain，使用命令提示字元或直接將您所設至的Domain Name貼至網址列即可。</p>
<p>命令提示字元請執行下方指令做驗證:</p>
<p><code>nslookup portal.test.facewithus.com</code></p>
<p><img src='images/DNS+Manage-sub-8.png' width='450' align='center'/></p>
<p>或者可以直接將記錄指向MiCloud DNS server查詢：</p>
<p><code>nslookup portal.test.facewithus.com dns60.micloud.tw</code></p>
<p><img src='images/DNS+Manage-sub-9.png' width='500' align='center'/></p>
<h1>設置整個網域</h1>
<ol>
<li>將您申請的網域名稱的server設至MiCloud DNS Server。以Godaddy為例。</li>
</ol>
<p><code>MiCloud DNS Server:
DNS60.MICLOUD.TW
DNS64.MICLOUD.TW</code></p>
<p><img src='images/DNS+Manage-all-1.png' width='650' align='center'/><br><img src='images/DNS+Manage-all-2.png' width='650' align='center'/></p>
<p>2.修改完成後，請至MiCloud平台點選”DNS管理”下”專屬網域之主機”按鈕。<br><img src='images/DNS+Manage-sub-2.png' width='650' align='center'/><br><img src='images/DNS+Manage-sub-3.png' width='650' align='center'/></p>
<p>3.進入頁面後，請點選”新增Domain”按鈕，將您的網域名稱新增至頁面中。<br><img src='images/DNS+Manage-sub-4.png' width='650' align='center'/><br><img src='images/DNS+Manage-all-3.png' width='650' align='center'/></p>
<p>4.新增成功後，點選”新增A Record”，即可為您的主機設置Domain name。<br><img src='images/DNS+Manage-sub-7.png' width='650' align='center'/><br><img src='images/DNS+Manage-all-4.png' width='650' align='center'/></p>
<p>5.驗證Domain，使用命令提示字元或直接將您所設至的Domain Name貼至網址列即可。</p>
<p>命令提示字元請執行下方指令做驗證:</p>
<p><code>nslookup portal.test.facewithus.com</code></p>
<p><img src='images/DNS+Manage-all-5.png' width='450' align='center'/></p>
<p>或者可以直接將記錄指向MiCloud DNS server查詢：</p>
<p><code>nslookup portal.test.facewithus.com dns60.micloud.tw</code></p>
<p><img src='images/DNS+Manage-all-6.png' width='450' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Enable+SMTP+on+SmartOS+Plus.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Enable+SMTP+on+SmartOS+Plus.md">Enable+SMTP+on+SmartOS+Plus.md</a></h1><br/><p>如果您需要建立電子郵件伺服器來收發電子郵件，您必須在您的主機上啟用此服務，而處理電子郵件收發服務的通訊協定為簡易郵件傳送通訊協定，簡稱SMTP(Simple Mail Transfer Protocol)，在SmartMachines上SMTP預設是關閉，但用戶可以利用以下步驟來啟用SMTP的服務。</p>
<h1>前置作業</h1>
<p>在啟動SmartOS 主機上的SMTP之前，必需先安裝postfix和courier，您可以先使用pkgin search指令搜尋是否已有存在postfix 、courier，指令如下：</p>
<pre><code>#pkgin se postfix</code></pre>
<p><img src='images/Enable+SMTP+on+SmartOS+Plus-SMTP1.png' width='600' align='center'/></p>
<pre><code># pkgin se courier</code></pre>
<p><img src='images/Enable+SMTP+on+SmartOS+Plus-SMTP2.png' width='600' align='center'/></p>
<p>透過svcs指令確認postfix及courier的服務處於運行狀態</p>
<pre><code>#svcs -a | grep -Ee &quot;postfix|courier”</code></pre>
<p><img src='images/Enable+SMTP+on+SmartOS+Plus-SMTP3.png' width='600' align='center'/></p>
<p>從上面的擷圖可以看出，預設只有postfix是啟動的(online)，而courier中的authlib及imap的服務是關閉狀態，您必須透過svcadm enable 指令來啟動courier的兩項服務，指令如下:</p>
<pre><code>#svcadm enable svc:/network/courier:imap
#svcadm enable svc:/network/courier:authlib</code></pre>
<p><img src='images/Enable+SMTP+on+SmartOS+Plus-SMTP4.png' width='600' align='center'/></p>
<p>避免有些服務未啟用，故再次執行svcs指令來確認服務是否正常執行中:<br><img src='images/Enable+SMTP+on+SmartOS+Plus-SMTP5.png' width='600' align='center'/></p>
<h1>啟動SMTP</h1>
<ol>
<li>啟動SMTP的過程中，首先需要做連結檔，未來postfix可以直接在此檔中找到我們所要的的函式庫(lib)，指令如下:</li>
</ol>
<pre><code># ln -s /opt/local/etc/sasl2/etc/sasl2</code></pre>
<ol>
<li>postfix裡需修改main.cf及master.cf檔。main.cf是postfix最重要的設定檔，所有修改的動作皆需在這個檔案裡進行修改；master.cf主要是規定postfix每個程序的運作參數。</li>
</ol>
<ul>
<li>修改main.cf檔，此檔案的路徑存在 /opt/local/ect/postfix/main.cf，新增內容如下擷圖中以紅色框框起來的部分。</li>
</ul>
<ul>
<li>*inet_interfaces=all，設定postfix能使用的網路介面，一般預設為localhost， 如果是對外服務的郵件主機，就必須要設定為all。</li>
<li>*smtpd_sasl_auth_enable=yes，“確定是否針對Client啟動sasl的認證？”預設是不啟用，須自行將它啟用。</li>
</ul>
<p><img src='images/Enable+SMTP+on+SmartOS+Plus-SMTP6.png' width='600' align='center'/></p>
<ul>
<li>修改master.cf，此檔案的路徑存在 /opt/local/ect/postfix/master.cf，新增內容如下擷圖中以紅色框框起來的部分。</li>
<li>*smtpd_enforce_tls=no，啟動auth 驗證。</li>
<li>*smtpd_tls_cert_file=opt/local/etc/openssl/private/salfsigned.pem</li>
<li>*smtpd_tls_loglevel=0</li>
<li>*smtpd_use_tls=yes<br><img src='images/Enable+SMTP+on+SmartOS+Plus-SMTP7.png' width='600' align='center'/></li>
</ul>
<h1>驗證程序</h1>
<ol>
<li>服務設定完成後，利用以下指令確認是否設定成功，其中”Content” 為信件內容，”The Subject”為信件主旨，在信件主旨之後則是您需要測試收到系統所發出的電子郵件地址，此範例的電子郵件地址是設定傳送到Gmail。<br><img src='images/Enable+SMTP+on+SmartOS+Plus-SMTP8.png' width='600' align='center'/></li>
</ol>
<ol>
<li>完成後可以前往電子郵件信箱確認是否收到信件，如下圖所示收到主旨為“The Subject”的郵件，表示此設定為成功。<br><img src='images/Enable+SMTP+on+SmartOS+Plus-SMTP9.png' width='600' align='center'/></li>
</ol>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Examining+Running+Processes.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Examining+Running+Processes.md">Examining+Running+Processes.md</a></h1><br/><p>在這個主題中，您可以找到：</p>
<h1>從 shell 檢查程序</h1>
<p>||相關資訊    ||使用此命令<br>|通用處理器和內存統計資料    |prstat -Z -s cpu</p>
<p>If prstat changes your terminal settings, use the reset command to reset them.<br>|正在運行的程序列表    |ps -elf<br>|admin用戶程序列表    |ps -uadmin -o pcpu,user,pid,args,comm,s</p>
<p>ps -uadmin -o user,args,pcpu,pmem,vsz,time,comm<br>|MySQL用戶程序    |ps -umysql -o pcpu,vsz,osz,args,comm,s<br>|CPU使用率    |sudo /root/jinf -C<br>|記憶體使用    |sudo /root/jinf -m<br>|互換空間的使用情況    |sudo /root/jinf -S</p>
<h1>檢查Webmin的過程</h1>
<ul>
<li>登錄到Virtualmin（請參考帳戶登錄及重要網址一文 ）。</li>
<li>點擊Webmin在左上方的選單，然後點選系統=&gt;運行的程序。</li>
<li>點擊PID、用戶、記憶體、或是CPU，以便為您的帳戶上運行的程序列表，分別按不同標準進行排序。</li>
</ul>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Facebook+SSL+FAQ.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Facebook+SSL+FAQ.md">Facebook+SSL+FAQ.md</a></h1><br/><p>As of October 1st, 2011 Facebook requires all applications to use Secure Socket Layer ( SSL ) certificates. This page is for Facebook developers to be able to serve their applications via HTTPS with a SSL Certificate.</p>
<p>In this page:</p>
<h1>Why is Facebook requiring SSL certificates?</h1>
<p>Facebook has updated their Terms of Service that require all applications served from them to have a SSL certificate and use the HTTPS protocol.</p>
<p>More information of the change by Facebook can be found here and Joyent blogged about this.</p>
<h1>Can I use my free Joyent Facebook developer account with SSL?</h1>
<p>No, You will need to buy a Joyent SmartMachine to get a static IP to bind your domain to. The free Joyent Facebook accounts do not support SSL. You can get a Joyent SmartMachine form <a href="https://my.joyentcloud.com/">https://my.joyentcloud.com/</a>, then purchase a SSL certificate.</p>
<h1>How do I get a SSL certificate?</h1>
<p>You will have to purchase a SSL certificate from a third party vendor. Joyent uses RapidSSL for its SSL certificates, but you can use your vendor of choice.</p>
<h1>How do I install an SSL certificate on my Joyent SmartMachine?</h1>
<p>You can install your SSL certificate via your VirtualMin administration portal for your SmartMachine.</p>
<pre><code>You will not be able to use the provided *.joyent.us subdomain. You will need to purchase your own domain name to be use with the SSL certificate if you have not already done so.</code></pre>
<p>To enable this SSL setup for your site:</p>
<ul>
<li>Sign in to Virtualmin.</li>
<li>Select a domain from the drop-down in the left-hand navigation. This is the domain that *you&#39;ll enable SSL for.</li>
<li>Click Edit Virtual Server.</li>
<li>Click Enabled features and then select &#39;SSL website enabled&#39;.</li>
<li>Click Save Virtual Server.</li>
<li>A page will appears warning you that SSL cannot be enabled for more than one domain on the IP address. Click Yes, Modify Virtual Server to override and conclude with the SSL setup.<br>With this feature enabled, Virtualmin will give you access to the Manage SSL Certificate page that lets you generate a new key, certificate or a signing request (i.e. generally manage your SSL protection details).</li>
</ul>
<pre><code>A dedicated IP is still necessary for having a real SSL certificate in place.</code></pre>
<p>These issues are believed to be resolved now (provided your SSL is implemented using the new form, with the SSL checkbox showing up enabled), though we&#39;d welcome feedback from you.</p>
<p><strong>More instructions on installing your SSL Certificate can be found at:<br><a href="http://oldwiki.joyent.com/smartmachine:ssl#installing-your-ssl-certificate"><a href="http://oldwiki.joyent.com/smartmachine:ssl#installing-your-ssl-certificate">http://oldwiki.joyent.com/smartmachine:ssl#installing-your-ssl-certificate</a></a>
</strong></p>
<h1>Performance with SSL and HTTPS on a SmartMachine</h1>
<p>There is minimal performance reduction with the added encryption on a Joyent SmartMachine.</p>
<p>However, all Joyent SmartMachines offer the following features that you can use to increase the general performance and monitoring of your Facebook application:</p>
<ul>
<li>Free subscription to New Relic included with all SmartMachines</li>
<li>Free Joyent Cloud Analytic accessible form my.joyentcloud.com</li>
<li>Ability to use a Zeus load balencer to increase performance and get more information about your customer traffic</li>
</ul>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Fedora+mirror+site.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Fedora+mirror+site.md">Fedora+mirror+site.md</a></h1><br/><p>目前MiCloud提供的系統各自採用國外所提供的套件庫，主要是因為台灣的鏡像站點並不保證其服務的可靠度及可用率，但您也可以透過修改設定檔將套件庫來源指向台灣，其可靠度您必須自行評估，以保障您的虛擬主機。</p>
<p>Fedora引入了為Yellow Dog Linux 而設的YUM系統套件管理工具，其套件庫的修改與設定相似。實際修改方式如下說明:</p>
<h1>變更套件來源</h1>
<p>登入後，請先複製“fedora.repo、fedora-updates.repo、fedora-updates-testing.repo”這三個檔案存放在“/etc/yum.repos.d/”下，此複製動作針對改錯時，未來可以回復原來的檔案。</p>
<p>將fedora.repo、fedora-updates.repo、fedora-updates-testing.repo複製一份，命名為fedora.repo.bak、fedora-updates.repo.bak、fedora-updates-testing.repo.bak，指令如下:</p>
<pre><code>#cp /etc/yum.repos.d/fedora.repo /etc/yum.repos.d/fedora.repo.bak
#cp /etc/yum.repos.d/fedora-updates.repo /etc/yum.repos.d/fedora-updates.repo.bak
#cp /etc/yum.repos.d/fedora-updates-testing.repo /etc/yum.repos.d/fedora-updates-testing.repo.bak</code></pre>
<p>備份完成後請至/etc/apt下確認是否成功增加，如下圖:</p>
<p><img src='images/Fedora+mirror+site-fecp.jpg' width='650' align='center'/></p>
<p>編輯repo檔，編輯指令如下<br>*  fedora.repo</p>
<pre><code>#vi /etc/yum.repos.d/fedora.repo</code></pre>
<p>原來的套件庫參考網站為<a href="http://download.fedoraproject.org/pub/fedora/，將其改為參考台灣鏡像站http://opensource.nchn.org.tw/fedora，下圖紅色框框部分包含原來的套件來源(已註解掉，將不會再執行)，以及修改至台灣鏡像站的網址。Fedora有分很多模組，用戶可以自行選擇哪幾個要變更。//">http://download.fedoraproject.org/pub/fedora/，將其改為參考台灣鏡像站http://opensource.nchn.org.tw/fedora，下圖紅色框框部分包含原來的套件來源(已註解掉，將不會再執行)，以及修改至台灣鏡像站的網址。Fedora有分很多模組，用戶可以自行選擇哪幾個要變更。//</a></p>
<pre><code>[fedora]]([fedora)
baseurl=http://opensource.nchc.org.tw/fedora/linux/releases/$releasever/Everything/$basearch/os/
#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=fedora-$releasever&amp;arch=$basearch
[fedora-debuginfo]]([fedora-debuginfo)
baseurl=http://opensource.nchc.org.tw/fedora/linux/releases/$releasever/Everything/$basearch/debug/
#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=fedora-debug-$releasever&amp;arch=$basearch
[fedora-source]]([fedora-source)
baseurl=http://opensource.nchc.org.tw/fedora/linux/releases/$releasever/Everything/source/SRPMS/
#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=fedora-source-$releasever&amp;arch=$basearch</code></pre>
<p>修改完後儲存即可。</p>
<p><img src='images/Fedora+mirror+site-fevifedora.jpg' width='650' align='center'/></p>
<ul>
<li>fedora-updates.repo</li>
</ul>
<pre><code># vi /etc/yum.repos.d/fedora-updates.repo</code></pre>
<p>原來的套件庫參考網站為<a href="http://download.fedoraproject.org/pub/fedora/，將其改為參考台灣鏡像站http://opensource.nchn.org.tw/fedora，下圖紅色框框部分包含原來的套件來源(已註解掉，將不會再執行)，以及修改至台灣鏡像站的網址。Fedora有分很多模組，用戶可以自行選擇哪幾個要變更。">http://download.fedoraproject.org/pub/fedora/，將其改為參考台灣鏡像站http://opensource.nchn.org.tw/fedora，下圖紅色框框部分包含原來的套件來源(已註解掉，將不會再執行)，以及修改至台灣鏡像站的網址。Fedora有分很多模組，用戶可以自行選擇哪幾個要變更。</a></p>
<pre><code>[updates]]([updates)
baseurl=http://opensource.nchc.org.tw/fedora/linux/updates/$releasever/$basearch/
#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=updates-released-f$releasever&amp;arch=$basearch
[updates-debuginfo]]([updates-debuginfo)
baseurl=http://opensource.nchc.org.tw/fedora/linux/updates/$releasever/$basearch/debug/
#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=updates-released-debug-f$releasever&amp;arch=$basearch
[updates-source]]([updates-source)
baseurl=http://opensource.nchc.org.tw/fedora/linux/updates/$releasever/SRPMS/
#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=updates-released-source-f$releasever&amp;arch=$basearch</code></pre>
<p>修改完後儲存即可。</p>
<p><img src='images/Fedora+mirror+site-fevifedora-up.jpg' width='650' align='center'/></p>
<ul>
<li>fedora-updates-testing.repo</li>
</ul>
<pre><code>#vi /etc/yum.repos.d/fedora-updates-testing.repo</code></pre>
<p>原來的套件庫參考網站為<a href="http://download.fedoraproject.org/pub/fedora/，將其改為參考台灣鏡像站http://opensource.nchn.org.tw/fedora，下圖紅色框框部分包含原來的套件來源(已註解掉，將不會再執行)，以及修改至台灣鏡像站的網址。Fedora有分很多模組，用戶可以自行選擇哪幾個要變更。">http://download.fedoraproject.org/pub/fedora/，將其改為參考台灣鏡像站http://opensource.nchn.org.tw/fedora，下圖紅色框框部分包含原來的套件來源(已註解掉，將不會再執行)，以及修改至台灣鏡像站的網址。Fedora有分很多模組，用戶可以自行選擇哪幾個要變更。</a></p>
<pre><code>[updates-testing]]([updates-testing)
baseurl=http://opensource.nchc.org.tw/fedora/linux/updates/testing/$releasever/$basearch/
#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=updates-testing-f$releasever&amp;arch=$basearch
[updates-testing-debuginfo]]([updates-testing-debuginfo)
baseurl=http://opensource.nchc.org.tw/fedora/linux/updates/testing/$releasever/$basearch/debug/
#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=updates-testing-debug-f$releasever&amp;arch=$basearch
[updates-testing-source]]([updates-testing-source)
baseurl=http://opensource.nchc.org.tw/fedora/linux/updates/testing/$releasever/SRPMS/
#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=updates-testing-source-f$releasever&amp;arch=$basearch</code></pre>
<p>修改完後儲存即可。</p>
<p><img src='images/Fedora+mirror+site-fevifedora-up-test.jpg' width='650' align='center'/></p>
<p>請執行更改後的檔案，並確認是否更新，執行指令及畫面如下<br>*  清除yum暫存</p>
<pre><code>#yum clean all</code></pre>
<p><img src='images/Fedora+mirror+site-feclean.jpg' width='650' align='center'/></p>
<ul>
<li>列出有更新的檔案</li>
</ul>
<pre><code>#yum list</code></pre>
<p><img src='images/Fedora+mirror+site-felist.jpg' width='650' align='center'/></p>
<ul>
<li>執行更新</li>
</ul>
<pre><code>#yum update</code></pre>
<p><img src='images/Fedora+mirror+site-feupdate.jpg' width='650' align='center'/></p>
<ul>
<li>找到您更新過的路徑</li>
</ul>
<pre><code>#yum repolist –v</code></pre>
<p><img src='images/Fedora+mirror+site-ferepolist.jpg' width='650' align='center'/></p>
<h1>更多Fedora mirror site list</h1>
<ul>
<li>Fedora全球映射站</li>
</ul>
<p><a href="http://mirrors.fedoraproject.org/publiclist/">http://mirrors.fedoraproject.org/publiclist/</a></p>
<ul>
<li>台灣鏡像站推薦使用</li>
</ul>
<p><a href="http://opensource.nchc.org.tw/fedora/">http://opensource.nchc.org.tw/fedora/</a></p>
<p><a href="http://free.nchc.org.tw/fedora/linux/">http://free.nchc.org.tw/fedora/linux/</a></p>
<p><a href="http://ftp.twaren.net/Linux/Fedora/linux/">http://ftp.twaren.net/Linux/Fedora/linux/</a></p>
<p><a href="http://opensource.nchc.org.tw/fedora/linux/">http://opensource.nchc.org.tw/fedora/linux/</a></p>
<hr>
<h1>安裝非預載套件</h1>
<p>使用yum指令安裝Fedora套件，相關指令如下:</p>
<p>先查詢可安裝的套件</p>
<pre><code>#yum list</code></pre>
<p><img src='images/Fedora+mirror+site-fe-list.png' width='650' align='center'/></p>
<p>若找不到您需要的套件也可透過下面的指令來搜尋</p>
<pre><code>#yum search [套件名稱/關鍵字]](#yum search [套件名稱/關鍵字)</code></pre>
<p><img src='images/Fedora+mirror+site-fe-search.jpg' width='650' align='center'/></p>
<p>再執行安裝，指令如下</p>
<pre><code>#yum install [套件名稱]](#yum install [套件名稱)</code></pre>
<p><img src='images/Fedora+mirror+site-fe-install.jpg' width='650' align='center'/></p>
<p>若想移除套件，指令如下</p>
<pre><code>#yum remove [套件名稱]](#yum remove [套件名稱)</code></pre>
<p><img src='images/Fedora+mirror+site-fe-remove.jpg' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="File+Upload+Tutorial%28FileZilla%29.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=File+Upload+Tutorial%28FileZilla%29.md">File+Upload+Tutorial%28FileZilla%29.md</a></h1><br/><h1>檔案上傳教學(FileZilla)</h1>
<p>影片:<a href="http://www.youtube.com/watch?v=m_CBesKRE6s">MiCloud 使用 FileZilla 配合 SSH-Key(.ppk) 上傳與下載檔案</a></p>
<p><div align="center"><br>[{Flash src=&#39;<a href="http://www.youtube.com/v/m_CBesKRE6s&amp;hd=1">http://www.youtube.com/v/m_CBesKRE6s&amp;hd=1</a>&#39; controls= &#39;false&#39; play=&#39;false&#39; width=640 height=480 }]<br></div></p>
<h1>使用 FileZilla 配合 SSH-Key(.ppk) 上傳與下載檔案</h1>
<h1>加入 SSH-Key (紅色框框與黑色箭頭)</h1>
<p>開啟 FileZilla 後,於 <strong>編輯(E)</strong> 內點選 <strong>設定(S)...</strong></p>
<p>於左方欄位選擇 <strong>SFTP</strong> ,點選 <strong>加入金鑰檔案(A)...</strong></p>
<p>選擇您的 Private Key 加入,完成後點選 <strong>確認</strong> .</p>
<h1>輸入相關設定(黃色框框)</h1>
<p>主機(H):輸入您的主機IP</p>
<p>使用者名稱(U):root   (root為MiCloud的預設帳號)</p>
<p>密碼(W):空白即可</p>
<p>連接阜(P):22   (22為MiCloud的預設SSH連接阜)</p>
<p><img src='images/File+Upload+Tutorial-FileZilla-fz.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="File+Upload+Tutorial%28Linux+or+Unix%29.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=File+Upload+Tutorial%28Linux+or+Unix%29.md">File+Upload+Tutorial%28Linux+or+Unix%29.md</a></h1><br/><h1>Linux/Unix Like 檔案傳輸</h1>
<p>使用 openssh client，請帶參數 -i 來使用 private ssh key。</p>
<p>上傳：</p>
<p><code>scp -i id_rsa /home/Test/upload.txt root@211.123.123.123:/home/Test_2</code></p>
<p><img src='images/File+Upload+Tutorial-Linux+or+Unix-l4.png' width='720' align='center'/><br>下載：</p>
<p><code>scp -i id_rsa root@211.123.123.123:/home/Test_2/download.txt /home/Test</code></p>
<p><img src='images/File+Upload+Tutorial-Linux+or+Unix-l3.png' width='720' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="File+Upload+Tutorial%28Linux+to+Windows%29.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=File+Upload+Tutorial%28Linux+to+Windows%29.md">File+Upload+Tutorial%28Linux+to+Windows%29.md</a></h1><br/><h1>檔案上傳與下載教學(Linux至Windows)</h1>
<p>要從MiCloud Windows Server上進行軟體或檔案的上下載有許多方式，在此建議您使用網路芳鄰方式來進行檔案傳輸。</p>
<p>下面介紹相關設定方式：</p>
<h1>遠端登入Windows Server 2008 設定資料夾分享</h1>
<ol>
<li>新增資料夾並加以命名</li>
</ol>
<p><img src='images/File+Upload+Tutorial-Linux+to+Windows-z1.png' width='450' align='center'/></p>
<ol>
<li>在您要開啟共用的資料夾按下滑鼠右鍵選擇內容,並點選上方列表切換至共用頁面</li>
</ol>
<p><img src='images/File+Upload+Tutorial-Linux+to+Windows-p+-3.png' width='500' align='center'/><br>3. 點選&quot;進階共用(D)&quot;</p>
<p><img src='images/File+Upload+Tutorial-Linux+to+Windows-p+-4.png' width='500' align='center'/><br>4. 勾選共用資料夾,點選完後可於下方點選&quot;權限（P）&quot;,進入選擇您想給他人登入使用的權限</p>
<p><img src='images/File+Upload+Tutorial-Linux+to+Windows-p+-5.png' width='500' align='center'/><br><img src='images/File+Upload+Tutorial-Linux+to+Windows-p6.png' width='500' align='center'/></p>
<h1>在Linux系統下，上傳與下載檔案</h1>
<ol>
<li><p>先將視窗點選到桌面，於左上角點選 File -&gt; Connect to Server...<br><img src='images/File+Upload+Tutorial-Linux+to+Windows-l1.png' width='500' align='center'/></p>
</li>
<li><p>輸入相關資訊</p>
</li>
</ol>
<ul>
<li>Server:輸入您將上傳或下載的機器的ip</li>
<li>Domain name:輸入micloud.tw</li>
<li>User name:輸入您的帳號</li>
<li>Password:輸入您的密碼<br><img src='images/File+Upload+Tutorial-Linux+to+Windows-l2.png' width='500' align='center'/></li>
</ul>
<ol>
<li>進入後便可看到您共用的資料夾</li>
</ol>
<p><img src='images/File+Upload+Tutorial-Linux+to+Windows-l3.png' width='500' align='center'/></p>
<ol>
<li>若您要進一步上傳或下載檔案,需再次驗證您要登入的角色 , 然後您就能開始上傳與下載檔案<br><img src='images/File+Upload+Tutorial-Linux+to+Windows-l4.png' width='500' align='center'/><br><img src='images/File+Upload+Tutorial-Linux+to+Windows-l5.png' width='500' align='center'/></li>
</ol>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="File+Upload+Tutorial%28MacOS%29.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=File+Upload+Tutorial%28MacOS%29.md">File+Upload+Tutorial%28MacOS%29.md</a></h1><br/><h1>Mac OS 檔案傳輸</h1>
<p>使用 openssh client，請帶參數 -i 來使用 private ssh key。</p>
<p>上傳：</p>
<p><code>scp -i id_rsa ./MiCRM.tgz root@211.123.123.123:/root/</code></p>
<p><img src='images/File+Upload+Tutorial-MacOS-l2.png' width='650' align='center'/><br>下載：</p>
<p><code>scp -i id_rsa root@211.123.123.123:/tmp/MiCRM.tgz .</code></p>
<p><img src='images/File+Upload+Tutorial-MacOS-l1.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="File+Upload+Tutorial%28PSCP%29.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=File+Upload+Tutorial%28PSCP%29.md">File+Upload+Tutorial%28PSCP%29.md</a></h1><br/><h1>檔案上傳教學(指令)</h1>
<p>影片:<a href="http://www.youtube.com/watch?v=Ha17-BbePI4">MiCloud 使用 PSCP 配合 SSH-Key(.ppk) 上傳與下載檔案</a></p>
<p><div align="center"><br>[{Flash src=&#39;<a href="http://www.youtube.com/v/Ha17-BbePI4&amp;hd=1">http://www.youtube.com/v/Ha17-BbePI4&amp;hd=1</a>&#39; controls= &#39;false&#39; play=&#39;false&#39; width=640 height=480 }]<br></div></p>
<h1>使用 PSCP 配合 SSH-Key(.ppk) 上傳與下載檔案</h1>
<h1>設定環境變數</h1>
<ul>
<li>選擇一個資料夾放置 Putty 相關檔案(putty.exe,pscp.exe...)</li>
</ul>
<p>本範例放在 <strong>C:<br>putty</strong> 資料夾內</p>
<p><img src='images/File+Upload+Tutorial-PSCP-a.png' width='600' align='center'/><br>*  於我的電腦空白處按右鍵,選擇 <strong>內容</strong></p>
<p><img src='images/File+Upload+Tutorial-PSCP-a1.png' width='600' align='center'/><br>*  於內容之上方表單選擇 <strong>進階</strong> ,於下方點選 <strong>環境變數(N)</strong></p>
<p><img src='images/File+Upload+Tutorial-PSCP-a2.png' width='400' align='center'/><br>*  於下方 <strong>系統變數(S)</strong> 中下拉,點選變數 <strong>Path</strong> , 使用編輯(I)</p>
<p>於變數值最後加上<strong>分號(;)</strong>接著加上您putty所在資料夾的路徑</p>
<p>本範例則是加上 <strong>;C:<br>putty</strong><br><img src='images/File+Upload+Tutorial-PSCP-a3.png' width='400' align='center'/><br><em>  按下 <strong>開始</strong> -&gt; <strong>執行(R)</strong> -&gt; 輸入 <strong>cmd</strong> -&gt; 按下 <strong>確定</strong> 後便會開啟命令提示字元<br><img src='images/File+Upload+Tutorial-PSCP-a4.png' width='400' align='center'/>
</em>  在命令提示字元中輸入 <strong>pscp</strong> 測試環境變數之設定是否成功<br><img src='images/File+Upload+Tutorial-PSCP-a5.png' width='650' align='center'/></p>
<h1>Putty 連線設定</h1>
<p>左鍵雙擊下載之putty.exe，下圖為putty執行畫面：</p>
<p>請於<strong>Host Name (or IP address)</strong>內輸入您機器的IP,<br><strong>Port</strong> 則是輸入 <strong>22</strong> (22為MiCloud的預設SSH連接阜)</p>
<p>下方的 <strong>Saved Sessions</strong> 則是給您下次使用時能夠辨別這是哪一台機器用,所以能可以以您希望的名字命名,也可以使用當台機器的IP作為命名.</p>
<p><img src='images/File+Upload+Tutorial-PSCP-b1.png' width='500' align='center'/><br>輸入完成後請於左邊的Category表單中點選 <strong>Connection</strong> -&gt; <strong>SSH</strong> -&gt; <strong>Auth</strong> 內(如下圖)</p>
<p>點選 <strong>Browse...</strong> 後選擇您的private key加入</p>
<p><img src='images/File+Upload+Tutorial-PSCP-b2.png' width='500' align='center'/></p>
<p>為確保您使用Putty時不會出現中文亂碼,您可於左邊的Category表單中點選 <strong>Window</strong> -&gt; <strong>Translation</strong></p>
<p>於右方 <strong>Remote Character set:</strong> 的下拉式選單中選擇 <strong>UTF-8</strong></p>
<p><img src='images/File+Upload+Tutorial-PSCP-b4.png' width='500' align='center'/></p>
<p>為了下次能夠方便使用,請於左邊的Category表單中點選<strong>Session</strong></p>
<p>回到Session後,點選右方的Save</p>
<p>這樣下次要連線這台機器時你就不用特別再去設定,只需要於左方Saved Sessions中左鍵雙擊你存下來的那個名子即可.</p>
<p><img src='images/File+Upload+Tutorial-PSCP-b3.png' width='500' align='center'/></p>
<p>進入Putty後,他會要求你輸入帳號(Login as:),請輸入root</p>
<p><font color="red">(註：連線時，請使用root登入，可不用輸入密碼：若使用預設帳號jill登入，則請參照Customer Portal上Credential設定。)</font><br><img src='images/File+Upload+Tutorial-PSCP-b6.png' width='500' align='center'/><br><img src='images/File+Upload+Tutorial-PSCP-b5.png' width='500' align='center'/></p>
<h1>PSCP 指令介紹</h1>
<p>於MS-DOS 命令的視窗中輸入指令即可上傳與下載檔案<br>*  <font color="red">(1)  pscp  拷貝檔案(絕對路徑)  使用者(root)@電腦地址(IP):新檔名(絕對路徑)    - 從 MS Window 拷貝到 Linux 電腦</p>
<p></font><br>ex : 我要從我正在使用的電腦,放在C槽中的資料夾Windows_Test底下有一個upload.cpp的檔案,上傳到我在MiCloud申請的電腦(123.123.123.123)中,並放在/home/Linux_Test底下</p>
<p>所以我的指令會是 : pscp c:<br>Windows_Test<br>upload.cpp root@123.123.123.123:/home/Linux_Test<br>*  <font color="red">(2)  pscp  使用者(root)@電腦地址(IP):拷貝檔案(絕對路徑)  新檔名(絕對路徑)    - 從 Linux 拷貝到 MS Window 電腦</p>
<p></font><br>ex : 我要從我在MiCloud申請的電腦(123.123.123.123)中抓一個download.cpp的檔案,它放在/home/Linux_Test底下,並將它放到我的電腦C槽中的資料夾Windows_Test底下</p>
<p>所以我的指令會是 : pscp root@123.123.123.123:/home/Linux_Test/download.cpp c:<br>Windows_Test<br><img src='images/File+Upload+Tutorial-PSCP-a6.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="File+Upload+Tutorial%28Windows+to+Windows%29.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=File+Upload+Tutorial%28Windows+to+Windows%29.md">File+Upload+Tutorial%28Windows+to+Windows%29.md</a></h1><br/><h1>檔案上傳與下載教學(Windows至Windows)</h1>
<p>要從MiCloud Windows Server上進行軟體或檔案的上下載有許多方式，在此建議您使用網路芳鄰方式來進行檔案傳輸。</p>
<p>下面介紹相關設定方式：</p>
<h1>遠端登入Windows Server 2008 設定資料夾分享</h1>
<ol>
<li>新增資料夾並加以命名</li>
</ol>
<p><img src='images/File+Upload+Tutorial-Windows+to+Windows-z1.png' width='450' align='center'/></p>
<ol>
<li>在您要開啟共用的資料夾按下滑鼠右鍵選擇內容,並點選上方列表切換至共用頁面</li>
</ol>
<p><img src='images/File+Upload+Tutorial-Windows+to+Windows-p+-3.png' width='500' align='center'/><br>3. 點選&quot;進階共用(D)&quot;</p>
<p><img src='images/File+Upload+Tutorial-Windows+to+Windows-p+-4.png' width='500' align='center'/><br>4. 勾選共用資料夾,點選完後可於下方點選&quot;權限（P）&quot;,進入選擇您想給他人登入使用的權限</p>
<p><img src='images/File+Upload+Tutorial-Windows+to+Windows-p+-5.png' width='500' align='center'/><br><img src='images/File+Upload+Tutorial-Windows+to+Windows-p6.png' width='500' align='center'/></p>
<h1>在Windows系統下，上傳與下載檔案</h1>
<ol>
<li>開始 -&gt; 執行 , 再填入您的ip（ex：&quot;<strong>//IP</strong>&quot;）<br><img src='images/File+Upload+Tutorial-Windows+to+Windows-p+-6.png' width='500' align='center'/><br><img src='images/File+Upload+Tutorial-Windows+to+Windows-p+-7.png' width='500' align='center'/></li>
<li>輸入您的帳號密碼 ,就能開始上傳與下載檔案<br><img src='images/File+Upload+Tutorial-Windows+to+Windows-id.png' width='500' align='center'/></li>
</ol>
<p><img src='images/File+Upload+Tutorial-Windows+to+Windows-p+-8.png' width='500' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="File+Upload+Tutorial%28WinScp%29.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=File+Upload+Tutorial%28WinScp%29.md">File+Upload+Tutorial%28WinScp%29.md</a></h1><br/><h1>檔案上傳教學(WinScp)</h1>
<p>影片:<a href="http://www.youtube.com/watch?v=O-HDpdX7mD8">MiCloud 使用 WinScp 配合 SSH-Key(.ppk) 上傳與下載檔案</a></p>
<p><div align="center"><br>[{Flash src=&#39;<a href="http://www.youtube.com/v/O-HDpdX7mD8&amp;hd=1">http://www.youtube.com/v/O-HDpdX7mD8&amp;hd=1</a>&#39; controls= &#39;false&#39; play=&#39;false&#39; width=640 height=415 }]<br></div></p>
<h1>使用 WinScp 配合 SSH-Key(.ppk) 上傳與下載檔案</h1>
<h1>WinScp 使用 SSH-key(.ppk) 與 MiCloud 機器連線</h1>
<p><strong>輸入 Session 內之欄位(紅色框框)</strong></p>
<p>Host name : 輸入您的主機IP</p>
<p>Port number : 22   (22為MiCloud的預設SSH連接阜)</p>
<p>User name : root   (root為MiCloud的預設帳號)</p>
<p>Password : 空白即可</p>
<p>Private key file : 點選右方藍色框框,選擇您的 Private Key(.ppk)</p>
<p><img src='images/File+Upload+Tutorial-WinScp-winscp1.png' width='500' align='center'/><br>輸入完成後點選Login<br><img src='images/File+Upload+Tutorial-WinScp-winscp2.png' width='650' align='center'/></p>
<h1>WinScp 上傳與下載檔案</h1>
<p>成功登入後,左邊紅色框框為你本機的資料夾,右邊藍色框框為你連線過去的電腦資料夾.</p>
<p>如果要上傳A檔案,只需要從左邊紅色框框內找出那份檔案後,將其拖曳去右邊的資料夾即可.</p>
<p>同理,如果要下載A檔案至你本機電腦,只需在右邊藍色框框內找出您的檔案後,拖曳至左邊紅色框框內即可.<br><img src='images/File+Upload+Tutorial-WinScp-winscp3.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="File+Upload+Tutorial-FileZilla.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=File+Upload+Tutorial-FileZilla.md">File+Upload+Tutorial-FileZilla.md</a></h1><br/><h1>檔案上傳教學(FileZilla)</h1>
<p>影片:<a href="http://www.youtube.com/watch?v=m-CBesKRE6s">MiCloud 使用 FileZilla 配合 SSH-Key(.ppk) 上傳與下載檔案</a></p>
<p><div align="center"></p>
<p><embed width="420" height="345" src="http://www.youtube.com/v/m_CBesKRE6s&hd=1" type="application/x-shockwave-flash"></embed><br></div></p>
<h1>使用 FileZilla 配合 SSH-Key(.ppk) 上傳與下載檔案</h1>
<h1>加入 SSH-Key (紅色框框與黑色箭頭)</h1>
<p>開啟 FileZilla 後,於 <strong>編輯(E)</strong> 內點選 <strong>設定(S)...</strong></p>
<p>於左方欄位選擇 <strong>SFTP</strong> ,點選 <strong>加入金鑰檔案(A)...</strong></p>
<p>選擇您的 Private Key 加入,完成後點選 <strong>確認</strong> .</p>
<h1>輸入相關設定(黃色框框)</h1>
<p>主機(H):輸入您的主機IP</p>
<p>使用者名稱(U):root   (root為MiCloud的預設帳號)</p>
<p>密碼(W):空白即可</p>
<p>連接阜(P):22   (22為MiCloud的預設SSH連接阜)</p>
<p><img src='images/File+Upload+Tutorial-FileZilla-fz.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="File+Upload+Tutorial-Linux+or+Unix.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=File+Upload+Tutorial-Linux+or+Unix.md">File+Upload+Tutorial-Linux+or+Unix.md</a></h1><br/><h1>Linux/Unix Like 檔案傳輸</h1>
<p>使用 openssh client，請帶參數 -i 來使用 private ssh key。</p>
<p>上傳：</p>
<p><code>scp -i id_rsa /home/Test/upload.txt root@211.123.123.123:/home/Test_2</code></p>
<p><img src='images/File+Upload+Tutorial-Linux+or+Unix-l4.png' width='720' align='center'/><br>下載：</p>
<p><code>scp -i id_rsa root@211.123.123.123:/home/Test_2/download.txt /home/Test</code></p>
<p><img src='images/File+Upload+Tutorial-Linux+or+Unix-l3.png' width='720' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="File+Upload+Tutorial-Linux+to+Windows.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=File+Upload+Tutorial-Linux+to+Windows.md">File+Upload+Tutorial-Linux+to+Windows.md</a></h1><br/><h1>檔案上傳與下載教學(Linux至Windows)</h1>
<p>要從MiCloud Windows Server上進行軟體或檔案的上下載有許多方式，在此建議您使用網路芳鄰方式來進行檔案傳輸。</p>
<p>下面介紹相關設定方式：</p>
<h1>遠端登入Windows Server 2008 設定資料夾分享</h1>
<ol>
<li>新增資料夾並加以命名</li>
</ol>
<p><img src='images/File+Upload+Tutorial-Linux+to+Windows-z1.png' width='450' align='center'/></p>
<ol>
<li>在您要開啟共用的資料夾按下滑鼠右鍵選擇內容,並點選上方列表切換至共用頁面</li>
</ol>
<p><img src='images/File+Upload+Tutorial-Linux+to+Windows-p+-3.png' width='500' align='center'/><br>3. 點選&quot;進階共用(D)&quot;</p>
<p><img src='images/File+Upload+Tutorial-Linux+to+Windows-p+-4.png' width='500' align='center'/><br>4. 勾選共用資料夾,點選完後可於下方點選&quot;權限（P）&quot;,進入選擇您想給他人登入使用的權限</p>
<p><img src='images/File+Upload+Tutorial-Linux+to+Windows-p+-5.png' width='500' align='center'/><br><img src='images/File+Upload+Tutorial-Linux+to+Windows-p6.png' width='500' align='center'/></p>
<h1>在Linux系統下，上傳與下載檔案</h1>
<ol>
<li><p>先將視窗點選到桌面，於左上角點選 File -&gt; Connect to Server...<br><img src='images/File+Upload+Tutorial-Linux+to+Windows-l1.png' width='500' align='center'/></p>
</li>
<li><p>輸入相關資訊</p>
</li>
</ol>
<ul>
<li>Server:輸入您將上傳或下載的機器的ip</li>
<li>Domain name:輸入micloud.tw</li>
<li>User name:輸入您的帳號</li>
<li>Password:輸入您的密碼<br><img src='images/File+Upload+Tutorial-Linux+to+Windows-l2.png' width='500' align='center'/></li>
</ul>
<ol>
<li>進入後便可看到您共用的資料夾</li>
</ol>
<p><img src='images/File+Upload+Tutorial-Linux+to+Windows-l3.png' width='500' align='center'/></p>
<ol>
<li>若您要進一步上傳或下載檔案,需再次驗證您要登入的角色 , 然後您就能開始上傳與下載檔案<br><img src='images/File+Upload+Tutorial-Linux+to+Windows-l4.png' width='500' align='center'/><br><img src='images/File+Upload+Tutorial-Linux+to+Windows-l5.png' width='500' align='center'/></li>
</ol>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="File+Upload+Tutorial-MacOS.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=File+Upload+Tutorial-MacOS.md">File+Upload+Tutorial-MacOS.md</a></h1><br/><h1>Mac OS 檔案傳輸</h1>
<p>使用 openssh client，請帶參數 -i 來使用 private ssh key。</p>
<p>上傳：</p>
<p><code>scp -i id_rsa ./MiCRM.tgz root@211.123.123.123:/root/</code></p>
<p><img src='images/File+Upload+Tutorial-MacOS-l2.png' width='650' align='center'/><br>下載：</p>
<p><code>scp -i id_rsa root@211.123.123.123:/tmp/MiCRM.tgz .</code></p>
<p><img src='images/File+Upload+Tutorial-MacOS-l1.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="File+Upload+Tutorial-PSCP.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=File+Upload+Tutorial-PSCP.md">File+Upload+Tutorial-PSCP.md</a></h1><br/><h1>檔案上傳教學(指令)</h1>
<p>影片:<a href="http://www.youtube.com/watch?v=Ha17-BbePI4">MiCloud 使用 PSCP 配合 SSH-Key(.ppk) 上傳與下載檔案</a></p>
<p><div align="center"></p>
<p><embed width="420" height="345" src="http://www.youtube.com/v/Ha17-BbePI4&hd=1" type="application/x-shockwave-flash"></embed><br></div></p>
<h1>使用 PSCP 配合 SSH-Key(.ppk) 上傳與下載檔案</h1>
<h1>設定環境變數</h1>
<ul>
<li>選擇一個資料夾放置 Putty 相關檔案(putty.exe,pscp.exe...)</li>
</ul>
<p>本範例放在 <strong>C:<br>putty</strong> 資料夾內</p>
<p><img src='images/File+Upload+Tutorial-PSCP-a.png' width='600' align='center'/><br>*  於我的電腦空白處按右鍵,選擇 <strong>內容</strong></p>
<p><img src='images/File+Upload+Tutorial-PSCP-a1.png' width='600' align='center'/><br>*  於內容之上方表單選擇 <strong>進階</strong> ,於下方點選 <strong>環境變數(N)</strong></p>
<p><img src='images/File+Upload+Tutorial-PSCP-a2.png' width='400' align='center'/><br>*  於下方 <strong>系統變數(S)</strong> 中下拉,點選變數 <strong>Path</strong> , 使用編輯(I)</p>
<p>於變數值最後加上<strong>分號(;)</strong>接著加上您putty所在資料夾的路徑</p>
<p>本範例則是加上 <strong>;C:<br>putty</strong><br><img src='images/File+Upload+Tutorial-PSCP-a3.png' width='400' align='center'/><br><em>  按下 <strong>開始</strong> -&gt; <strong>執行(R)</strong> -&gt; 輸入 <strong>cmd</strong> -&gt; 按下 <strong>確定</strong> 後便會開啟命令提示字元<br><img src='images/File+Upload+Tutorial-PSCP-a4.png' width='400' align='center'/>
</em>  在命令提示字元中輸入 <strong>pscp</strong> 測試環境變數之設定是否成功<br><img src='images/File+Upload+Tutorial-PSCP-a5.png' width='650' align='center'/></p>
<h1>Putty 連線設定</h1>
<p>左鍵雙擊下載之putty.exe，下圖為putty執行畫面：</p>
<p>請於<strong>Host Name (or IP address)</strong>內輸入您機器的IP,<br><strong>Port</strong> 則是輸入 <strong>22</strong> (22為MiCloud的預設SSH連接阜)</p>
<p>下方的 <strong>Saved Sessions</strong> 則是給您下次使用時能夠辨別這是哪一台機器用,所以能可以以您希望的名字命名,也可以使用當台機器的IP作為命名.</p>
<p><img src='images/File+Upload+Tutorial-PSCP-b1.png' width='500' align='center'/><br>輸入完成後請於左邊的Category表單中點選 <strong>Connection</strong> -&gt; <strong>SSH</strong> -&gt; <strong>Auth</strong> 內(如下圖)</p>
<p>點選 <strong>Browse...</strong> 後選擇您的private key加入</p>
<p><img src='images/File+Upload+Tutorial-PSCP-b2.png' width='500' align='center'/></p>
<p>為確保您使用Putty時不會出現中文亂碼,您可於左邊的Category表單中點選 <strong>Window</strong> -&gt; <strong>Translation</strong></p>
<p>於右方 <strong>Remote Character set:</strong> 的下拉式選單中選擇 <strong>UTF-8</strong></p>
<p><img src='images/File+Upload+Tutorial-PSCP-b4.png' width='500' align='center'/></p>
<p>為了下次能夠方便使用,請於左邊的Category表單中點選<strong>Session</strong></p>
<p>回到Session後,點選右方的Save</p>
<p>這樣下次要連線這台機器時你就不用特別再去設定,只需要於左方Saved Sessions中左鍵雙擊你存下來的那個名子即可.</p>
<p><img src='images/File+Upload+Tutorial-PSCP-b3.png' width='500' align='center'/></p>
<p>進入Putty後,他會要求你輸入帳號(Login as:),請輸入root</p>
<p><font color="red">(註：連線時，請使用root登入，可不用輸入密碼：若使用預設帳號jill登入，則請參照Customer Portal上Credential設定。)</font><br><img src='images/File+Upload+Tutorial-PSCP-b6.png' width='500' align='center'/><br><img src='images/File+Upload+Tutorial-PSCP-b5.png' width='500' align='center'/></p>
<h1>PSCP 指令介紹</h1>
<p>於MS-DOS 命令的視窗中輸入指令即可上傳與下載檔案<br>*  <font color="red">(1)  pscp  拷貝檔案(絕對路徑)  使用者(root)@電腦地址(IP):新檔名(絕對路徑)    - 從 MS Window 拷貝到 Linux 電腦</p>
<p></font><br>ex : 我要從我正在使用的電腦,放在C槽中的資料夾Windows_Test底下有一個upload.cpp的檔案,上傳到我在MiCloud申請的電腦(123.123.123.123)中,並放在/home/Linux_Test底下</p>
<p>所以我的指令會是 : pscp c:<br>Windows_Test<br>upload.cpp root@123.123.123.123:/home/Linux_Test<br>*  <font color="red">(2)  pscp  使用者(root)@電腦地址(IP):拷貝檔案(絕對路徑)  新檔名(絕對路徑)    - 從 Linux 拷貝到 MS Window 電腦</p>
<p></font><br>ex : 我要從我在MiCloud申請的電腦(123.123.123.123)中抓一個download.cpp的檔案,它放在/home/Linux_Test底下,並將它放到我的電腦C槽中的資料夾Windows_Test底下</p>
<p>所以我的指令會是 : pscp root@123.123.123.123:/home/Linux_Test/download.cpp c:<br>Windows_Test<br><img src='images/File+Upload+Tutorial-PSCP-a6.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="File+Upload+Tutorial-Windows+to+Windows.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=File+Upload+Tutorial-Windows+to+Windows.md">File+Upload+Tutorial-Windows+to+Windows.md</a></h1><br/><h1>檔案上傳與下載教學(Windows至Windows)</h1>
<p>要從MiCloud Windows Server上進行軟體或檔案的上下載有許多方式，在此建議您使用網路芳鄰方式來進行檔案傳輸。</p>
<p>下面介紹相關設定方式：</p>
<h1>遠端登入Windows Server 2008 設定資料夾分享</h1>
<ol>
<li>新增資料夾並加以命名</li>
</ol>
<p><img src='images/File+Upload+Tutorial-Windows+to+Windows-z1.png' width='450' align='center'/></p>
<ol>
<li>在您要開啟共用的資料夾按下滑鼠右鍵選擇內容,並點選上方列表切換至共用頁面</li>
</ol>
<p><img src='images/File+Upload+Tutorial-Windows+to+Windows-p+-3.png' width='500' align='center'/><br>3. 點選&quot;進階共用(D)&quot;</p>
<p><img src='images/File+Upload+Tutorial-Windows+to+Windows-p+-4.png' width='500' align='center'/><br>4. 勾選共用資料夾,點選完後可於下方點選&quot;權限（P）&quot;,進入選擇您想給他人登入使用的權限</p>
<p><img src='images/File+Upload+Tutorial-Windows+to+Windows-p+-5.png' width='500' align='center'/><br><img src='images/File+Upload+Tutorial-Windows+to+Windows-p6.png' width='500' align='center'/></p>
<h1>在Windows系統下，上傳與下載檔案</h1>
<ol>
<li>開始 -&gt; 執行 , 再填入您的ip（ex：&quot;<strong>//IP</strong>&quot;）<br><img src='images/File+Upload+Tutorial-Windows+to+Windows-p+-6.png' width='500' align='center'/><br><img src='images/File+Upload+Tutorial-Windows+to+Windows-p+-7.png' width='500' align='center'/></li>
<li>輸入您的帳號密碼 ,就能開始上傳與下載檔案<br><img src='images/File+Upload+Tutorial-Windows+to+Windows-id.png' width='500' align='center'/></li>
</ol>
<p><img src='images/File+Upload+Tutorial-Windows+to+Windows-p+-8.png' width='500' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="File+Upload+Tutorial-WinScp.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=File+Upload+Tutorial-WinScp.md">File+Upload+Tutorial-WinScp.md</a></h1><br/><h1>檔案上傳教學(WinScp)</h1>
<p>影片:<a href="http://www.youtube.com/watch?v=O-HDpdX7mD8">MiCloud 使用 WinScp 配合 SSH-Key(.ppk) 上傳與下載檔案</a></p>
<p><div align="center"></p>
<p><embed width="420" height="345" src="http://www.youtube.com/v/O-HDpdX7mD8&hd=1" type="application/x-shockwave-flash"></embed><br></div></p>
<h1>使用 WinScp 配合 SSH-Key(.ppk) 上傳與下載檔案</h1>
<h1>WinScp 使用 SSH-key(.ppk) 與 MiCloud 機器連線</h1>
<p><strong>輸入 Session 內之欄位(紅色框框)</strong></p>
<p>Host name : 輸入您的主機IP</p>
<p>Port number : 22   (22為MiCloud的預設SSH連接阜)</p>
<p>User name : root   (root為MiCloud的預設帳號)</p>
<p>Password : 空白即可</p>
<p>Private key file : 點選右方藍色框框,選擇您的 Private Key(.ppk)</p>
<p><img src='images/File+Upload+Tutorial-WinScp-winscp1.png' width='500' align='center'/><br>輸入完成後點選Login<br><img src='images/File+Upload+Tutorial-WinScp-winscp2.png' width='650' align='center'/></p>
<h1>WinScp 上傳與下載檔案</h1>
<p>成功登入後,左邊紅色框框為你本機的資料夾,右邊藍色框框為你連線過去的電腦資料夾.</p>
<p>如果要上傳A檔案,只需要從左邊紅色框框內找出那份檔案後,將其拖曳去右邊的資料夾即可.</p>
<p>同理,如果要下載A檔案至你本機電腦,只需在右邊藍色框框內找出您的檔案後,拖曳至左邊紅色框框內即可.<br><img src='images/File+Upload+Tutorial-WinScp-winscp3.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Finding+Your+Way+Around+a+SmartMachine.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Finding+Your+Way+Around+a+SmartMachine.md">Finding+Your+Way+Around+a+SmartMachine.md</a></h1><br/><p>If you&#39;re coming to a SmartMachine from Linux, you may find that some things are a little different than what you are familiar with. The SmartOS has most of the GNU tools that you are accustomed to, just that they are not default tools. Your fingers&#39; muscle memory may find the differences a little unsettling at first, but rest assured that everything you&#39;re used to is still here. It&#39;s just in a different place, or it may have a different name.</p>
<h1>Where things are</h1>
<p>Most things are where you expect them to be. The following table lists the directories you&#39;ll find in your PATH variable.</p>
<p>||Directory     ||Description<br>|/opt/local/bin</p>
<p>/opt/local/sbin   |These directories contain the GNU tools as well as other tools installed on top of the standard system tools. When you install software with pkgsrc,</p>
<p>this is where it is installed by default. On other systems, this would be /usr/local/bin.<br>|/usr/xpg4/bin     |This directory contains the basic Unix tools such as rm, ln, etc<br>|/usr/bin</p>
<p>/usr/sbin     |These directories contain standard Unix tools.<br>|/opt/SUNWspro/bin |This directory, if it exists, is for the Sun C compiler. It&#39;s not normally installed.<br>Other directories you may be interested in are:</p>
<p>||Directory     ||Description<br>|/home     |User home directories.<br>|/home/admin     |Home directory for the admin user.<br>|/home/jill     |Home of the jill user (the website owner user).<br>|/home/jill/web/public     |This is where website files reside (the &#39;document root&#39;).<br>|/shared     |If you have purchased extra NFS storage, it will be mounted here.<br>|/var/adm     |System logs. Other logs, such as httpd logs, are in /var/log.<br>|/usr/local     |This is a symlink to /opt/local.</p>
<h1>Commands that work differently</h1>
<p>The things that make a SmartMachine different from other Unix-like systems generally fall in two categories:</p>
<ul>
<li>commands that have different names on SmartMachines</li>
<li>things that are done differently on SmartMachines<br>For example, here are some common Linux commands that work differently.</li>
</ul>
<p>||Command     ||What&#39;s different on a Smart Machine<br>|df     |The default is to us the SmartOS version.  gdf may provide an output more familiar to Linux users.<br>|locate     |This is a GNU tool, so it has been renamed to glocate. Likewise, you would use gupdatedb to set up its database.<br>|lsof     |SmartMachines use a different collection of tools to examine processes. See Examining processes and memory later in this topic.<br>|ping     |Returns whether a host responds or not. Use ping -s to get the continuous response you&#39;re used to<br>|top    |top is available in /opt/local/bin, but prstat -Z provides more zone aware (and more accurate) information than top.<br>The <a href="http://bhami.com/rosetta.html">Rosetta Stone for Unix</a><br>You can find the GNU tools in /opt/local/bin and /opt/local/sbin.</p>
<p>The vmstat, mpstat, and psrinfo commands display processor and memory statistics for the physical machine. Their output is not generally useful to you as a SmartMachine operator.</p>
<p>Do we have a tip section? One thing that is really neat with SMF is that you can set it to email you when a service is halted or crashes.</p>
<p>Peter Yorke - we need a section on creating your own start-up scripts like svccfg import /opt/local/share/smf/manifest/startupscript.xml</p>
<h1>Installing Sofware</h1>
<p>There are two ways to install additional software on your SmartMachine:</p>
<ul>
<li>install it from a package</li>
<li>compile it from source<br><strong>Installing Software From a Package</strong></li>
</ul>
<p>SmartMachines have a package manager like Debian (apt) or Redhat (rpm,yum) called pkgsrc to manage the installation of additional software. Joyent maintains a package repository of packages that are compatible with SmartMachines. The pkgin tool is the easiest way to work with packages.</p>
<p>This table lists the common pkgin commands. You need to run the commands that install software or update the package database as root or with sudo.</p>
<p>||Command     ||Description<br>|pkgin up     |Brings pkgin&#39;s database up to date. It&#39;s a good idea to run this command |before installing new packages.<br>|pkgin ls     |Lists all the installed packages<br>|pkgin av     |Lists all of the available packages<br>|pkgin in     |Installs a package<br>|pkgin rm     |Removes a package<br>|pkgin se     |Searches for a package<br>|pkgin             |With no additional arugments, lists all of the available pkgin commands.<br>For example, to install tidy, a utility that cleans up HTML code, you would do this:</p>
<pre><code>sudo pkgin update
sudo pkgin in tidy</code></pre>
<p><strong>Compiling Software From Source</strong><br>If the software you want to use isn&#39;t available as a prebuilt package, you can compile it from source. Typically, you&#39;ll get a tarball that contains the software you want to install. After you unpack the tarball, the readme file will contain instructions for compiling the software.</p>
<p>For example, to install the lastest version of Ruby on your SmartMachine, you would use the following commands. Note that we&#39;re using the GNU versions of tar and make.</p>
<pre><code>1. wget ftp://ftp.ruby-lang.org//pub/ruby/1.9/ruby-1.9.2-p0.tar.gz
2. gtar xvzf ruby-1.9.2-p0.tar.gz
3. cd ruby-1.9.2-p0
4. ./configure
5. gmake
6. ls
7. sudo gmake install
8. ruby -v</code></pre>
<p>External Links<br>Some really good links that we have found that make the SmartOS more familiar.</p>
<p><a href="http://glennfawcett.wordpress.com/2011/01/03/solaris-eye-for-the-linux-guy-or-how-i-learned-to-stop-worrying-about-linux-and-love-solaris-part-1/">Solaris Eye for the Linux guy... or how I learned to stop worrying about Linux and Love Solaris (Part 1)</a></p>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Footer.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Footer.md">Footer.md</a></h1><br/><p>Copyright @ micloud.tw</p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Free+machine+%26+Connect+SSH.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Free+machine+%26+Connect+SSH.md">Free+machine+%26+Connect+SSH.md</a></h1><br/><h1>公測/免費主機金鑰設置與連線教學</h1>
<p>說明：本次公測主機為MiCloud 2XS型號主機，為小於一般市場提供之虛擬主機機型，提供一般網頁服務應用與開發使用，其中網路連線部分提供Public DNS，讓您用主機之專屬DNS連限，連線方式請參考下面說明：</p>
<p>您申請免費30天試用服務後，SmartOS/Linux主機連線必須透過SSH協定與SSH Key的認證，以確保您與您的伺服器之間的連線安全。</p>
<p>1.若您已設定ssh key則使用您原本的私鑰進行連線</p>
<p>2.<font color='blue'>若您尚未設定ssh key則系統會發送一組私鑰和公鑰給您,相關設定如下:</font></p>
<h1>Linux/MacOS主機</h1>
<p>如您為Linux或MacOS用戶，在登入平台後，選擇主機，檢視主機的細項畫面，您可以看到如下資訊：</p>
<p><img src='images/Free+machine+%26+Connect+SSH-dnsport.jpg' width='600' align='center'/></p>
<p>請直接使用下面指令連線：</p>
<pre><code>ssh root@your.domain.name -p ssh_port -i your_private_key</code></pre>
<p>ex:</p>
<pre><code>ex: ssh root@192-168-255-13.my.micloud.tw -p 65013 -i ~/.ssh/id_rsa</code></pre>
<h1>Windows主機(使用Putty工具連線範例)</h1>
<p>由於Putty採用特有格式的puk檔案來封裝SSH Key，因此必須透過Putty相關工具將MiCloud產出之Key File進行轉換，轉換動作如下：</p>
<p>(1)將信件中的私鑰下載至您的電腦中，如下圖:<br /><br>(2)於下列網址下載PuTTy、Pageant and PuTTYgen，該工具可以協助您進行SSH Key的建立與SSH的連線。</p>
<p>&nbsp;&nbsp;&nbsp;網址為:<a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html"><a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html</a> </a></p>
<p><img src='images/Free+machine+%26+Connect+SSH-putty.jpg' width='500' align='center'/></p>
<p>(3)執行puttygen.exe並點選Load，”檔案類型”選擇所有檔案，匯入您所下載的key</p>
<p><img src='images/Free+machine+%26+Connect+SSH-load.jpg' width='500' align='center'/></p>
<p><img src='images/Free+machine+%26+Connect+SSH-file.jpg' width='500' align='center'/></p>
<p>(4)匯入後會才會產生putty可執行的key，並將此金鑰儲存。</p>
<p><img src='images/Free+machine+%26+Connect+SSH-save.jpg' width='500' align='center'/></p>
<p><img src='images/Free+machine+%26+Connect+SSH-save2.jpg' width='500' align='center'/></p>
<p>(5)開啟pageant.exe執行後程式會在螢幕的右下角如下圖:</p>
<p><img src='images/Free+machine+%26+Connect+SSH-pageant.jpg' width='500' align='center'/></p>
<p>點開後按下Add key按鈕，將上面所儲存的key開啟。</p>
<p><img src='images/Free+machine+%26+Connect+SSH-addkey.jpg' width='500' align='center'/></p>
<p><img src='images/Free+machine+%26+Connect+SSH-addkey2.jpg' width='500' align='center'/></p>
<p>(6)新增完後請先登入平台選擇主機，檢視主機的細項畫面，再開啟putty.exe，hostname為DNS，設定完按下open按鈕，即可使用。</p>
<p><img src='images/Free+machine+%26+Connect+SSH-machine.jpg' width='600' align='center'/></p>
<p><img src='images/Free+machine+%26+Connect+SSH-dnsport1.jpg' width='600' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Free+machine+%26+Connect+Tutorial.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Free+machine+%26+Connect+Tutorial.md">Free+machine+%26+Connect+Tutorial.md</a></h1><br/><h1>主機金鑰設置與連線教學</h1>
<p>說明：本次公測主機為MiCloud 2XS型號主機，為小於一般市場提供之虛擬主機機型，提供一般網頁服務應用與開發使用，其中網路連線部分提供Public DNS，讓您用主機之專屬DNS連線，連線方式請參考下面說明：</p>
<p>您申請免費30天試用服務後，SmartOS/Linux主機連線必須透過SSH協定與SSH Key的認證，以確保您與您的伺服器之間的連線安全。</p>
<p>1.若您已設定ssh key則使用您原本的私鑰進行連線</p>
<p>2.<font color='blue'>若您尚未設定ssh key則系統會發送一組私鑰和公鑰給您,相關設定如下:</font></p>
<h1>Linux/MacOS主機</h1>
<p>如您為Linux或MacOS用戶，在登入平台後，選擇主機，點選下方紅色框框部分的任何一台主機，會進入主機的細項畫面，您可以看到如下資訊：</p>
<p><img src='images/Free+machine+%26+Connect+Tutorial-machine1.jpg' width='650' align='center'/></p>
<p><img src='images/Free+machine+%26+Connect+Tutorial-dnsport.jpg' width='650' align='center'/></p>
<p>請直接使用下面指令連線：</p>
<pre><code>ssh root@your.domain.name -p ssh_port -i your_private_key</code></pre>
<p>ex:</p>
<pre><code>ssh root@192-168-255-13.my.micloud.tw -p 65013 -i ~/.ssh/id_rsa</code></pre>
<h1>Windows主機(使用Putty工具連線範例)</h1>
<p>由於Putty採用特有格式的puk檔案來封裝SSH Key，因此必須透過Putty相關工具將MiCloud產出之Key File進行轉換，轉換動作如下：</p>
<p>(1)將信件中的私鑰下載至您的電腦中，如下圖。</p>
<p><img src='images/Free+machine+%26+Connect+Tutorial-key.png' width='500' align='center'/></p>
<p>(2)於下列網址下載PuTTy、Pageant and PuTTYgen，該工具可以協助您進行SSH Key的建立與SSH的連線。</p>
<p>&nbsp;&nbsp;&nbsp;網址為:<a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html"><a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html</a></a></p>
<p><img src='images/Free+machine+%26+Connect+Tutorial-putty.jpg' width='500' align='center'/></p>
<p>(3)執行puttygen.exe並點選Load，”檔案類型”選擇所有檔案，匯入您所下載的key</p>
<p><img src='images/Free+machine+%26+Connect+Tutorial-load.jpg' width='500' align='center'/></p>
<p><img src='images/Free+machine+%26+Connect+Tutorial-file.jpg' width='500' align='center'/></p>
<p>(4)匯入後會才會產生putty可執行的key，並將此金鑰儲存，即可關閉程式。</p>
<p><img src='images/Free+machine+%26+Connect+Tutorial-save.jpg' width='500' align='center'/></p>
<p><img src='images/Free+machine+%26+Connect+Tutorial-save2.jpg' width='500' align='center'/></p>
<p>(5)開啟pageant.exe執行後程式會在螢幕的右下角如下圖:</p>
<p><img src='images/Free+machine+%26+Connect+Tutorial-pageant.jpg' width='500' align='center'/></p>
<p>點開後按下Add key按鈕，將上面所儲存的key開啟。</p>
<p><img src='images/Free+machine+%26+Connect+Tutorial-addkey.jpg' width='500' align='center'/></p>
<p><img src='images/Free+machine+%26+Connect+Tutorial-addkey2.jpg' width='500' align='center'/></p>
<p>(6)新增完後請先登入平台選擇主機，檢視主機的細項畫面，再開啟putty.exe，hostname為DNS，設定完按下open按鈕，進入putty後輸入root即可使用。</p>
<p><img src='images/Free+machine+%26+Connect+Tutorial-machine.jpg' width='650' align='center'/></p>
<p><img src='images/Free+machine+%26+Connect+Tutorial-dnsport1.jpg' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Free+machine+&+Connect+SSH.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Free+machine+&+Connect+SSH.md">Free+machine+&+Connect+SSH.md</a></h1><br/><h1>公測/免費主機金鑰設置與連線教學</h1>
<p>說明：本次公測主機為MiCloud 2XS型號主機，為小於一般市場提供之虛擬主機機型，提供一般網頁服務應用與開發使用，其中網路連線部分提供Public DNS，讓您用主機之專屬DNS連限，連線方式請參考下面說明：</p>
<p>您申請免費30天試用服務後，SmartOS/Linux主機連線必須透過SSH協定與SSH Key的認證，以確保您與您的伺服器之間的連線安全。</p>
<p>1.若您已設定ssh key則使用您原本的私鑰進行連線</p>
<p>2.<font color='blue'>若您尚未設定ssh key則系統會發送一組私鑰和公鑰給您,相關設定如下:</font></p>
<h1>Linux/MacOS主機</h1>
<p>如您為Linux或MacOS用戶，在登入平台後，選擇主機，檢視主機的細項畫面，您可以看到如下資訊：</p>
<p><img src='images/Free+machine+&+Connect+SSH-dnsport.jpg' width='600' align='center'/></p>
<p>請直接使用下面指令連線：</p>
<pre><code>ssh root@your.domain.name -p ssh_port -i your_private_key</code></pre>
<p>ex:</p>
<pre><code>ex: ssh root@192-168-255-13.my.micloud.tw -p 65013 -i ~/.ssh/id_rsa</code></pre>
<h1>Windows主機(使用Putty工具連線範例)</h1>
<p>由於Putty採用特有格式的puk檔案來封裝SSH Key，因此必須透過Putty相關工具將MiCloud產出之Key File進行轉換，轉換動作如下：</p>
<p>(1)將信件中的私鑰下載至您的電腦中，如下圖:<br /><br>(2)於下列網址下載PuTTy、Pageant and PuTTYgen，該工具可以協助您進行SSH Key的建立與SSH的連線。</p>
<p>&nbsp;&nbsp;&nbsp;網址為:<a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html"><a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html</a> </a></p>
<p><img src='images/Free+machine+&+Connect+SSH-putty.jpg' width='500' align='center'/></p>
<p>(3)執行puttygen.exe並點選Load，”檔案類型”選擇所有檔案，匯入您所下載的key</p>
<p><img src='images/Free+machine+&+Connect+SSH-load.jpg' width='500' align='center'/></p>
<p><img src='images/Free+machine+&+Connect+SSH-file.jpg' width='500' align='center'/></p>
<p>(4)匯入後會才會產生putty可執行的key，並將此金鑰儲存。</p>
<p><img src='images/Free+machine+&+Connect+SSH-save.jpg' width='500' align='center'/></p>
<p><img src='images/Free+machine+&+Connect+SSH-save2.jpg' width='500' align='center'/></p>
<p>(5)開啟pageant.exe執行後程式會在螢幕的右下角如下圖:</p>
<p><img src='images/Free+machine+&+Connect+SSH-pageant.jpg' width='500' align='center'/></p>
<p>點開後按下Add key按鈕，將上面所儲存的key開啟。</p>
<p><img src='images/Free+machine+&+Connect+SSH-addkey.jpg' width='500' align='center'/></p>
<p><img src='images/Free+machine+&+Connect+SSH-addkey2.jpg' width='500' align='center'/></p>
<p>(6)新增完後請先登入平台選擇主機，檢視主機的細項畫面，再開啟putty.exe，hostname為DNS，設定完按下open按鈕，即可使用。</p>
<p><img src='images/Free+machine+&+Connect+SSH-machine.jpg' width='600' align='center'/></p>
<p><img src='images/Free+machine+&+Connect+SSH-dnsport1.jpg' width='600' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Free+machine+&+Connect+Tutorial.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Free+machine+&+Connect+Tutorial.md">Free+machine+&+Connect+Tutorial.md</a></h1><br/><h1>主機金鑰設置與連線教學</h1>
<p>說明：本次公測主機為MiCloud 2XS型號主機，為小於一般市場提供之虛擬主機機型，提供一般網頁服務應用與開發使用，其中網路連線部分提供Public DNS，讓您用主機之專屬DNS連線，連線方式請參考下面說明：</p>
<p>您申請免費30天試用服務後，SmartOS/Linux主機連線必須透過SSH協定與SSH Key的認證，以確保您與您的伺服器之間的連線安全。</p>
<p>1.若您已設定ssh key則使用您原本的私鑰進行連線</p>
<p>2.<font color='blue'>若您尚未設定ssh key則系統會發送一組私鑰和公鑰給您,相關設定如下:</font></p>
<h1>Linux/MacOS主機</h1>
<p>如您為Linux或MacOS用戶，在登入平台後，選擇主機，點選下方紅色框框部分的任何一台主機，會進入主機的細項畫面，您可以看到如下資訊：</p>
<p><img src='images/Free+machine+&+Connect+Tutorial-machine1.jpg' width='650' align='center'/></p>
<p><img src='images/Free+machine+&+Connect+Tutorial-dnsport.jpg' width='650' align='center'/></p>
<p>請直接使用下面指令連線：</p>
<pre><code>ssh root@your.domain.name -p ssh_port -i your_private_key</code></pre>
<p>ex:</p>
<pre><code>ssh root@192-168-255-13.my.micloud.tw -p 65013 -i ~/.ssh/id_rsa</code></pre>
<h1>Windows主機(使用Putty工具連線範例)</h1>
<p>由於Putty採用特有格式的puk檔案來封裝SSH Key，因此必須透過Putty相關工具將MiCloud產出之Key File進行轉換，轉換動作如下：</p>
<p>(1)將信件中的私鑰下載至您的電腦中，如下圖。</p>
<p><img src='images/Free+machine+&+Connect+Tutorial-key.png' width='500' align='center'/></p>
<p>(2)於下列網址下載PuTTy、Pageant and PuTTYgen，該工具可以協助您進行SSH Key的建立與SSH的連線。</p>
<p>&nbsp;&nbsp;&nbsp;網址為:<a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html"><a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html</a></a></p>
<p><img src='images/Free+machine+&+Connect+Tutorial-putty.jpg' width='500' align='center'/></p>
<p>(3)執行puttygen.exe並點選Load，”檔案類型”選擇所有檔案，匯入您所下載的key</p>
<p><img src='images/Free+machine+&+Connect+Tutorial-load.jpg' width='500' align='center'/></p>
<p><img src='images/Free+machine+&+Connect+Tutorial-file.jpg' width='500' align='center'/></p>
<p>(4)匯入後會才會產生putty可執行的key，並將此金鑰儲存，即可關閉程式。</p>
<p><img src='images/Free+machine+&+Connect+Tutorial-save.jpg' width='500' align='center'/></p>
<p><img src='images/Free+machine+&+Connect+Tutorial-save2.jpg' width='500' align='center'/></p>
<p>(5)開啟pageant.exe執行後程式會在螢幕的右下角如下圖:</p>
<p><img src='images/Free+machine+&+Connect+Tutorial-pageant.jpg' width='500' align='center'/></p>
<p>點開後按下Add key按鈕，將上面所儲存的key開啟。</p>
<p><img src='images/Free+machine+&+Connect+Tutorial-addkey.jpg' width='500' align='center'/></p>
<p><img src='images/Free+machine+&+Connect+Tutorial-addkey2.jpg' width='500' align='center'/></p>
<p>(6)新增完後請先登入平台選擇主機，檢視主機的細項畫面，再開啟putty.exe，hostname為DNS，設定完按下open按鈕，進入putty後輸入root即可使用。</p>
<p><img src='images/Free+machine+&+Connect+Tutorial-machine.jpg' width='650' align='center'/></p>
<p><img src='images/Free+machine+&+Connect+Tutorial-dnsport1.jpg' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Free.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Free.md">Free.md</a></h1><br/><h1>有試用版可以先使用嗎？</h1>
<ul>
<li>目前Micloud已有提供公測/免費主機，提供客戶三十天免費使用，每個email可免費申請256MB主機一台。<br>&nbsp;&nbsp;&nbsp;&nbsp;申請管道: 直接至<a href="http://micloud.tw"><a href="https://micloud.tw">https://micloud.tw</a></a></li>
</ul>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Getting+Started+with+SmartOS+SmartMachines.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Getting+Started+with+SmartOS+SmartMachines.md">Getting+Started+with+SmartOS+SmartMachines.md</a></h1><br/><p>This topic introduces you to your SmartMachine. It shows you how to verify that it&#39;s up and running and tells you what steps you should take next.<br>In this topic</p>
<h1>First Things First - Joyent SmartLogin</h1>
<p>The my.joyentcloud.com portal includes a feature we called SmartLogin, which allows customers to add ssh keys to their account which in turn is use to access provisioned SmartMachines and Linux VMs. In order to provision a machine (SmartMachine, Linux, Windows), you must have an ssh key set up in your My Account under &quot;SSH Keys&quot;.You can manage multiple SSH keys here which will be required for the default initial access to your SmartMachines and Linux VMs.</p>
<p><strong>While an SSH key is required before you can provision a SmartMachine, Linux VM, or Windows VM, access to a Windows VM is via user/password. The username and password are provided under the Machine Details page for the Windows VM.</strong></p>
<p>For SmartOS and Appliance SmartMachines, you may edit, add or remove SSH keys at anytime and the changes will occur immediately on any running SmartMachines and SmartOS Appliances. For Linux VMs, the SSH key you wish to use must be added to your my.joyentcloud.com account before provisioning in order for it to be be added to the VM. Additional SSH keys must be manually added to Linux Virtual Servers for additional users post-provisioning.</p>
<p>Once you have at least one SSH key present in your account, you may choose from the list of servers, sizes and datacenters to provision and name a virtual server.  Once provisioned, you may refresh and access details regarding your server, which will provide IP address and any additional login credentials for software or access privileges within your server.</p>
<h1>Accessing Your SmartMachine From a Browser</h1>
<p>Once your SmartMachine is running, it is available on the Internet. Until you set up domain name service for your SmartMachine, you can access it through the public IP address shown in your my.joyentcloud.com portal.</p>
<h1>The Preconfigured Accounts</h1>
<p>We have a variety of SmartMachine datasets and appliances that come with varying levels of preconfigured software and services. Depending on the SmartOS you choose, you may find additional credentials to these services within your SmartMachine Details, by clicking on the server name in your Machines list. Click show credentials to find various password information.</p>
<p>We are in the process of improving the organization of these credentials, but to clarify various usernames and services, please refer to the following:<br>SmartOSPlus is our primary SmartOS template that includes the most preconfigured and developer friendly packages and services.  Information on various SmartOS datasets may be found here: <a href="http://wiki.joyent.com/display/jpc2/SmartOS+Smartmachine+Datasets">http://wiki.joyent.com/display/jpc2/SmartOS+Smartmachine+Datasets</a>.<br>%%(color:red)<br>Credential Examples:</p>
<pre><code>root : password          (this refers to your root user below)
admin : password          (this refers to your admin user below)
mysql :  password          (this refers to your mysql “root” user below)
pgsql : password              (this refers to your postgresql “postgres” user below
virtualmin : password      (this refers to your virtualmin “admin” user password)
jill : password               (this refers to username “jill” below)</code></pre>
<p>%%</p>
<h1>root:</h1>
<p>This is the root user for your SmartMachine. As with other Unix-like systems, root is the superuser and has permission to change any file on the system.You may login directly as root with your ssh keys, or as admin and su - to root.</p>
<h1>admin:</h1>
<p>The admin user is the default administration user for command line operation. It is a member of the staff group, so you can use sudo to perform administrative tasks without logging in as root. Use SSH to log in as admin:ssh admin@your.public.ip.address</p>
<h1>mysql:</h1>
<p>This refers to the running MySQL service on your SmartOSPlus SmartMachine. The default user account for this is “root”, and the password is found next to mysql in your system credentials.  This is the account for the root user for MySQL databases. This is the MySQL user that has privileges to create more MySQL users. You can use the MySQL root account to create new databases, new users, to assign privileges to users, and so on. To access MySQL use the following command: mysql -u root -p. When prompted for a password, use the MySQL password for MySQL access from the system credentials, not the password for the root user.</p>
<h1>pgsql:</h1>
<p>This refers to the PostgreSQL service on your SmartOSPlus SmartMachine (the service is not running by default, but has been pre-configured). The default user for this is “postgres”, and the password is found next to pgsql in your system credentials.  This is the account for the root user for PostgreSQL databases. This is the user that has privileges to create more PostgreSQL users.</p>
<h1>virtualmin:</h1>
<p>This is the web interface deployed and running on a SmartOSPlus SmartMachine, that allows you to create new users, change passwords, create and administer virtual web servers, run simple commands, and so on.  The Default user for Virtualmin is “admin”.  The default password, is the password found in your credentials next to Virtualmin.To access Virtualmin, use the following address in a browser:<a href="https://your.public.ip.address:10000">https://your.public.ip.address:10000</a><br>%%(color:blue)<br>*   You may get a warning that the identify of the website may not be verified. You can safely ignore this and proceed to login to virtualmin.<br>%%</p>
<ul>
<li>5 Child Pages Reorder Pages:</li>
<li><em>[Setting Up Your SmartMachine]](</em>  *[Setting Up Your SmartMachine)</li>
<li><em>[Finding Your Way Around a SmartMachine]](</em>  *[Finding Your Way Around a SmartMachine)</li>
<li><em>[How to use SSH Keys with a Joyent Machine]](</em>  *[How to use SSH Keys with a Joyent Machine)</li>
<li><em>[Changing Default SmartMachine Passwords]](</em>  *[Changing Default SmartMachine Passwords)</li>
<li><em>[Introduction to Virtualmin and Webmin]](</em>  *[Introduction to Virtualmin and Webmin)</li>
</ul>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Host+Names%2C+IP+Addresses%2C+Zone+Names%2C+and+Reverse+Records.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Host+Names%2C+IP+Addresses%2C+Zone+Names%2C+and+Reverse+Records.md">Host+Names%2C+IP+Addresses%2C+Zone+Names%2C+and+Reverse+Records.md</a></h1><br/><p>Your SmartMachine can be identified by several names, depending where it&#39;s being accessed from.</p>
<h1>IP Addresses</h1>
<p>An IP address is the unique address of your machine on a network. Every SmartMachine has two IP addresses:</p>
<ul>
<li>a public (external) address that identifies your machine on the Internet</li>
<li>a private (internal) address that identifies your machine within the local network of SmartMachines<br><strong>Displaying the external IP adddress</strong></li>
</ul>
<pre><code>ifconfig external0:1 | grep inet | awk {&#39;print $2&#39;} | cut -d&quot;:&quot; -f2</code></pre>
<p><strong>Displaying the internal IP adddress</strong></p>
<pre><code>ifconfig internal0:1 | grep inet | awk {&#39;print $2&#39;} | cut -d&quot;:&quot; -f2</code></pre>
<h1>Host Name</h1>
<p>This is the name of the machine. The Domain Name Service (DNS) maps this name to an IP address. See Setting the Host Name of a SmartMachine to learn how to set your host name.</p>
<h1>Zone Name</h1>
<p>Your SmartMachine is a virtual machine that resides inside a physical server. The zone name is the virtual server&#39;s name within the physical server.</p>
<p>Use the zonename command to display your SmartMachine&#39;s zone name.</p>
<p>In addition to any host name you set up for your machine, you can always access your SmartMachine with the address zonename.joyent.us.</p>
<h1>Reverse PTR Records</h1>
<p>Domain Name Service maps a host name to an IP address. A reverse pointer record maps an IP address to a host name. In most cases, a reverse pointer record isn&#39;t necessary. If you plan to set up a mail server, however, you will probably need one. In that case, submit a support ticket to request one. Be sure to provide your zone name and your public IP address.</p>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Host+Names,+IP+Addresses,+Zone+Names,+and+Reverse+Records.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Host+Names,+IP+Addresses,+Zone+Names,+and+Reverse+Records.md">Host+Names,+IP+Addresses,+Zone+Names,+and+Reverse+Records.md</a></h1><br/><p>Your SmartMachine can be identified by several names, depending where it&#39;s being accessed from.</p>
<h1>IP Addresses</h1>
<p>An IP address is the unique address of your machine on a network. Every SmartMachine has two IP addresses:</p>
<ul>
<li>a public (external) address that identifies your machine on the Internet</li>
<li>a private (internal) address that identifies your machine within the local network of SmartMachines<br><strong>Displaying the external IP adddress</strong></li>
</ul>
<pre><code>ifconfig external0:1 | grep inet | awk {&#39;print $2&#39;} | cut -d&quot;:&quot; -f2</code></pre>
<p><strong>Displaying the internal IP adddress</strong></p>
<pre><code>ifconfig internal0:1 | grep inet | awk {&#39;print $2&#39;} | cut -d&quot;:&quot; -f2</code></pre>
<h1>Host Name</h1>
<p>This is the name of the machine. The Domain Name Service (DNS) maps this name to an IP address. See Setting the Host Name of a SmartMachine to learn how to set your host name.</p>
<h1>Zone Name</h1>
<p>Your SmartMachine is a virtual machine that resides inside a physical server. The zone name is the virtual server&#39;s name within the physical server.</p>
<p>Use the zonename command to display your SmartMachine&#39;s zone name.</p>
<p>In addition to any host name you set up for your machine, you can always access your SmartMachine with the address zonename.joyent.us.</p>
<h1>Reverse PTR Records</h1>
<p>Domain Name Service maps a host name to an IP address. A reverse pointer record maps an IP address to a host name. In most cases, a reverse pointer record isn&#39;t necessary. If you plan to set up a mail server, however, you will probably need one. In that case, submit a support ticket to request one. Be sure to provide your zone name and your public IP address.</p>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="How+to+use+SSH+Keys+with+a+Joyent+Machine.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=How+to+use+SSH+Keys+with+a+Joyent+Machine.md">How+to+use+SSH+Keys+with+a+Joyent+Machine.md</a></h1><br/><h1>SmartMachine連線教學</h1>
<p>MiCloud上連線SmartMachine或Linux的方式，為使用SSH(Security Shell)之連線方式，並預設透過事先產生並匯入MiCloud之SSH-Key連線，且每台主機均預設以root帳號連線，您將有該主機之最大權限。SSH Key將由客戶自行產生，並且自行上傳SSH Key中公鑰(Public Key)部分，MiCloud將不擁有您的私鑰，亦即代表MiCloud無權限侵入您的系統。而SSH-Key的產生、上傳與管理，請參考下面說明：<br><em>  [使用Windows連線SmartMachine](SSH KeyGen &amp; Connect Tutorial - Windows)
</em>  [使用Linux連線SmartMachine](SSH KeyGen &amp; Connect Tutorial - Linux or Unix)<br>*  [使用Mac連線SmartMachine](SSH KeyGen &amp; Connect Tutorial - MacOS)</p>
<p>附註：MiCloud上SmartOS與Linux對於SSH Key支支援程度不同，任何時間上傳的SSH Key均可即時生效來登入SmartOS系統，但Linux系統之SSH Key必須於主機建立之前匯入MiCloud，方可認證於該Linux系統。因此如您有申請MiCloud上之Linux，請務必於主機建立之後進行更換root密碼動作或另外新增管理權限帳號，並妥善保存您的帳號及密碼，避免SSH Key遺失後無法登入系統。</p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="How+to+use+SSH+Keys+with+Node.js+Smart+Machines.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=How+to+use+SSH+Keys+with+Node.js+Smart+Machines.md">How+to+use+SSH+Keys+with+Node.js+Smart+Machines.md</a></h1><br/><p>Joyent&#39;s Node.js™ Smart Machine service uses SSH keys as the primary method of accessing the service.</p>
<h1>Where to find your SSH key</h1>
<p>You can find your SSH key on your local machine at ~/.ssh/id_rsa.pub or ~/.ssh/id_dsa.pub. If neither of those files exist, create them with this command:</p>
<pre><code>ssh-keygen</code></pre>
<p>To view your public key from the command line, use this command:</p>
<pre><code>cat ~/.ssh/id_dsa.pub</code></pre>
<pre><code>If you are on Windows and using PuTTY and puttygen.exe to generate your keys, be sure that you use the key listed in the box labeled Public key for pasting into OpenSSH authorized_keys file.
If you continue to experience problems with PuTTY, try CygWin http://cygwin.org</code></pre>
<h1>Adding more SSH Keys on a Node.js Smart Machines</h1>
<p>Once you have your initial key uploaded you can add more keys from other computers to your Node.js SmartMachine. To do this generate the key on the new computer and add it to the following location on your Node.js SmartMachine:</p>
<pre><code>/home/node/.ssh/authorized_keys</code></pre>
<p>Be careful not to overwrite the existing file. If you delete existing keys those remote computers will not be able to log into your Node.js SmartMachine.</p>
<h1>Changing your SSH Key on a Node.js Smart Machines</h1>
<p>If you change your SSH key on your local computer you will need to log into your Node.js SmartMachine with your old key first.</p>
<p>Then you need to add your new key and remove your old key from:</p>
<pre><code>/home/node/.ssh/authorized_keys</code></pre>
<h1>Invalid SSH Key on a Node.js Smart Machines</h1>
<p>If you try to log into your Node.js SmartMachine and you are prompted for a password your need to update your key by opening a support ticket.</p>
<p>To do this send an email to support@joyent.com letting us know that you can not log into your Node.js SmartMachine. Please make sure you provide us the following:</p>
<ul>
<li>your account name</li>
</ul>
<ul>
<li>the name of your Node.js Smart Machine</li>
</ul>
<ul>
<li>update your no.de account with the proper SSH keys <a href="https://api.no.de/#PUT-/sshkeys/:id">https://api.no.de/#PUT-/sshkeys/:id</a></li>
</ul>
<p>If you are still unable to log in as the user node to your Node.js SmartMachine please send the following to support@joyent.com:</p>
<ul>
<li>The output of this command:</li>
</ul>
<pre><code>Make sure you replace &lt;YOUR_SMARTMACHINE&gt; with the subdomain name of your Node.js SmartMachine
Also, you need to log into your Node.js SmartMachine as the user &#39;node&#39;</code></pre>
<pre><code>ssh -vvv node@&lt;YOUR_SMARTMACHINE&gt;.no.de</code></pre>
<ul>
<li>Your public SSH key</li>
</ul>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Install+MySQL+on+Linux.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Install+MySQL+on+Linux.md">Install+MySQL+on+Linux.md</a></h1><br/><h1>Linux系統上安裝MySQL</h1>
<p>依下達的指令不同，各作業系統的安裝說明如下:</p>
<h1>CentOS、Fedora 安裝MySQL</h1>
<p>1.請使用yum安裝</p>
<pre><code>#yum install mysql-server</code></pre>
<p><img src='images/Install+MySQL+on+Linux-p1.png' width='650' align='center'/></p>
<p>2.啟動MySQL服務</p>
<pre><code>#service mysqld start</code></pre>
<p><img src='images/Install+MySQL+on+Linux-p2.png' width='650' align='center'/></p>
<p>3.設置MySQL登入密碼，密碼可自訂，這裡舉例為1qaz</p>
<pre><code>#mysqladmin -u root password 1qaz</code></pre>
<p>4.連線至MySQL</p>
<pre><code>#mysql -uroot -p</code></pre>
<p><img src='images/Install+MySQL+on+Linux-p4.png' width='650' align='center'/></p>
<h1>Ubuntu、Debian 安裝MySQL</h1>
<p>1.請使用apt-get安裝MySQL</p>
<pre><code>#apgt-get install mysql-server</code></pre>
<p><img src='images/Install+MySQL+on+Linux-p5.png' width='650' align='center'/></p>
<p>2.啟動MySQL服務</p>
<pre><code>#service mysql start</code></pre>
<p><img src='images/Install+MySQL+on+Linux-p6.png' width='650' align='center'/></p>
<p>3.設置MySQL登入密碼，密碼可自訂，這裡舉例為1qaz</p>
<pre><code>#mysqladmin -u root password 1qaz</code></pre>
<p>4.連線至MySQL</p>
<pre><code>#mysql -uroot -p</code></pre>
<p><img src='images/Install+MySQL+on+Linux-p4.png' width='650' align='center'/></p>
<hr>
<h1>重設root密碼</h1>
<p>若您忘記MySQL的root密碼，可以用以下的方式重設密碼:<br>1.請先將MySQL服務停止</p>
<pre><code>#service mysqld stop</code></pre>
<p><img src='images/Install+MySQL+on+Linux-p7.png' width='650' align='center'/></p>
<p>2.以不檢查密碼的方式啟動MySQL</p>
<pre><code>#mysqld_safe --skip-grant-tables&amp;</code></pre>
<p><img src='images/Install+MySQL+on+Linux-p8.png' width='650' align='center'/></p>
<p>3.登入MySQL</p>
<pre><code>#mysql</code></pre>
<p>4.將root密碼重新設定為1234</p>
<pre><code>mysql&gt;update mysql.user set password=PASSWORD(&#39;1234&#39;) where user=&#39;root&#39;;</code></pre>
<p>5.執行上一個步驟所下達的密碼設定指令</p>
<pre><code>mysql&gt; flush privileges;</code></pre>
<p>6.退出MySQL</p>
<pre><code>mysql&gt; quit</code></pre>
<p><img src='images/Install+MySQL+on+Linux-p9.png' width='650' align='center'/></p>
<p>7.重新啟動MySQL</p>
<pre><code>#service mysqld restart</code></pre>
<p><img src='images/Install+MySQL+on+Linux-p10.png' width='650' align='center'/></p>
<p>8.驗證密碼是否已更改</p>
<pre><code>#mysql -uroot -p</code></pre>
<p><img src='images/Install+MySQL+on+Linux-p11.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Install+MySQL+on+SmartOS.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Install+MySQL+on+SmartOS.md">Install+MySQL+on+SmartOS.md</a></h1><br/><h1>SmartOS上安裝MySQL</h1>
<p>MiCloud在SmartOS Plus、SmartOS32中提供預載MySQL的服務，若剛開始沒有選擇預載之用戶，可以參考以下的步驟進行安裝，由於32bit及64bit的安裝過程有些許差異，故分開描述。</p>
<h1>SmartOS 32bit安裝步驟</h1>
<p>1.請先搜尋MySQL的套件，並找到mysql-server最高版本</p>
<pre><code># pkgin se mysql</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-p1.png' width='650' align='center'/></p>
<p>2.安裝MySQL</p>
<pre><code># pkgin in mysql-server-5.5.16nb1</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-p2.png' width='650' align='center'/></p>
<p>3.安裝完成後，請先找到mysql.xml，並修改此檔。</p>
<pre><code># find / -name mysql.xml</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-p3.png' width='650' align='center'/></p>
<pre><code># vi /opt/local/share/smf/manifest/mysq l.xml</code></pre>
<p>進入編輯畫面後， 請將下圖中這二個參數路徑改為/opt/local/share/smf/method/svc-mysql，指令如下</p>
<pre><code>&lt;exec_method name=&#39;start&#39; type=&#39;method&#39; exec=&#39;/opt/local/share/smf/method/svc-mysql start&#39; timeout_seconds=&#39;18446744073709551615&#39;/&gt;
&lt;exec_method name=&#39;stop&#39; type=&#39;method&#39; exec=&#39;/opt/local/share/smf/method/svc-mysql stop&#39; timeout_seconds=&#39;18446744073709551615&#39;/&gt;</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-p8.png' width='650' align='center'/></p>
<p>4.將mysql.xml匯入smf中</p>
<pre><code># svccfg import /opt/local/share/smf/manifest/mysql.xml</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-p5.png' width='650' align='center'/></p>
<p>5.先關閉後再重新啟動MySQL服務</p>
<pre><code># svcadm disable mysql
# svcadm enable mysql</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-p6.png' width='650' align='center'/></p>
<p>6.檢視服務是否啟動</p>
<pre><code># svcs mysql</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-p7.png' width='650' align='center'/></p>
<p>7.設置MySQL登入密碼，密碼可自訂，這裡舉例為1qaz</p>
<pre><code># mysqladmin -u root password 1qaz</code></pre>
<p>8.連線至MySQL</p>
<pre><code># mysql -uroot -p</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-http://wiki.micloud.tw/Wiki/attach/Install%20MySQL%20on%20Linux/p4.png' width='650' align='center'/></p>
<h1>SmartOS 64bit安裝步驟</h1>
<p>1.請先搜尋MySQL的套件</p>
<pre><code># pkgin se mysql</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-p61.png' width='650' align='center'/></p>
<p>2.以安裝5.1.58為例</p>
<pre><code># pkgin in mysql-server-5.1.58</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-p62.png' width='650' align='center'/></p>
<p>3.先關閉後再啟動MySQL服務</p>
<pre><code># svcadm disable mysql
# svcadm enable mysql</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-p6.png' width='650' align='center'/></p>
<p>4.檢視服務是否啟動</p>
<pre><code># svcs mysql</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-p7.png' width='650' align='center'/></p>
<p>5.設置MySQL登入密碼，密碼可自訂，這裡舉例為1qaz</p>
<pre><code># mysqladmin -u root password 1qaz</code></pre>
<p>6.連線至MySQL</p>
<pre><code># mysql -uroot -p</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-http://wiki.micloud.tw/Wiki/attach/Install%20MySQL%20on%20Linux/p4.png' width='650' align='center'/></p>
<p>7.外部連線設定</p>
<p>因為SmartOS 64因安全性考量，目前服務安裝完成後預設IP是binding 127.0.0.1，所以3306 port服務外部不能連線,可以透過更新MySQL設定來開放外部連線：</p>
<pre><code># vi /opt/local/etc/my.cnf</code></pre>
<p>修改下方紅色框框部份<br><img src='images/Install+MySQL+on+SmartOS-set.png' width='650' align='center'/></p>
<p>關閉服務，再重新啓動，連線設定即完成</p>
<pre><code># svcadm disable mysql
# svcadm enable mysql</code></pre>
<hr>
<h1>重設root密碼</h1>
<p>若您忘記MySQL的root密碼，可以用以下的方式重設密碼</p>
<p>1.請先將Mysql服務停止</p>
<pre><code># svcadm disable mysql</code></pre>
<p>2.在/home/admin下建立一個檔案名稱為reset-mysql-root-password-init，並在檔案內加入密碼設定指令</p>
<pre><code>#vi /home/admin/reset-mysql-root-password-init</code></pre>
<p>在檔案中加入下方指令。(密碼您可以自行輸入，這裡以1234為範例)</p>
<pre><code>UPDATE mysql.user SET Password=PASSWORD(&#39;1234&#39;) WHERE User=&#39;root&#39;;
FLUSH PRIVILEGES;</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-p63.png' width='650' align='center'/></p>
<p>3.使用特殊的MySQL伺服器 - 初始化文件選項</p>
<pre><code># /opt/local/bin/mysqld_safe --init-file=/home/admin/reset-mysql-root-password-init &amp;</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-p64.png' width='650' align='center'/></p>
<p>4.關閉MySQL</p>
<pre><code># svcadm disable network/mysql</code></pre>
<p>5.刪除創建的文件:</p>
<pre><code># rm /home/admin/reset-mysql-root-password-init</code></pre>
<p>6.重新啟動MySQL服務:</p>
<pre><code># svcadm enable network/mysql</code></pre>
<p>7.驗證密碼是否已更改</p>
<pre><code># mysql -uroot -p</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-http://wiki.micloud.tw/Wiki/attach/Install%20MySQL%20on%20Linux/p11.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Install+SmartOS+Packages.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Install+SmartOS+Packages.md">Install+SmartOS+Packages.md</a></h1><br/><h1>套件更新</h1>
<p>不同SmartOS版本有不同的套件庫來源，無法任意變更，但可以執行套件更新，相關指令如下:</p>
<p>先從套件庫找出需要更新的套件，指令如下:</p>
<pre><code>#pkgin update</code></pre>
<p><img src='images/Install+SmartOS+Packages-update.jpg' width='650'  align='center'/><br>再執行更新，指令如下:</p>
<pre><code>#pkgin upgrade</code></pre>
<p><img src='images/Install+SmartOS+Packages-upgrade.jpg' width='650'  align='center'/></p>
<hr>
<h1>安裝非預載套件</h1>
<p>在SmartOS上安裝套件是非常簡單的事情，SmartOS使用pkgin及相關的指令來作套件的安裝與維護，使用上就像yum或是apt-get一樣簡單。您可在putty或其他terminal工具連上SmartOS後，使用pkgin指令說明如下:</p>
<h1>列出系統上的套件</h1>
<pre><code>#pkgin list</code></pre>
<p><img src='images/Install+SmartOS+Packages-pkgin-list.png' width='650'  align='center'/></p>
<h1>搜尋套件</h1>
<p>若裡面沒有您需要的軟體套件，這時能使用搜尋軟體:</p>
<pre><code>#pkgin search [套件部份名稱]](#pkgin search [套件部份名稱)
ex:pkgin search postgre</code></pre>
<p><img src='images/Install+SmartOS+Packages-pkgin-search.png' width='650'  align='center'/></p>
<h1>安裝套件</h1>
<pre><code>#pkgin install [套件全名]](#pkgin install [套件全名)
ex:pkgin install postgresql90-adminpack-9.0.4</code></pre>
<p><img src='images/Install+SmartOS+Packages-pkgin-install.png' width='650'  align='center'/></p>
<h1>刪除套件</h1>
<p>安裝完若發現安裝錯誤，則可移除套件:</p>
<pre><code>#pkgin remove [套件全名]](#pkgin remove [套件全名)
ex:pkgin remove postgresql90-adminpack-9.0.4</code></pre>
<p><img src='images/Install+SmartOS+Packages-pkgin-remove.png' width='650'  align='center'/></p>
<h1>常用套件</h1>
<ul>
<li>Install Apache Httpd</li>
<li>Install Apache Tomcat</li>
<li>Install Java</li>
<li>Install mod_jk Module</li>
<li>Install Apache With Tomcat</li>
<li>Install Java jdk 1.5 and jboss 4.0</li>
</ul>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Installing+and+Configuring+Nagios.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Installing+and+Configuring+Nagios.md">Installing+and+Configuring+Nagios.md</a></h1><br/><p>This page shows you how to install and configure the Nagios monitoring tool on your SmartMachine.</p>
<p>In this page:</p>
<h1>Installation</h1>
<p>Nagios is available as a prebuilt package in the Joyent pkgsrc repository. To install it, follow these steps.</p>
<ul>
<li>Make sure that your pkgin database is up to date. The pkgin tool makes it easier to manage packges.</li>
</ul>
<pre><code>$ pkgin update
database for http://pkgsrc.joyent.com/2010Q2/All is up-to-date</code></pre>
<ul>
<li>Determine which packages are available for your SmartMachine.</li>
</ul>
<pre><code>$ pkgin search nagios
nagios-base-3.2.0nb2  Network monitor
nagios-imagepak-base-20030219  Additioannal icons for nagios
nagios-nrpe-2.12nb1  Nagios remote program execution daemon
nagios-nsca-2.6nb1   Remote/passive network service for nagios
nagios-plugin-ldap-1.4.14nb1  Nagios ldap plugin
nagios-plugin-mysql-1.4.14nb1  Nagios mysql plugin
nagios-plugin-pgsql-1.4.14nb2  Nagios pgsql plugin
nagios-plugin-snmp-1.4.14nb1  Nagios snmp plugins
nagios-plugins-1.4.14nb1  Nagios plugins</code></pre>
<ul>
<li>Install the Nagios packages. Note that the package names may change.</li>
</ul>
<pre><code>$ sudo pkgin install nagios-base-3.2.0nb2 nagios-imagepak-base-20030219 nagios-nrpe-2.12nb1 nagios-plugins-1.4.14nb1</code></pre>
<h1>Configuration</h1>
<p>Use your favorite text editor to edit the following configuration files. You need to be logged in as root or use sudo to edit these files.</p>
<ul>
<li>Edit /opt/local/etc/httpd/httpd.conf and append the following:</li>
</ul>
<pre><code>Append to /opt/local/etc/httpd/httpd.conf
Include /opt/local/etc/nagios/nagios.conf</code></pre>
<ul>
<li>Comment out SuexecUserGroup from your virtual host file. If you&#39;re using the default user, this will be /opt/local/etc/httpd/virtualhosts/jill.conf.</li>
</ul>
<pre><code>Comment out the following line
# SuexecUserGroup &quot;#1000&quot; &quot;#1000&quot;</code></pre>
<ul>
<li>Create the Nagios password file.</li>
</ul>
<pre><code>$ htpasswd -c ~jill/nagiosauth nagiosadmin</code></pre>
<ul>
<li>Create the /opt/local/share/nagios/.htaccess file in with your favorite text editor. You will need to be logged in as root or use sudo to save this file.</li>
</ul>
<pre><code>Create /opt/local/share/nagios/.htaccess with the following contents:
AuthType Basic
AuthName &quot;Password Required&quot;
AuthUserFile /home/jill/nagiosauth
Require valid-user</code></pre>
<ul>
<li>Copy the .htaccess to Nagios cgi-bin directory.</li>
</ul>
<pre><code>$ sudo cp /opt/local/share/nagios/.htaccess /opt/local/libexec/nagios/cgi-bin</code></pre>
<ul>
<li>Create Nagios /var/spool/nagios/spool/checkresults directory.</li>
</ul>
<pre><code>$ sudo mkdir -p /var/spool/nagios/spool/checkresults
$ sudo chown -R nagios /var/spool/nagios</code></pre>
<h1>Verify Installation</h1>
<p>Once everything is in place, verify the installation and restart Apache.</p>
<ul>
<li>Verify Nagios agent configuration</li>
</ul>
<pre><code>$ sudo /opt/local/bin/nagios -v /opt/local/etc/nagios/nagios.cfg</code></pre>
<p>You should see Things look okay - No serious problems were detected during the pre-flight check.<br>*  Start Nagios</p>
<pre><code>$ sudo /opt/local/bin/nagios -d /opt/local/etc/nagios/nagios.cfg</code></pre>
<ul>
<li>Restart Apache.</li>
</ul>
<pre><code>$ sudo svcadm restart svc:/network/http:apache</code></pre>
<p>You should be able to access your Nagios web page at <a href="http://_yourservername_/nagios/">http://_yourservername_/nagios/</a>.</p>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Installing+MongoDB+on+a+Node.js+SmartMachine.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Installing+MongoDB+on+a+Node.js+SmartMachine.md">Installing+MongoDB+on+a+Node.js+SmartMachine.md</a></h1><br/><p>This page shows you how to install MongoDB on your Node.js™ SmartMachine.</p>
<p>In this page:</p>
<p>In the interest of conserving your no.de&#39;s RAM and CPU, if you&#39;re looking for a good hosted MongoDB instance during the 48-hour NodeKnockout Competition, we recommend checking out the free offering from MongoHQ</p>
<h1>Using an Installation Script</h1>
<p>The easiest way to install MongoDB on your Node.js SmartMachine is to use this installation script .</p>
<p>First, log into your no.de smartmachine as &quot;admin&quot;, by running</p>
<pre><code>ssh admin@yourmachine.no.de</code></pre>
<p>then become root with:</p>
<pre><code>sudo bash</code></pre>
<p>... you&#39;ll follow that &quot;become root&quot; process when you need to run the mongo shell, or perform other maintenance work, too.</p>
<p>then:</p>
<pre><code>$ curl -O http://wiki.joyent.com/download/attachments/1639170/mongodbnode.sh
$ bash mongodbnode.sh 1.8.1</code></pre>
<p>The installation script</p>
<ul>
<li>downloads MongoDB and the additional library needed</li>
<li>unpacks the tar files</li>
<li>creates the directories ~/local/bin, ~/local/lib, ~/local/var/mongodb if they don&#39;t already exist</li>
<li>moves the files to the appropriate directories</li>
<li>creates an SMF manifest for the MongoDB service<br>To start MongoDB, and to ensure that it restarts when your machine reboots, run these commands:</li>
</ul>
<pre><code>source ~/.bashrc
pfexec svcadm enable mongodb</code></pre>
<h1>Installing Manually</h1>
<p>Follow these instructions to install MongoDB 1.8.1 on your Node.js SmartMachine.</p>
<pre><code>$ curl -O http://fastdl.mongodb.org/sunos5/mongodb-sunos5-x86_64-1.8.1.tgz
$ tar -xvzf mongodb-sunos5-x86_64-1.8.1.tgz
$ rm mongodb-sunos5-x86_64-1.8.1.tgz
$ mv mongodb-sunos5-x86_64-1.8.1 mongo

$ cd mongo

$ # get extra libraries we need (else you will get a libstdc++.so.6 dependency issue)
$ curl -O http://downloads.mongodb.org.s3.amazonaws.com/sunos5/mongo-extra-64.tgz
$ tar -xvzf mongo-extra-64.tgz
$ rm mongo-extra-64.tgz

$ # just as an example - you will really probably want to put these somewhere better:
$ export LD_LIBRARY_PATH=/home/node/mongo/mongo-extra-64
$ bin/mongod --help

# run mongo in a writable directory, replying only to localhost
$ mkdir db
$ bin/mongod --bind_ip=127.0.0.1 --journal --dbpath /home/node/mongo/db</code></pre>
<p>Note that running MongoDB this way will not restart if your Node.js SmartMachine is rebooted. You may want to create an SMF manifest for it and use SMF to make sure it runs when your machine restarts. You can use the SMF manifest from the installation script .</p>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Installing+Node.js+on+a+Joyent+SmartOS+SmartMachine.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Installing+Node.js+on+a+Joyent+SmartOS+SmartMachine.md">Installing+Node.js+on+a+Joyent+SmartOS+SmartMachine.md</a></h1><br/><h1>Node.js</h1>
<p>Node.js 是一個高效能、易擴充的網站應用程式開發框架 (Web Application Framework)，是為了讓開發者能夠更容易開發高延展性的網路服務。系統不需要經過太多複雜的調校、效能調整及程式修改，就能滿足網路服務在不同發展階段對效能的要求。</p>
<p>MiCloud所提供的SmartOS主機中，已有預載Nodejs服務的主機只有SmartOS Plus、SmartOS32+Nodejs這二種版本，若其他規格的主機想安裝Nodejs於您的主機上，請按照下列步驟進行安裝。</p>
<h1>在SmartOS上安裝Node.js</h1>
<p>利用pkgin指令搜尋node.js:</p>
<pre><code># pkgin search nodejs</code></pre>
<p><img src='images/Installing+Node.js+on+a+Joyent+SmartOS+SmartMachine-p1.PNG' width='650' align='center'/><br>如上圖的範例，顯示0.4.9版本可供下載安裝，利用pkgin指令安裝:</p>
<pre><code># pkgin install nodejs-0.4.9</code></pre>
<p><img src='images/Installing+Node.js+on+a+Joyent+SmartOS+SmartMachine-p2.PNG' width='650' align='center'/></p>
<h1>檢視是否安裝成功</h1>
<p>首先我們透過vi指令來建立名為server.js程式:</p>
<pre><code># vi server.js</code></pre>
<p><img src='images/Installing+Node.js+on+a+Joyent+SmartOS+SmartMachine-p3.PNG' width='650' align='center'/></p>
<p>然後進入編輯文字畫面進行編輯，我們加入下列基本的測試程式指令:</p>
<pre><code>var http = require(&#39;http&#39;);
http.createServer(function (req, res) {
res.writeHead(200, {&#39;Content-Type&#39;: &#39;text/plain&#39;});
res.end(&#39;Hello Node.js
n&#39;);
}).listen(8102, &quot;127.0.0.1&quot;);
console.log(&#39;Server running at http://127.0.0.1:8102/&#39;);</code></pre>
<p>在上方指令中，您可以在.listen後方加入沒有被使用的port(本範例是使用8102)，依序是localhost的網址。如下圖所示:<br><img src='images/Installing+Node.js+on+a+Joyent+SmartOS+SmartMachine-p4.png' width='650' align='center'/></p>
<p>最後就是執行server.js 檔案，且執行以下指令就可以看到您的伺服器會在所設定的網址啟動:</p>
<pre><code># node server.js</code></pre>
<p><img src='images/Installing+Node.js+on+a+Joyent+SmartOS+SmartMachine-p5.png' width='650' align='center'/></p>
<p>最後前往瀏覽器輸入您的localhost以及後方所設定port位置來確認是否運行成功，本操作以google瀏覽器做為範例，如有出現Hello Node.js文字時，表示成功:<br><img src='images/Installing+Node.js+on+a+Joyent+SmartOS+SmartMachine-p6.png' width='500' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Instruction+for+2XS+Machine.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Instruction+for+2XS+Machine.md">Instruction+for+2XS+Machine.md</a></h1><br/><h1>免費主機主機使用說明</h1>
<p>Small Package 服務主機為256M記憶體、10GB硬碟、1Core CPU之SmartOs主機，網路配置部分，提供一個內部私有IP，並透過外部DNS設定串聯，內部主機彼此間可以透過私有IP互通。一般設定說明如下:</p>
<h1>HTTP/HTTPS使用</h1>
<p>開放80、443、8080、3000、10000等port供HTTP(S)連線使用，連線時請使用主機DNS名稱連線(Ex:<a href="http://192-168-255-13.my.micloud.tw">http://192-168-255-13.my.micloud.tw</a>)</p>
<h1>80:Default HTTP protocol</h1>
<p>預設web目錄：/opt/local/share/httpd/htdocs</p>
<p>預設支援：php模組</p>
<p>使用者可以透過下面指令操作服務：</p>
<p>啟動：svcadm enable apache</p>
<p>關閉：svcadm disable apache</p>
<p>瀏覽網址：<a href="http://you_domain_name/">http://you_domain_name/</a></p>
<p>說明：如欲修改預設的htdoc目錄，可異動：includes/directory.conf與includes/core.conf兩個檔案，置換對應的目錄<br><em>  includes/directory.conf: 修改DocumentRoot至您的目錄
</em>  includes/core.conf: 修改Directory物件之目錄位置至您的目錄</p>
<h1>443: Default HTTPS protocol (HTTP轉SSL，使用443 Port)</h1>
<p>預設目錄：/opt/local/share/httpd/htdocs</p>
<p>預設支援：php模組</p>
<p>使用者可以透過下面指令操作服務：</p>
<p>啟動：svcadm enable apache</p>
<p>關閉：svcadm disable apache</p>
<p>瀏覽網址：<a href="https://you_domain_name/">https://you_domain_name/</a></p>
<p>說明：SmartOS主機提供預設Self-Sign的SSL金鑰，位置為：/opt/local/etc/openssl/private/selfsigned.pem，設定上只需參考下面檔案，然後重起主機即可</p>
<pre><code># vi /opt/local/etc/httpd/virtualhosts/myssl.conf
&lt;VirtualHost _default_:443&gt;
SSLEngine On
SSLCertificateFile /opt/local/etc/openssl/private/selfsigned.pem
SSLCertificateKeyFile /opt/local/etc/openssl/private/selfsigned.pem
DocumentRoot /opt/local/share/httpd/htdocs
&lt;/VirtualHost&gt;</code></pre>
<h1>8080:Default Tomacat HTTP protoca</h1>
<p>由於Smartos預設沒有Tomcat, 需自行下載，指令如下</p>
<p>搜尋可下載的Tomcat(黃色框框部分為可下載的版本)</p>
<pre><code>#pkgin se tomcat</code></pre>
<p><img src='images/Instruction+for+2XS+Machine-setomcat.jpg' width='650' align='center'/><br>下載您需要的版本</p>
<pre><code>#pkgin in apache-tomcat-7.0.22</code></pre>
<p><img src='images/Instruction+for+2XS+Machine-intomcat.jpg' width='650' align='center'/><br>預設JDK版本：JDK6</p>
<p>Tomcat目錄：/opt/local/share/tomcatl</p>
<p>部署目錄：/opt/local/share/tomcat/webapps</p>
<p>使用者可以透過下面指令操作服務：</p>
<p>啟動：/opt/local/share/tomcat/bin/startup.sh</p>
<p>關閉：/opt/local/share/tomcat/bin/shutdown.sh</p>
<p>瀏覽網址：<a href="http://you_domain_name:8080/">http://you_domain_name:8080/</a></p>
<h1>3000: Default Node.js (ExpressJS) protocal</h1>
<p>Node.js版本：v0.6.17</p>
<p>Npm版本：v1.2.21</p>
<p>預載Npm套件：express@2.5.9, forever@0.9.1, smartdc@6.5.3</p>
<p>使用範例：</p>
<p>$ express TestProject</p>
<p>$ cd TestProject &amp;&amp; npm install</p>
<p>啓動服務：node app.js</p>
<p>關閉服務：kill <code>ps -ef | grep “node app.js” | awk ‘{print $2}’</code></p>
<p>瀏覽網址：<a href="http://you_domain_name:3000/">http://you_domain_name:3000/</a></p>
<h1>10000: Default Webmin protocal</h1>
<p>(背後服務走HTTPS 10000 Port，Stingray負責重導流量)</p>
<p>使用者可以透過下面指令操作服務：</p>
<p>啟動：svcadm enable webmin</p>
<p>關閉：svcadm disable webmin</p>
<p>瀏覽網址：<a href="https://you_domain_name:10000/">https://you_domain_name:10000/</a></p>
<h1>其他-SmartOS套件安裝與管理：</h1>
<pre><code>搜尋：pkgin search [package name]](搜尋：pkgin search [package name)
安裝：pkgin install [package name]](安裝：pkgin install [package name)
移除：pkgin remove [package name]](移除：pkgin remove [package name)</code></pre>
<h1>其他-SMF服務管理：</h1>
<pre><code>啓動服務：svcadm enable [service name]](啓動服務：svcadm enable [service name)
關閉服務：svcadm disable [service name]](關閉服務：svcadm disable [service name)
服務狀態檢視：svcs -a ]( grep [service name)
服務LOG檢視：tail -f `svcs -L [service name]`](服務LOG檢視：tail -f `svcs -L [service name`)</code></pre>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Introduction+to+Virtualmin+and+Webmin.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Introduction+to+Virtualmin+and+Webmin.md">Introduction+to+Virtualmin+and+Webmin.md</a></h1><br/><p><a href="http://p.castfire.com/NTYYi/video/511999/511999-2011-02-14-160539.sd.m4v">Link</a></p>
<embed width="420" height="345" src="<!--http://p.castfire.com/NTYYi/video/511999/511999_2011-02-14-160539.sd.m4v" type="application/x-shockwave-flash"></embed>



<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Joyent+MySQL+SmartMachine.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Joyent+MySQL+SmartMachine.md">Joyent+MySQL+SmartMachine.md</a></h1><br/><p>The Joyent MySQL SmartMachine is a dynamically scalable virtual machine that is optimized for 64-bit MySQL. It&#39;s based on a standard SmartMachine, with general software stripped down to bare minimum, and with MySQL pre-installed and pre-configured for ultimate performance and scalability.</p>
<h1>Connecting to MySQL</h1>
<p>The MySQL server is configured to listen on the private IP (found in your machine details as the secondary IP address). It is strongly recommended that you connect to your MySQL appliance from a different SmartMachine (e.g a standard generic SmartMachine]]) using the private IP, regardless of whether from your website code directly (for regular use), or whether you set up e.g. phpMyAdmin on another SmartMachine for management or troubleshooting. You may find your MySQL passwords under the system credentials in your machine details.</p>
<p>It is expected (recommended as a best practice) to refrain from using the MySQL &#39;root&#39; login for production, and set up a restricted user first with the minimum privileges actually needed.</p>
<p>You <strong>can</strong> just connect to your appliance and log into MySQL using &#39;mysql&#39; of course (enter the MySQL root password when prompted):</p>
<pre><code>mysql -uroot -p</code></pre>
<p>Such connection will take place over a localhost UNIX socket.</p>
<h1>Resetting MySQL root password</h1>
<p>If you try to log into your MySQL server and get this error:</p>
<pre><code>foo$ mysql -u root -p
Enter password:
ERROR 1045 (28000): Access denied for user &#39;root&#39;@&#39;localhost&#39; (using password: YES)</code></pre>
<p>It means that the password you are typing and the one in MySQL&#39;s user table do not match. Keep in mind that MySQL users&#39; authentication credentials are based on &#39;&#39;&#39;username&#39;@&#39;host&#39;{{.</p>
<p>Verify that you are using the }}localhost{{ password for }}root{{. If you still get the above error, then you will need to change the }}root{{ password.</p>
<p>To reset the }}root{{ password on a SmartMachine you need to use the }}--init-file{{ option. This will read a SQL file when the MySQL server is restarted and reset the root password.</p>
<p><a href="http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html"><a href="http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html">http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html</a></a></p>
<p>You should <strong>NEVER</strong> have any scripts or applications that directly use }}root&#39;&#39; as a user, but if you do, note that changing this password will most likely break the above. Which is a great time to eliminate this security risk by creating a user with appropriate permissions and table access.</p>
<h1>Connecting using SSH tunnels</h1>
<p>While you can re-configure your MySQL instance to listen on the public IP instead (or all available IPs), it is not recommended to do that for security reasons. Instead, you can use SSH tunnels for secure remote connections. Some MySQL administrator tools (e.g. Navicat) already provide for SSH tunneling functionality. You&#39;d use these values when configuring such tool:</p>
<ul>
<li>SSH hostname: <smartmachine-hostname-or-ip></li>
<li>SSH port: 22 (should be default)</li>
<li>SSH username (login): admin</li>
<li>SSH password: <smartmachine-admin-password></li>
<li>MySQL hostname: <smartmachine-private-ip></li>
<li>MySQL port: 3306 (should be default)</li>
<li>MySQL username: root (or a custom user your created)</li>
<li>MySQL password: <smartmachine-mysql-password><br>To use &#39;ssh&#39; in a terminal to open the tunneled connection instead:</li>
</ul>
<pre><code>ssh -L3336:&lt;smartmachine-private-ip&gt;:3306 -N admin@&lt;smartmachine-hostname&gt;</code></pre>
<p>You&#39;d change 3336 to anything you like, that&#39;s the local port on your computer that you&#39;ll connect the MySQL client to afterwards.</p>
<h1>Installing mytop/innotop</h1>
<p>As root (or via sudo):</p>
<pre><code>pkgin install mytop
pkgin install innotop</code></pre>
<h1>Current Bugs</h1>
<h1>SMA Broken</h1>
<p>The SMF service svc:/application/management/sma:default is running out of the box but broken. It needs this fix to work:</p>
<h1>Install net-snmp:</h1>
<pre><code># pkgin install net-snmp</code></pre>
<p>Install sma.xml:</p>
<pre><code>&lt;?xml version=&#39;1.0&#39;?&gt;
&lt;!DOCTYPE service_bundle SYSTEM &#39;/usr/share/lib/xml/dtd/service_bundle.dtd.1&#39;&gt;
&lt;service_bundle type=&#39;manifest&#39; name=&#39;export&#39;&gt;
&lt;service name=&#39;application/management/sma&#39; type=&#39;service&#39; version=&#39;0&#39;&gt;
&lt;create_default_instance enabled=&#39;true&#39;/&gt;
&lt;single_instance/&gt;
&lt;dependency name=&#39;milestone&#39; grouping=&#39;require_all&#39; restart_on=&#39;none&#39; type=&#39;service&#39;&gt;
&lt;service_fmri value=&#39;svc:/milestone/sysconfig&#39;/&gt;
&lt;/dependency&gt;
&lt;dependency name=&#39;fs-local&#39; grouping=&#39;require_all&#39; restart_on=&#39;none&#39; type=&#39;service&#39;&gt;
&lt;service_fmri value=&#39;svc:/system/filesystem/local&#39;/&gt;
&lt;/dependency&gt;
&lt;dependency name=&#39;name-services&#39; grouping=&#39;optional_all&#39; restart_on=&#39;none&#39; type=&#39;service&#39;&gt;
&lt;service_fmri value=&#39;svc:/milestone/name-services&#39;/&gt;
&lt;/dependency&gt;
&lt;dependency name=&#39;system-log&#39; grouping=&#39;optional_all&#39; restart_on=&#39;none&#39; type=&#39;service&#39;&gt;
&lt;service_fmri value=&#39;svc:/system/system-log&#39;/&gt;
&lt;/dependency&gt;
&lt;dependency name=&#39;rstat&#39; grouping=&#39;optional_all&#39; restart_on=&#39;none&#39; type=&#39;service&#39;&gt;
&lt;service_fmri value=&#39;svc:/network/rpc/rstat&#39;/&gt;
&lt;/dependency&gt;
&lt;dependency name=&#39;cryptosvc&#39; grouping=&#39;require_all&#39; restart_on=&#39;restart&#39; type=&#39;service&#39;&gt;
&lt;service_fmri value=&#39;svc:/system/cryptosvc&#39;/&gt;
&lt;/dependency&gt;
&lt;dependency name=&#39;network&#39; grouping=&#39;require_all&#39; restart_on=&#39;restart&#39; type=&#39;service&#39;&gt;
&lt;service_fmri value=&#39;svc:/milestone/network&#39;/&gt;
&lt;/dependency&gt;
&lt;dependency name=&#39;config-file&#39; grouping=&#39;require_all&#39; restart_on=&#39;refresh&#39; type=&#39;path&#39;&gt;
&lt;service_fmri value=&#39;file://localhost/etc/sma/snmp/snmpd.conf&#39;/&gt;
&lt;/dependency&gt;
&lt;exec_method name=&#39;start&#39; type=&#39;method&#39; exec=&#39;/opt/local/bin/svc-sma&#39; timeout_seconds=&#39;60&#39;/&gt;
&lt;exec_method name=&#39;stop&#39; type=&#39;method&#39; exec=&#39;:kill&#39; timeout_seconds=&#39;60&#39;/&gt;
&lt;property_group name=&#39;general&#39; type=&#39;framework&#39;&gt;
&lt;property name=&#39;action_authorization&#39; type=&#39;astring&#39;/&gt;
&lt;/property_group&gt;
&lt;property_group name=&#39;manifestfiles&#39; type=&#39;framework&#39;&gt;
&lt;propval name=&#39;var_svc_manifest_application_management_sma_xml&#39; type=&#39;astring&#39; value=&#39;/var/svc/manifest/application/management/sma.xml &#39;/&gt;
&lt;/property_group&gt;
&lt;template&gt;
&lt;common_name&gt;
&lt;loctext xml:lang=&#39;C&#39;&gt;net-snmp SNMP daemon&lt;/loctext&gt;
&lt;/common_name&gt;
&lt;documentation&gt;
&lt;manpage title=&#39;snmpd&#39; section=&#39;1M&#39; manpath=&#39;/usr/share/man/&#39;/&gt;
&lt;/documentation&gt;
&lt;/template&gt;
&lt;/service&gt;
&lt;/service_bundle&gt;</code></pre>
<p>Install /opt/local/bin/svc-sma:</p>
<pre><code>#!/sbin/sh
#
#
# CDDL HEADER START
#
# The contents of this file are subject to the terms of the
# Common Development and Distribution License (the &quot;License&quot;).
# You may not use this file except in compliance with the License.
#
# You can obtain a copy of the license at usr/src/OPENSOLARIS.LICENSE
# or http://www.opensolaris.org/os/licensing.
# See the License for the specific language governing permissions
# and limitations under the License.
#
# When distributing Covered Code, include this CDDL HEADER in each
# file and include the License file at usr/src/OPENSOLARIS.LICENSE.
# If applicable, add the following below this CDDL HEADER, with the
# fields enclosed by brackets &quot;[]&quot; replaced with your own identifying](# fields enclosed by brackets &quot;[&quot; replaced with your own identifying)
# information: Portions Copyright [yyyy] [name of copyright owner]](# information: Portions Copyright [yyyy [name of copyright owner])
#
# CDDL HEADER END
#
# Copyright 2006 Sun Microsystems, Inc.  All rights reserved.
# Use is subject to license terms.
#
# ident &quot;@(#)svc-sma    1.1     06/06/01 SMI&quot;
#
# Start method script for the net-snmp SNMP daemon
#

. /lib/svc/share/smf_include.sh

SNMPD_FILE=/etc/sma/snmp/snmpd.conf
SNMPCONFPATH=/etc/sma/snmp:/var/sma_snmp
MIBDIRS=/etc/sma/snmp/mibs

export SNMPCONFPATH
export MIBDIRS

if /usr/bin/egrep  &#39;#DISABLE=YES&#39; ${SNMPD_FILE} &gt; /dev/null 2&gt;&amp;1; then
echo &quot;snmpd disabled by config file ${SNMPD_FILE}&quot;
svcadm disable svc:/application/management/sma
exit $SMF_EXIT_MON_OFFLINE;
else
#/usr/sfw/sbin/snmpd
/opt/local/sbin/snmpd -c ${SNMPD_FILE}
fi</code></pre>
<p>Set it executable:</p>
<pre><code># chmod +x /opt/local/bin/svc-sma</code></pre>
<p>then wire everything:</p>
<pre><code># svcadm disable sma
# svccfg delete sma
# svccfg import sma.xml</code></pre>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Joyent+Package+Repositories.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Joyent+Package+Repositories.md">Joyent+Package+Repositories.md</a></h1><br/><p>The title of the page serves as the heading to this section. It describes the problem that this page is solving.</p>
<p>In this page:</p>
<h1>About pkgsrc</h1>
<p>Joyent maintains a pkgsrc repository of prebuilt binary packages for SmartMachines. Some of these packages are already installed by default. You can use pkgsrc to add a package that&#39;s in the repository but not in the default installation or to add a package from another source.</p>
<p>Joyent runs building and testing systems, builds binary packages using pkgsrc for all software that are available at a binary package repository, and uses these binary packages to create SmartMachine templates, to clone for deployment to customer. This means that when you need something that&#39;s not installled by default on an SmartMachine, you do not have to resort to building from source (although you can, of course), but can simply use our binary package repository and/or employ pkgsrc to build your own.</p>
<p>;SmartMachines deployed before March 22, 2008 used Blastwave instead of pkgsrc.See Working with Older SmartMachines</p>
<h1>Where pkgsrc Installs Files</h1>
<p>Pkgsrc installs files in several directories within /opt/local. If you&#39;re used to other Unix-like systems, you might expect to find these files in /usr/local. (In fact, there is a symlink from /usr/local to /opt/local in case your fingers have gotten used to typing that instead.)</p>
<p>||Directory     ||Description<br>|/opt/local     |This is where pkgsrc installs software including binaries, libraries, configuration files, supporting files, examples, documentation etc.<br>|/opt/local/etc     |Contains configuration files.<br>|/opt/local/share/examples     |Example configuration files.</p>
<p>When you add a new package, pkgsrc installs sample configuration files here, and then copies them to /opt/local/etc if they don&#39;t already exist there.<br>|/var/db/pkg     |This directory contains two directories that contain the database of installed and available packages. If you delete or damage these directories, you will not be able to use the pkgsrc management tools.<br>As noted in the table above, pkgsrc copies configuration files into /opt/local/etc only if they don&#39;t already exist there. That means that you will not lose any custom configuration when you update, remove, or reinstall a pacakage. If you break your configuration file, you can always get a clean one from /opt/local/share/examples.</p>
<p>However, for some preinstalled software such as Apache and MySQL, your SmartMachine comes with preconfigured files in /opt/local/etc which are not mirrored in /opt/local/share/examples.</p>
<h1>Releases</h1>
<p>Joyent follows pkgsrc&#39;s quarterly release scheme (&#39;2009Q1&#39;, &#39;2009Q1&#39; etc.), and generally rebuilds the repository for each new release published. The way the pkgsrc community updates packages works as follows:</p>
<ul>
<li>All changes are applied to the current (trunk) CVS branch of the pkgsrc meta tree. In general, Joyent does not use the HEAD branch.</li>
<li>Security patches are backported to the last quarterly release. Joyent generally attempts to keep its current binary package build in sync with the current pkgsrc branch, but updates are being made in the order of weeks rather than days.</li>
<li>When the quarterly interval comes up, the current branch is frozen and becomes the new quarterly release. For instance, 2009Q2 was released in early July, and 2009Q3 in October. When a new release is made, Joyent starts rebuilding its package repository, and may cut a new SmartMachine template based on the updated package set.<br>The important part is that only the current release is getting any security patches. Older releases are never updated, which is why it&#39;s crucial to update to the latest release. In certain cases, Joyent may backport updates to earlier binary package sets.</li>
</ul>
<p>While you do not have to strictly adhere to the release cycle when updating packages, very much often deep system libraries (e.g. openssl, db4 or libxml2) are bumped when launching a new release, so you may be forced to update half of your software world by pulling in more recent versions of other packages, to match what they were build against. Hence depending on the exact situation and your needs, you should choose between updating particular packages, and updating your entire SmartMachine to a new release.</p>
<p>To find out which package release your SmartMachine has, use this command:</p>
<pre><code>cat /opt/local/etc/pkg_install.conf</code></pre>
<h1>Package Management</h1>
<p>The Joyent binary repository for SmartMachines lives at:</p>
<pre><code>http://pkgsrc.joyent.com/RELEASE/</code></pre>
<p>Where RELEASE is to be replaced with the pkgsrc release that your SmartMachine is currently populated with (see above).</p>
<p>If your SmartMachine runs 2009Q1 at least, we strongly recommend using <strong>pkgin</strong> to add/remove/update installed packages. Pkgin is an apt/yum like tool that was recently coded by a 3rd party programmer for use with pkgsrc.</p>
<p>The default pkgsrc tools to manage packages are pkg<em>add, pkg<em>delete, pkg_info (and a few others), lumped into the __pkg_install package</em></em>. They work fine for package addition/removal, but are not generally suited well for package updates, especially when dependencies are involved.</p>
<h1>Updating to a newer release</h1>
<p>By updating to a newer release, we mean that you update every installed package on your SmartMachine to a more recent version that&#39;s available under the new release. This is a complex operation and there are various tools that can help you. Our favorite tested tool at this point is <strong>pkg_chk</strong>.</p>
<p>;It makes sense to have a plan before you start updating your entire SmartMachine though. The update typically takes a few minutes, and software may become unavailable during the process, so it&#39;s a good measure to think of it as &#39;server maintenance&#39; or &#39;downtime&#39; even, and plan accordingly. Can you claim a maintenance and shut off all services? Good. If not, letting your users/visitors know at least will work - just in case.</p>
<p>These are the upgrade paths that we tested and documented:</p>
<p>||You have...     ||You want...     ||Follow these instructions<br>|2007Q3     |2009Q1    |instructions<br>|2007Q4     |2008Q2    |instructions<br>|2007Q4     |2009Q1    |instructions<br>|2008Q2     |2009Q1    |instructions<br>|2009Q1     |2009Q4    |instructions<br>|2009Q1     |2010Q1    |instructions<br>|2009Q4     |2010Q1    |instructions</p>
<p>;If you should happen to &quot;break&quot; pkgsrc and no longer be able to log in as &#39;jill&#39;, try logging in as the &#39;admin&#39; user instead. We leave this one with Sun&#39;s copy of &#39;bash&#39; as a shell, rather than the one from pkgsrc - just in case.</p>
<h1>Building from pkgsrc yourself</h1>
<p>Any pkgsrc-based SmartMachine already has pkgsrc bootstrapped, and the building tools installed. In order to build your own packages (e.g. those that exist in pkgsrc, but are not built by Joyent for whatever reason), you only need to download a pkgsrc meta tree, and start building - pkgsrc will pick up existing packages and will not try to build them again.</p>
<p>You may decide to bootstrap your very own pkgsrc setup (i.e. ignore what&#39;s already installed), maybe to create a separate installation under a new prefix, or to get pkgsrc going on a pre-pkgsrc (Blastwave) Accelerator. Note that there is normally no need for this, as our SmartMachines already come bootstrapped and ready to use as far as pkgsrc is concerned.</p>
<p>In both cases, see this comprehensive page on <strong>using your own pkgsrc</strong>.</p>
<h1>Reference</h1>
<p><a href="http://www.netbsd.org/docs/pkgsrc/">pkgsrc documentation</a></p>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Joyent+Zeus+SmartMachine.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Joyent+Zeus+SmartMachine.md">Joyent+Zeus+SmartMachine.md</a></h1><br/><p>The Zeus TM (Traffic Manager) controls your application traffic, inspecting, transforming and routing requests as it load-balances them across the application infrastructure, all through an easy to use GUI interface.</p>
<h1>Product Differentiation</h1>
<p>|| || || || ||Features || ||<br>||Description    ||Load Balancing    ||SSL Offload    ||Content Caching    ||Real Time Analytics    ||Bandwidth Management    ||Service Level Monitoring<br>|﻿Zeus Simple Load Balancer - 200 Mbps|v    | | | | |<br>|Zeus Load Balancer - 200 Mbps|v| | | | |<br>|ZXTM Standard   - 200 Mbps|v|v|v| | |<br>|ZXTM Hi-Throughput - 1 Gbps|v|v|v| | |<br>|ZXTM Enterprise - 200 Mbps|v|v|v|v|v|v<br>|ZXTM Enterprise Hi-Throughput - 1 Gbps    |v|v|v|v|v|v</p>
<h1>Logging into Zeus TM</h1>
<p>Open the Zeus admin in your browser, in this form:</p>
<pre><code>https://&lt;yourPublicIp&gt;:9090/</code></pre>
<p>You may find the public IP address as the first IP address in your machine details in the portal.</p>
<p>Use username &#39;admin&#39; and the password provided in the machine credentials next &#39;zeus&#39;.</p>
<h1>TrafficScript tricks</h1>
<h1>Adding a X-Forwarded-For header</h1>
<p>Add a traffic script rule which contains:</p>
<pre><code>http.setHeader(&quot;X-Forwarded-For&quot;, request.getRemoteIP());</code></pre>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="LeftMenu.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=LeftMenu.md">LeftMenu.md</a></h1><br/><p><div id="main"></p>
<p><ul id="browser" class="filetree treeview-famfamfam"></p>
<p><ul></p>
<li class="closed"><span class="folder">MiCloud資訊</span><br><ul><br><li class="closed"><span class="file"><a href="http://micloud.tw">MiCloud官方網站</a><br><li class="closed"><span class="file"><a href="http://micloud.tw/ch/price/price">MiCloud產品規格</a><br><li class="closed"><span class="file"><a href="mailto:service@micloud.tw">MiCloud服務信箱</a><br><br></ul><br></li><br><li class="closed"><span class="folder">MiCloud自助服務操作資訊</span><br><ul><br><li class="closed"><span class="folder">申請及訂購</span><br><ul><br><br><li class="closed"><span class="file">[申請帳號](Apply MiCloud Account - new)<br><li class="closed"><span class="file">[訂購主機](Order a Machine)<br><li class="closed"><span class="file">[2XS 256MB主機使用說明](Instruction for 2XS Machine)<br></ul><br></li><br><li class="closed"><span class="folder">線上管理</span><br><ul><br><li class="closed"><span class="folder">帳戶管理</span><br><ul><br><li class="closed"><span class="file">[帳戶資訊管理](MiCloud Account Modify)<br><li class="closed"><span class="file">[SSH金鑰管理](MiCloud SSH Key)<br><li class="closed"><span class="file">[登入密碼管理](Micloud Password)<br><br><li class="closed"><span class="file">[付款方式](Pay way)<br><br><li class="closed"><span class="file">[帳單資料](MiCloud billing)<br><br></ul><br></li>

<li class="closed"><span class="folder">主機管理</span><br><ul><br><li class="closed"><span class="file">[主機清單]( Manage your Machines)<br><li class="closed"><span class="file">[使用系統快照備份及還原](Snapshot recovery)<br><li class="closed"><span class="file">[預載軟件之預設密碼](MiCloud Credential Description)<br><li class="closed"><span class="file">[重新啟動、關閉與刪除主機](Server Restart From Portal)<br><li class="closed"><span class="file">[使用MiCloud分析工具-DTrace](Using Cloud Analytics)<br><li class="closed"><span class="file">[Windows主機掛載硬碟](Mounting the Data Volume on Windows)<br><li class="closed"><span class="file">[遠端連線Windows主機](connect windows)<br><li class="closed"><span class="file">[系統監控](Monitor System)<br><li class="closed"><span class="file">[時區設定](Linux Update Timezone)<br><li class="closed"><span class="file">[DNS管理](DNS Manage)<br><br></ul><br></li><br></ul><br></li><br><li class="closed"><span class="folder">更新主機套件庫來源及安裝軟體</span><br><ul><br><li class="closed"><span class="file">[變更套件庫來源及安裝軟體(Ubuntu)](Ubuntu mirror site)<br><li class="closed"><span class="file">[變更套件庫來源及安裝軟體(Debian)](Debian mirror site)<br><li class="closed"><span class="file">[變更套件庫來源及安裝軟體(CentOS)](CentOS mirror site)<br><li class="closed"><span class="file">[變更套件庫來源及安裝軟體(Fedora)](Fedora mirror site)<br><li class="closed"><span class="file">[更新套件庫及安裝軟體(SmartOS)](Install SmartOS Packages)<br><br></ul><br></li>

<li class="closed"><span class="folder">金鑰相關使用教學</span><br><ul><br><li class="closed"><span class="file">[金鑰產生與連線教學(Windows)](SSH KeyGen &amp; Connect Tutorial - Windows)<br><li class="closed"><span class="file">[金鑰產生與連線教學(Linux/Unix)](SSH KeyGen &amp; Connect Tutorial - Linux or Unix)<br><li class="closed"><span class="file">[金鑰產生與連線教學(MacOS)](SSH KeyGen &amp; Connect Tutorial - MacOS)<br><li class="closed"><span class="file">[主機金鑰設置與連線教學](free machine &amp; Connect Tutorial)<br></ul><br></li><br><li class="closed"><span class="folder">檔案上傳教學</span><br><ul><br><li class="closed"><span class="file">[使用指令上傳檔案(Windows至Linux)](File Upload Tutorial - PSCP)<br><li class="closed"><span class="file">[使用指令上傳檔案(Linux/Unix)](File Upload Tutorial - Linux or Unix)<br><li class="closed"><span class="file">[使用指令上傳檔案(MacOS)](File Upload Tutorial - MacOS)<br><li class="closed"><span class="file">[使用軟體上傳檔案(WinScp)](File Upload Tutorial - WinScp)<br><li class="closed"><span class="file">[使用軟體上傳檔案(FileZilla)](File Upload Tutorial - FileZilla)<br><li class="closed"><span class="file">[使用指令上傳檔案(Windows至Windows)](File Upload Tutorial - Windows to Windows)<br><li class="closed"><span class="file">[使用指令上傳檔案(Linux至Windows)](File Upload Tutorial - Linux to Windows)<br></ul><br></li>

<li class="closed"><span class="folder">Hostname設定教學</span><br><ul><br><li class="closed"><span class="file">[SmartOS Hostname設置](Setting hostname on SmartOS)<br><li class="closed"><span class="file">[Linux Hostname設置](Setting hostname on Linux)<br><li class="closed"><span class="file">[Windows Hostname設置](Setting hostname on Windows)<br></ul><br></li>

<li class="closed"><span class="folder">常見之設定</span><br><ul><br><li class="closed"><span class="file">[swap設置](About Swap Adjust)<br><li class="closed"><span class="file">[設定IPFilter](Setting IPFilter)<br><li class="closed"><span class="file">[使用memcached](Using Memcached)<br><li class="closed"><span class="file">[啓動SmartOS Plus上之SMTP](Enable SMTP on SmartOS Plus)<br><li class="closed"><span class="file">[使用svcadm來管理系統服務](Svcadm usage)<br><li class="closed"><span class="file">[建置Nagios網路監控主機](Setting Nagios)<br><li class="closed"><span class="file">[在SmartOS上設置SMF](Setting SMF on SmartOS)<br></ul><br></li>



<p></ul><br></li></p>
<li class="closed"><span class="folder">MiCloud第三方服務主機</span><br><ul><br><li class="closed"><span class="file">[安裝Percona ](Percona install)<br><li class="closed"><span class="file">[安裝Riak](Riak SmartMachine)<br><li class="closed"><span class="file">[Stingray 基本操作說明](Stingray SmartMachine)<br><li class="closed"><span class="file">[安裝MongoDB 與操作說明](MongoDB SmartMachine)<br><br><li class="closed"><span class="folder">Node.js</span><br><ul><br><li class="closed"><span class="file">[安裝Node.js](Installing Node.js on a Joyent SmartOS SmartMachine)<br><li class="closed"><span class="file">[Npm安裝及操作](Npm usage)<br></ul><br></li><br><li class="closed"><span class="folder">MySQL</span><br><ul><br><br><li class="closed"><span class="file">[SmartOS上安裝及設定](Install MySQL on SmartOS)<br><li class="closed"><span class="file">[Linux上安裝及設定](Install MySQL on Linux)<br><br></ul><br></li>

<li class="closed"><span class="folder">Virtualmin/Webmin操作</span><br><ul><br><br><li class="closed"><span class="file">[關閉或重啓Webmin](Disabling or Restarting Webmin)<br><li class="closed"><span class="file">[使用Virtuakmin管理SSL認證](Managing SSL Certificates with Virtualmin)<br><li class="closed"><span class="file">[更新Webmin](Updating Webmin)<br><li class="closed"><span class="file">[使用Webmin回復SmartMachine密碼](Recovering a Forgotten SmartMachine Password)<br><li class="closed"><span class="file">[設定新的Domain](Setting Up a New Domain)<br></ul><br></li><br></ul><br></li><br><li class="closed"><span class="folder">MiCloud實例及API</span><br><ul><br><li class="closed"><span class="file">[在MiCloud上建置我的雲端服務](MiCloud Self-Service Portal)<br><li class="closed"><span class="file">[使用DTrace分析MySQL](Using DTrace on MySQL)<br><li class="closed"><span class="folder">MiCloud API案例說明</span><br><ul><br><li class="closed"><span class="file">[MiCloud API](MiCloud API)<br><li class="closed"><span class="file">[MiCloud API實做案例(一)](MiCloud API Implement 1)<br><li class="closed"><span class="file">[MiCloud API實做案例(二)](MiCloud API Implement 2)<br><br></ul><br></li><br></ul><br></li>

<li class="closed"><span class="folder">常見問題</span><br><ul><br><li class="closed"><span class="file"><a href="PuttyLoginErrorCannotAgreeAClientToServerCipher">PUTTY連線錯誤訊息：Cannot Agree  A Client To Server Cipher</a><br><li class="closed"><span class="file">[SmartOS如何安裝Oracle](SmartOS Install Oracle)<br><br><li class="closed"><span class="file">[何謂Smart Machine?](What is Smart Machine?)<br><br><li class="closed"><span class="file">[如何更新主機時區？](Update Timezone)<br><li class="closed"><span class="file">[如何檢視已使用的資源?](View Used Resources)<br><li class="closed"><span class="file">[如何檢視網路路由?](View network routing instructions)<br><li class="closed"><span class="file">[常用指令集有哪些?](Used commmands)<br><li class="closed"><span class="file">[MiCloud的特點是什麼？](Micloud Features)<br></ul><br></li>

<li class="closed"><span class="folder">Blog分享</span><br><ul><br><li class="closed"><span class="file">[Micloud API](Share by qrtt1)<br></ul><br></li>

<p></ul><br></li></p>
<p><li class="closed"><span class="folder"><a href="Main">回首頁</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="LeftMenuFooter.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=LeftMenuFooter.md">LeftMenuFooter.md</a></h1><br/><hr>
<div style="text-align:center"><br>Powered by MiCloud<br></div>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Legacy+Customer+Technical+FAQ.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Legacy+Customer+Technical+FAQ.md">Legacy+Customer+Technical+FAQ.md</a></h1><br/><h1>High-level Technical FAQ for Joyent Cloud Existing Customers</h1>
<h1>I want to move my apps to the new Joyent Cloud. How can I do that?</h1>
<p>Here’s some basic advice. Contact support@joyent.com for more complex installation questions.</p>
<h1>Moving a website:</h1>
<p>Make a tar of the website: gtar cvfz website.tar.gz website_directory<br>Add your ssh keys from the old source server to the new destination server<br>Move the website.tar.gz file using rsync: rsync -e ssh -ruav website.tar.gz admin@destination_ip:/website/directory/location<br>Uncompress/Unpackage tar file in the destination directory: gtar xvfz website.tar.gz</p>
<h1>Moving a MySQL database:</h1>
<p>Stop your database server: svcadm disable mysql<br>Backup database: mysqldump --all-databases -p &gt; dump.sql<br>Move dump.sql file via rsync: rsync -e ssh -ruav dump.sql admin@destination_ip:/database/directory/location<br>Import data: mysqlimport -p &lt; dump.sql</p>
<h1>Will I need to test my applications in the new Joyent Cloud?</h1>
<p>Yes, you will need to test your applications to ensure there are no missing dependencies or issues with updated versions of the application or the Joyent Cloud SmartOS. The new platform includes both an updated OS with security and performance patches, as well as a new template. You may need to have all the appropriate packages and modules installed and running on in order to ensure that your application works correctly on both the OS and software versions. This may require configuration or installation of necessary modules.</p>
<p>See Installing Software for help with installing software.</p>
<h1>Can I link my SmartMachines running in the old Joyent Cloud to SmartMachines I launch in the new Joyent Cloud?</h1>
<p>You will not be able to link machines in the legacy (my.joyent) and new clouds via the private network. You will be able to link via public IP’s to your old Joyent Cloud machines. Further, you will need to delete servers from your legacy (my.joyent) account when you’re finished with them to end billing on the legacy (my.joyent) my.joyent cloud platform.</p>
<h1>Will I be billed for running in both the new and old clouds at the same time?</h1>
<p>Yes, but….The legacy (my.joyent) cloud accounting system bills at the beginning of the month. The new joyent cloud bills at the end of the month. This is the equivalent of your landlord changing your billing from beginning of month to end of the month, mid lease. So you will have 30 days of no overlapping billing to ease your transition. After that period, you will be billed for both clouds as long as you have servers running in those clouds.</p>
<h1>Can Joyent migrate or clone my servers for me?</h1>
<p>No. Because the new Joyent Cloud runs on an entirely new underlying software platform, you will need to move and test the software yourself against the new cloud servers. The two clouds are operated separately and not integrated for cloning or migrations. However, with the Joyent Cloud Public API you will be able to autoscript deployment and server set-up for quick horizontal scaling.</p>
<h1>What about my existing NFS storage?</h1>
<p>Contact support@joyentcloud.com. We should be able to mount your existing NFS storage to your new architecture.</p>
<h1>Can I keep the same IP addresses?</h1>
<p>No, you will be issued new IP addresses, both public and private.</p>
<h1>Do I have to use SSH keys to use Joyent?</h1>
<p>Yes. In order to access a newly purchased machine from the new Joyent Cloud portal, an SSH key is required. However, you can modify this after you order to revert to the former method (user ID / pw) if you prefer. You may also build this credentialing information into custom scripts to be accessed through the Joyent Cloud Public API to make those changes on scripted provisioning. Information will be made available in the Joyent Cloud Wiki.</p>
<h1>I’m getting errors on quota. How do I raise my limits?</h1>
<p>Please contact support@joyentcloud.com or sales@joyentcloud.com to have your quotas raised.</p>
<h1>Is this everything? Will Joyent have more features or server types available?</h1>
<p>Most definitely. This is <em>only</em> the initial deployment of the new and improved Joyent cloud. Joyent has a long list of new virtual servers, OS’s, optimized appliances, products and PaaS solutions that will be added weekly going forward. We will also be integrating New Relic’s advanced application monitoring into the Joyent Cloud UI, as well as more cloud analytics visualizations and instructions. Keep checking our announcements, blog and newsletters for further details.</p>
<h1>Whats the catch? Why is pricing so much cheaper than the old pricing? Can I get this pricing on my existing account?</h1>
<p>In building the newly released cloud platform, we have gained tremendous efficiencies and cost improvements on both the underlying hardware and the software management. Additionally, we’ve empowered our customers to achieve a frictionless cloud that gives them benefits like dynamic server resizing, a public API, and comprehensive monitoring and analytics tools. The combination of lower hardware costs, lower software maintenance costs, and a more frictionless commerce and management capability on the user side allows us to pass big savings on to our customers.</p>
<h1>The new pricing is great. Can I get it on the legacy (my.joyent) Joyent Cloud platform, too?</h1>
<p>Unfortunately, no. In order to take advantage of the new pricing, you must be running on the new Joyent Cloud platform. Joyent will not be offering any discounts to existing my.joyent platform customers due to the pricing change on the new platform.</p>
<h1>I’m having issues resizing my Smartmachine. Whats wrong?</h1>
<p>First, if you are downgrading your machine, you must first check to make sure that the storage on your server is small enough to fit in the new server size. You must then confirm that the memory consumption of your processes (both swap and rss), is less than the amount of the new server you wish to size into. In some cases in sizing up, you will be required to contact support, so we can migrate your server to a new physical machine with room to accomodate your memory needs. This will require a short reboot. You may contact support@joyent.com if you are having any issues or have questions about resizing your server.</p>
<h1>Can I resize my Linux or Windows virtual Server?</h1>
<p>Not at this time. Upgrading or downgrading windows or linux will require a migration into a larger or smaller server. You may need to order a new machine, and migrate your files over to the new server. You will not be able to keep your same IP address at this time.</p>
<h1>Help What do these SmartOS Packages Mean?</h1>
<p>We are in the process of renaming our packages in the portal. The specific packages will have these names with versions which will be required for our API users to call on the correct packages for auto-provisioning. To understand more specifics about what is included on the SmartOS packages, you may find that information here.</p>
<h1>What is the difference in all the Zeus packages?</h1>
<p>See the chart in Joyent Zeus SmartMachine to learn more about the different configurations.</p>
<h1>How do I access virtualmin/webmin on my SmartOS SmartMachines?</h1>
<p>Virtualmin comes on non-appliance SmartOS SmartMachines. You can access it at <a href="https://your-public-ip:10000">https://your-public-ip:10000</a>. The username and password are available in your my.joyentcloud.com portal. Click on the server, then click “show credentials.”</p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Linux+KVM+Time+Drift.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Linux+KVM+Time+Drift.md">Linux+KVM+Time+Drift.md</a></h1><br/><h1>Linux NTP Server Configuration</h1>
<p>Linux KVM can have time drift(losing or gaining seconds to minutes of time)</p>
<p>To fix this you need to do the following:</p>
<ol>
<li>Install ntp and ntpdate via your package manager</li>
</ol>
<p>Debian/Ubuntu -</p>
<p><code>apt-get install ntp</code></p>
<p>or</p>
<p>CentOS/Fedora -</p>
<p><code>yum install ntp</code></p>
<ol>
<li>Edit your cron file with crontab -e, add the following line</li>
</ol>
<p><code>30 * * * * ntpdate pool.ntp.org &gt; /dev/null 2&gt;&amp;1</code></p>
<ol>
<li><p>Run ntpdate pool.ntp.org from command line to update any current drift</p>
</li>
<li><p>Edit /boot/grub/menu.lst, add the following to the first line that starts with kernel, divider=10</p>
</li>
</ol>
<p>eg.</p>
<pre><code>kernel /boot/vmlinuz-2.6.32-220.2.1.el6.x86_64 ro root=/dev/vda1 rd_NO_LUKS rd_NO_LVM rd_NO_MD rd_NO_DM LANG=en_US.UTF-8 SYSFONT=latarcyrheb-sun16 KEYBOARDTYPE=pc KEYTABLE=us crashkernel=auto rhgb quiet nohpet divider=10</code></pre>
<ol>
<li>Reboot your system</li>
</ol>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Linux+KVM+Tuning.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Linux+KVM+Tuning.md">Linux+KVM+Tuning.md</a></h1><br/><p>Here are some performance options that may assist in tuning performance:</p>
<p>What is swappiness and how do I change it?<br>The swappiness parameter controls the tendency of the kernel to move processes out of physical memory and onto the swap disk. Because disks are much slower than RAM, this can lead to slower response times for system and applications if processes are too aggressively moved out of memory.</p>
<p>swappiness can have a value of between 0 and 100<br>swappiness=0 tells the kernel to avoid swapping processes out of physical memory for as long as possible<br>swappiness=100 tells the kernel to aggressively swap processes out of physical memory and move them to swap cache<br>The default setting in Ubuntu is swappiness=60. Reducing the default value of swappiness will probably improve overall performance for a typical Ubuntu desktop installation. A value of swappiness=10 is recommended, but feel free to experiment. Note: Ubuntu server installations have different performance requirements to desktop systems, and the default value of 60 is likely more suitable.</p>
<p>To check the swappiness value</p>
<p>cat /proc/sys/vm/swappiness<br>To change the swappiness value A temporary change (lost on reboot) with a swappiness value of 10 can be made with</p>
<p>sudo sysctl vm.swappiness=10<br>To make a change permanent, edit the configuration file with your favorite editor:</p>
<p>gksudo gedit /etc/sysctl.conf<br>Search for vm.swappiness and change its value as desired. If vm.swappiness does not exist, add it to the end of the file like so:</p>
<p>vm.swappiness=10<br>Save the file and reboot.</p>
<p>divider=10 kernel parameter<br>CentOS/Debian/Ubuntu/Fedora can benefit from this kernel boot option, it causes the vm consumes less CPU during idle times.</p>
<p>Edit the /boot/grub/menu.lst file and add divider=10 to the first kernel line</p>
<p>Reboot</p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Linux+Repository+Update.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Linux+Repository+Update.md">Linux+Repository+Update.md</a></h1><br/><h1>Server Repository Update</h1>
<p>MiCloud為維護全球使用者的利益以及OS廠商之版本著作權益，我們提供的Linux主機會盡量維持原廠登錄的Repository，如果您希望指定特定的Repository出處，可參考Wiki來修改至您偏好的下載點。</p>
<h1>Ubuntu/Debian Repository</h1>
<p>Repository定義檔位置：/etc/apt/sources.list.d/*.list<br>ex: 以安裝10gen Repository(for install mongodb)為例：在Repository定義檔位置新增加10gen.list檔案，指向10gen版本庫位置：</p>
<pre><code>echo &quot;deb http://downloads-distro.mongodb.org/repo/ubuntu-upstart dist 10gen&quot;

&gt; /etc/apt/sources.list.d/10gen.list</code></pre>
<p>建立好版本庫位置後，可以更新並安裝其上套件：</p>
<pre><code>sudo apt-get update
sudo apt-get install mongodb-10gen</code></pre>
<h1>CentOS/Fedora Repository</h1>
<p>Repository定義檔位置：/etc/yum.repos.d/*.repo<br>ex: 以安裝10gen Repository(for install mongodb)為例：在Repository定義檔位置新增加10gen.repo檔案，指向10gen版本庫位置：</p>
<pre><code># sudo vi /etc/yum.repos.d/10gen.repo
(新增下面內容)

[10gen]]([10gen)
name=10gen Repository
baseurl=http://downloads-distro.mongodb.org/repo/redhat/os/x86_64
gpgcheck=0
enabled=1</code></pre>
<p>建立好版本庫位置後，可以更新並安裝其上套件：</p>
<pre><code>yum update
yum install mongo-10gen mongo-10gen-server</code></pre>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Linux+Update+SSH+Key.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Linux+Update+SSH+Key.md">Linux+Update+SSH+Key.md</a></h1><br/><h1>Linux主機更新SSH Key</h1>
<p>MiCloud Linux主機於開通主機時會將您帳戶資料中之SSH Key匯入新開通的Linux主機中，匯入的目錄位於：$HOME/.ssh/authorized_keys檔案中，此為一次性設定，日後再登錄至MiCloud Customer Portal之SSH Key將不會再寫入Linux主機中(SmartOS之認證為結合SSH Key Database之認證，因此不在此限制下)。若您需要更新SSH Key，可採下面步驟：</p>
<ul>
<li>產生SSH Key:<br>請參考：“MiCloud自助服務操作資訊 &gt; SSH金鑰相關使用教學”中金鑰產生部分。</li>
</ul>
<ul>
<li>將Public Key寫入Server端$HOME/.ssh/authorized_keys檔案中，以斷行隔開</li>
</ul>
<p><code>vi $HOME/.ssh/authorized_keys</code></p>
<p>增加您產生的public key至該檔案中</p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Linux+Update+Timezone.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Linux+Update+Timezone.md">Linux+Update+Timezone.md</a></h1><br/><h1>Linux (Redhat / Fedora / CentOS) 設定時間的方式</h1>
<p>(1) copy /usr/share/zoneinfo/* 內的確切時區資料檔案為 /etc/localtime</p>
<p><code># cp /usr/share/zoneinfo/GMT+0 /etc/localtime</code></p>
<p>(2) 執行 date -u</p>
<p><code># date -u</code></p>
<p>(3) 輸入 date 看看是否已經是正確時區</p>
<p><code># date</code></p>
<p>(4) 重開後生效</p>
<p><code># reboot</code></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Linux+Virtual+Machine+FAQ.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Linux+Virtual+Machine+FAQ.md">Linux+Virtual+Machine+FAQ.md</a></h1><br/><p>Frequently Asked Questions</p>
<h1>What is the difference between a Linux Virtual Machine and a SmartMachine?</h1>
<p>Both SmartMachines and Linux Virtual Machines are virtual servers that give you the power of running an entire server. SmartMachines use SmartOS, which is major fork of OpenSolaris. Linux Virtual Machines run one of three popular Linus distributions: Debian, Ubuntu, or CentOS.</p>
<h1>What is my host name?</h1>
<p>To find your host name, use the hostname command.</p>
<h1>Help The software I need is missing.</h1>
<p>Linux Virtual Machines come preconfigured with a very small number of tools, such as Perl, Python, bash, vim, diff, and so on. To install a web server or a database, use the package manual for your Linux distribution: apt for Debian and Ubuntu, yum for CentOS.</p>
<h1>What is my IP address?</h1>
<p>The following one-line script displays the IP address of your Virtual Machine:</p>
<pre><code>/sbin/ifconfig eth0|grep inet|awk {&#39;print $2&#39;}|cut -d&quot;:&quot; -f2</code></pre>
<h1>How do I add another Linux instance?</h1>
<p>To add another Linux machine, go to <a href="https://my.joyentcloud.com">https://my.joyentcloud.com</a>.</p>
<h1>How do I login to my Linux instance?</h1>
<p>When you request a Virtual Machine, you should first make sure you have added a valid SSH key via <a href="https://my.joyentcloud.com">https://my.joyentcloud.com</a>. You will be using this key to access your new Linux instance. Once provisioned, you can login as the root user using your machine&#39;s IP address.</p>
<pre><code>ssh root@192.0.2.10</code></pre>
<p>Once you log in, you may want to do the following:</p>
<ul>
<li>Change the root user&#39;s password.</li>
<li>Create an admin user account</li>
<li>Disable SSH root access</li>
</ul>
<pre><code>What Linux Distribution am I running?</code></pre>
<p>The /proc/version file contains information about the Linux distribution. If you use the command cat /proc/version, you&#39;ll see one of these:</p>
<pre><code>CentOS
Linux version 2.6.18-164.el5 (mockbuild@builder10.centos.org)
(gcc version 4.1.2 20080704 (Red Hat 4.1.2-46)) #1 SMP Thu Sep 3 03:28:30 EDT 2009</code></pre>
<pre><code>Ubuntu
Linux version 2.6.32-22-server (buildd@yellow)
(gcc version 4.4.3 (Ubuntu 4.4.3-4ubuntu5) ) #33-Ubuntu SMP Wed Apr 28 14:34:48 UTC 2010</code></pre>
<pre><code>Debian
Linux version 2.6.26-2-amd64 (Debian 2.6.26-19) (dannf@debian.org)
(gcc version 4.1.3 20080704 (prerelease) (Debian 4.1.2-25)) #1 SMP Wed Aug 19 22:33:18 UTC 2009</code></pre>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Main.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Main.md">Main.md</a></h1><br/><h1>歡迎使用</h1>
<p>歡迎使用MiCloud Wiki，我們將在此分享MiCloud的相關說明文件。</p>
<h2>我們的特色</h2>
<ul>
<li>MiCloud SmartMachines為優質虛擬環境，能快速建置資料庫與應用系統，提供比傳統的虛擬機更高的利用率與性能比。</li>
<li>SmartMachines擁有更動態CPU配置、搭配高效能Storage I/O處理能彈性有效率的執行任務。</li>
<li>大規模可伸縮的架構下，MiCloud SmartMachines將可支援數以萬計的用戶安心使用。</li>
</ul>
<h2>MiCloud採用作業系統虛擬化技術</h2>
<p>相較於一般所稱呼的「虛擬主機(Virtual Machines ) 」，以「SmartMachines」形容新型態的雲端平台服務。以SmartMachines為虛擬化運算平台，能夠運行多元雲端應用。在MiCloud上，我們提供市面上廣泛使用的三種作業系統：</p>
<ul>
<li>Linux：CentOS, Debian, Fedora, Ubuntu等主機</li>
<li>Windows：Windwos 2008 R2 Enterprise/Standard</li>
<li>SmartOS：Standard, Preload Services.</li>
</ul>
<p>如有其他建議，或需要我們改進的地方，請隨時連絡我們！</p>
<p><img src='images/Main-p1.png' width='650'  align='center'/></p>
<p>MiCloud客服信箱：<a href="mailto:service@micloud.tw">service@micloud.tw</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Manage+your+Machines.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Manage+your+Machines.md">Manage+your+Machines.md</a></h1><br/><h1>主機</h1>
<p>此頁可顯示您所建的機器與機器的IP與基本的資料(作業系統、記憶體、購買了多久以及目前狀態)</p>
<p>若您的機器過多也可於中間的藍色框框內輸入該台機器的資訊來做搜尋的動作</p>
<p><img src='images/Manage+your+Machines-p2.png' width='650' align='center'/><br>*  左邊藍色框框概述您的機器設備與相關訊息。</p>
<ul>
<li>右邊黃色框框則顯示您機器目前的狀態，以及開關機的按鈕。</li>
</ul>
<ul>
<li>點擊 <strong>Show Credentials</strong>(左邊紅色框框) 則會顯示您這台機器內[預載程式之預設密碼](Preload Software Default Password)</li>
</ul>
<p><img src='images/Manage+your+Machines-p1+-18.png' width='650' align='center'/><br><strong>登入說明請參考：[MiCloud Credential Description]</strong>](--登入說明請參考：[MiCloud Credential Description--)</p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Managing+SSL+Certificates+with+Virtualmin.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Managing+SSL+Certificates+with+Virtualmin.md">Managing+SSL+Certificates+with+Virtualmin.md</a></h1><br/><p>This page guides you through enabling SSL encryption for a domain and installing an SSL certificate through Virtualmin.</p>
<p>In this page:</p>
<h1>Enable SSL for your Domain</h1>
<ul>
<li>Log in to Virtualmin</li>
<li>Select a domain from the drop-down menu in the left-hand navigation pane. Your main domain is selected by default when you first login to Virtualmin. This is the domain for which you will enable SSL encryption.</li>
<li>Click Edit Virtual Server.</li>
<li>Click Enabled features and then select SSL website enabled? This assumes you already have Apache website enabled? turned on.</li>
<li>Click Save Virtual Server. A page will display a warning that SSL cannot be enabled for more than one domain on the IP address.</li>
<li><p>Click Yes, Modify Virtual Server to override and conclude with the SSL setup.</p>
<h1>Install the SSL Certificate via Virtualmin</h1>
</li>
<li><p>Sign in to Virtualmin</p>
</li>
<li>Click Server Configuration in the left-hand navigation, then click Manage SSL Certificate.</li>
<li>Click the New Certificate tab in the right frame.</li>
<li>Paste in the certificate and private key files into the respective input boxes, and click Install Now.</li>
</ul>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Managing+Your+SmartOS+SmartMachine.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Managing+Your+SmartOS+SmartMachine.md">Managing+Your+SmartOS+SmartMachine.md</a></h1><br/><p>Top level for subsequent topics</p>
<p>Virtualmin / Webmin</p>
<p>Setting up DNS</p>
<p>Starting and stopping processes</p>
<p>Adding new software</p>
<p>Adding users</p>
<p>Maintenance</p>
<ul>
<li>12 Child Pages :</li>
</ul>
<ul>
<li><em>[Setting the Host Name of a SmartMachine]](</em>  *[Setting the Host Name of a SmartMachine)</li>
</ul>
<ul>
<li><em>[Rebooting or Shutting Down a SmartMachine]](</em>  *[Rebooting or Shutting Down a SmartMachine)</li>
</ul>
<ul>
<li><em>[Host Names, IP Addresses, Zone Names, and Reverse Records]](</em>  *[Host Names, IP Addresses, Zone Names, and Reverse Records)</li>
</ul>
<ul>
<li><em>[Installing Software on a SmartMachine]](</em>  *[Installing Software on a SmartMachine)</li>
</ul>
<ul>
<li><em>[Updating Webmin]](</em>  *[Updating Webmin)</li>
</ul>
<ul>
<li><em>[Managing Resource Usage]](</em>  *[Managing Resource Usage)</li>
</ul>
<ul>
<li><em>[Recovering a Forgotten SmartMachine Password]](</em>  *[Recovering a Forgotten SmartMachine Password)</li>
</ul>
<ul>
<li><em>[Setting Up a New Domain]](</em>  *[Setting Up a New Domain)</li>
</ul>
<ul>
<li><em>[About the Service Management Facility]](</em>  *[About the Service Management Facility)</li>
</ul>
<ul>
<li><em>[Using Memcached]](</em>  *[Using Memcached)</li>
</ul>
<ul>
<li><em>[Managing SSL Certificates with Virtualmin]](</em>  *[Managing SSL Certificates with Virtualmin)</li>
</ul>
<ul>
<li><em>[Security with IPFilter]](</em>  *[Security with IPFilter)</li>
</ul>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="menu.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=menu.md">menu.md</a></h1><br/><p><a href="/index.html?page=ApplyAndOrder.md"><img width="15px" src="images/point.png"/>自助服務操作資訊</a></p>
<p><a href="/index.html?page=3PartyCloudServer.md"><img width="15px" src="images/point.png"/>MiCloud第三方服務主機</a></p>
<p><a href="/index.html?page=MiCloudCloudAPI.md"><img width="15px" src="images/point.png"/>雲端實例及API</a></p>
<p><a href="/index.html?page=QNA.md"><img width="15px" src="images/point.png"/>常見問題</a></p>
<p><a href="/index.html?page=BlogShare.md"><img width="15px" src="images/point.png"/>Blog分享</a></p>
<hr>
<p><a href="http://micloud.tw"><img width="15px" src="images/point.png"/> MiCloud官方網站</a></p>
<p><a href="http://blogger.micloud.tw"><img width="15px" src="images/point.png"/> MiCloud Blog</a></p>
<p><a href="http://peihsinsu.github.com/wikitpage"><img width="15px" src="images/point.png"/> 本站由WikitPage建置</a></p>
<p><small>2013 Copy Right @ Power By MiCloud.TW</small></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="MiCloud+Account+Modify-d.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=MiCloud+Account+Modify-d.md">MiCloud+Account+Modify-d.md</a></h1><br/></p><hr style="border-top: 1px dotted #f00;"/><p  id="MiCloud+Account+Modify.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=MiCloud+Account+Modify.md">MiCloud+Account+Modify.md</a></h1><br/><h1>MiCloud帳戶資訊修改</h1>
<p>影片:<a href="http://www.youtube.com/watch?v=qyEhOfV7GA0">MiCloud帳戶資訊管理</a></p>
<div align="center"><br><embed width="420" height="345" src="http://www.youtube.com/v/qyEhOfV7GA0&hd=1" type="application/x-shockwave-flash"></embed><br></div>

<p>若您還未註冊<strong>MiCloud</strong>，請於網頁左上角點選右邊選項＜<strong>註冊</strong>＞<a href="/index.html?Apply+MiCloud+Account-new.md">申請帳號</a></p>
<p>若您已註冊完<strong>MiCloud</strong>，請於網頁左上角點選左邊選項＜<strong>登入</strong>＞。</p>
<h2><img src='images/MiCloud+Account+Modify-p1-2.png' width='650' align='center'/></h2>
<h1>登入與帳戶設定</h1>
<p>進入登入頁面輸入您的帳號與密碼</p>
<h2><img src='images/MiCloud+Account+Modify-p1+-2.png' width='650' align='center'/></h2>
<h1>MiCloud產品購買頁面</h1>
<p>登入後系統將自動導向訂購MiCloud產品頁面</p>
<p>若您第一次登入Micloud請先於右上角點選<strong>帳戶設定</strong></p>
<p>設定您的__[付款方式](Pay way)</p>
<h2><img src='images/MiCloud+Account+Modify-p1+-5-2.png' width='650' align='center'/></h2>
<h1>帳戶設定</h1>
<p>在這個頁面裡能修改您的基本資料</p>
<p><img src='images/MiCloud+Account+Modify-p1+-6.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="MiCloud+Account+Modify_d.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=MiCloud+Account+Modify_d.md">MiCloud+Account+Modify_d.md</a></h1><br/></p><hr style="border-top: 1px dotted #f00;"/><p  id="MiCloud+API+Implement+1.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=MiCloud+API+Implement+1.md">MiCloud+API+Implement+1.md</a></h1><br/><h1>MiCloudAPI 實做案例</h1>
<h1>情境：</h1>
<p>我是一個購物網站的主機管理員，當季的商品促銷期間常會造成流量爆滿，大量的transaction會導至網頁資料傳輸與反應變慢，運行在傳統的主機服務架構下，此時除非新增加伺服器規格外，似乎無其他方法... 但在雲端的環境下，我可以規劃我的促消時間，依照網站上統計的到訪人數資料來讓我可以知道大約尖峰時期在甚麼時候，透過MiCloudAPI，我建置了一個可以依據我所規劃的時間來進行增加服務端點的架構。</p>
<p><img src='images/MiCloud+API+Implement+1-p12.png' width='450' align='center'/><br>圖：利用MiCloudAPI建構可延展架構</p>
<p>架構中利用admin server做系統資源的監控，並由admin server在需要延展服務的情況下進行呼叫MiCloudAPI，請MiCloudAPI在我的帳戶底下多生成一臺主機，並且利用admin在新平台上進行服務部署工作將服務所需資源作一個調適分配，最後通知前端Load Balancer將服務需求平均分攤至新加入之伺服器上。</p>
<h1>先介紹MiCloudAPI上的基本設定</h1>
<h1>設定主機與MiCloudAPI連線：</h1>
<pre><code>$ sdc-setup https://api.micloud.tw
Username (login): YOUR_ACCOUNT
Password:
The following keys exist in SmartDataCenter:
[1] key1]([1 key1)
Would you like to use an existing key? (yes) no
SSH public key: (/Users/xxxx/.ssh/id_rsa.pub)</code></pre>
<h1>設定環境變數</h1>
<pre><code>export SDC_CLI_URL=https://api.micloud.tw
export SDC_CLI_ACCOUNT=YOUR_ACCOUNT
export SDC_CLI_KEY_ID=id_rsa
export SDC_CLI_IDENTITY=$HOME/.ssh/id_rsa</code></pre>
<h1>檢視目前既有主機</h1>
<pre><code>$ sdc-listmachines
[
{
&quot;id&quot;: &quot;9626a584-187c-40b0-aa84-7f6f3a22ec44&quot;,
&quot;name&quot;: &quot;TS-72-SIMON-01&quot;,
&quot;type&quot;: &quot;smartmachine&quot;,
&quot;state&quot;: &quot;running&quot;,
&quot;dataset&quot;: &quot;sdc:sdc:smartosplus64:3.0.7&quot;,
&quot;ips&quot;: [
&quot;211.78.xxx.xxx&quot;
],
&quot;memory&quot;: 1024,
&quot;disk&quot;: 15360,
&quot;metadata&quot;: {},
&quot;created&quot;: &quot;2011-12-20T14:25:33+00:00&quot;,
&quot;updated&quot;: &quot;2011-12-29T04:08:25+00:00&quot;
}
]</code></pre>
<h1>檢視可用之DataSet</h1>
<pre><code>$ sdc-listdatasets
[
{
&quot;id&quot;: &quot;1f26e71c-2bb7-11e1-8266-5b14c4eccd12&quot;,
&quot;urn&quot;: &quot;sdc:admin:WinSrv2008R2STDX64CHT:1.1.0&quot;,
&quot;name&quot;: &quot;WinSrv2008R2STDX64CHT&quot;,
&quot;os&quot;: &quot;WinSrv2008R2STDX64CHT&quot;,
&quot;type&quot;: &quot;virtualmachine&quot;,
&quot;description&quot;: &quot;WinSrv2008R2STDX64CHT 1.1.0 VM image&quot;,
&quot;default&quot;: false,
&quot;requirements&quot;: {},
&quot;version&quot;: &quot;1.1.0&quot;,
&quot;created&quot;: &quot;2011-12-21T09:37:42+00:00&quot;
},
{
&quot;id&quot;: &quot;1f190e72-2d19-11e1-b4a2-7b85c599c5d2&quot;,
&quot;urn&quot;: &quot;sdc:admin:WinSrv2008R2ENTX64ENG:1.1.0&quot;,
&quot;name&quot;: &quot;WinSrv2008R2ENTX64ENG&quot;,
&quot;os&quot;: &quot;WinSrv2008R2ENTX64ENG&quot;,
&quot;type&quot;: &quot;virtualmachine&quot;,
&quot;description&quot;: &quot;WinSrv2008R2ENTX64ENG 1.1.0 VM image&quot;,
&quot;default&quot;: false,
&quot;requirements&quot;: {},
&quot;version&quot;: &quot;1.1.0&quot;,
&quot;created&quot;: &quot;2011-12-23T03:54:28+00:00&quot;
},...(skip)
]</code></pre>
<h1>檢視可用之Package</h1>
<pre><code>$ sdc-listpackages
[
{
&quot;name&quot;: &quot;S 1GB RAM (1CORE)&quot;,
&quot;memory&quot;: 1024,
&quot;disk&quot;: 15360,
&quot;swap&quot;: 2048,
&quot;default&quot;: false
},
{
&quot;name&quot;: &quot;M 2GB RAM (1CORE)&quot;,
&quot;memory&quot;: 2048,
&quot;disk&quot;: 30720,
&quot;swap&quot;: 4096,
&quot;default&quot;: false
},...(skip
]</code></pre>
<h1>測試開啟主機的語法</h1>
<h1>調整一臺虛擬主機的記憶體大小</h1>
<pre><code>$ sdc-resizemachine -p &quot;M 2GB RAM (1CORE)&quot; 9626a584-187c-40b0-aa84-7f6f3a22ec44</code></pre>
<h1>開啟一臺主機</h1>
<pre><code>$ sdc-createmachine -name simontest123 -package &quot;S 1GB RAM (1CORE)&quot; -dataset sdc:sdc:smartos64:1.5.1
{
&quot;id&quot;: &quot;845f21fe-1910-4b38-a4ca-e2a81144f9a2&quot;,
&quot;name&quot;: &quot;simontest123&quot;,
&quot;type&quot;: &quot;smartmachine&quot;,
&quot;state&quot;: &quot;provisioning&quot;,
&quot;dataset&quot;: &quot;sdc:sdc:smartos64:1.5.1&quot;,
&quot;ips&quot;: [
&quot;211.78.xxx.xxx&quot;
],
&quot;memory&quot;: 1024,
&quot;disk&quot;: 15360,
&quot;metadata&quot;: {},
&quot;created&quot;: &quot;2012-01-18T02:13:31+00:00&quot;,
&quot;updated&quot;: &quot;2012-01-18T02:13:31+00:00&quot;
}</code></pre>
<h1>刪除虛擬主機</h1>
<pre><code>$ sdc-deletemachine 845f21fe-1910-4b38-a4ca-e2a81144f9a2
Requested transition is not acceptable due to current resource state</code></pre>
<p>(主機刪除前，必需要停機，否則會不能刪除)<br>*   Stop server first</p>
<pre><code>$ sdc-stopmachine 845f21fe-1910-4b38-a4ca-e2a81144f9a2</code></pre>
<ul>
<li>Confirm stop OK and delete...</li>
</ul>
<pre><code>$ sdc-deletemachine 845f21fe-1910-4b38-a4ca-e2a81144f9a2</code></pre>
<h1>實際執行</h1>
<p>需求：於聖誕節前(12/20 AM 0:10)新增加一臺主機加入服務，而請load balancer增加路由部份與程式部署部份，因不在MiCloudAPI討論範圍，暫時不列出來。</p>
<h1>撰寫排程程式($ HOME / script / bin / createServer.sh )</h1>
<pre><code>#!/bin/bash
export SDC_CLI_URL=https://api.micloud.tw
export SDC_CLI_ACCOUNT=YOUR_ACCOUNT
export SDC_CLI_KEY_ID=id_rsa
export SDC_CLI_IDENTITY=/Users/simonsu/.ssh/id_rsa
sdc-createmachine -name simontest123

-package &quot;S 1GB RAM (1CORE)&quot;

-dataset sdc:sdc:smartos64:1.5.1
echo “Server Create Done” | mailx -s “Add a Server to MiCloud” simonsu.mail@gmail.com</code></pre>
<p>增加load balancer路由(此部分程式碼需視不同Load Balancer實作)</p>
<pre><code>addRoute2LoadBalancer.sh</code></pre>
<p>部署應用程式(此部分程式碼需視不同應用程式實作)</p>
<pre><code>doDeployApplication.sh</code></pre>
<h1>將服務加入Cron Job</h1>
<pre><code>10 0 20 12 * $ HOME / script / bin / createServer.sh</code></pre>
<p>上述腳本正常執行後，就可以順利的在12/20當天延展AP主機的服務，並且提供服務囉！</p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="MiCloud+API+Implement+2.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=MiCloud+API+Implement+2.md">MiCloud+API+Implement+2.md</a></h1><br/><h1>預防尖峰流量拖垮服務：Scale Out應用服務-使用CloudAPI排程</h1>
<ul>
<li>調整一臺虛擬主機的記憶體大小</li>
</ul>
<pre><code>simonsuteki-MacBook-Pro:~ simonsu$ sdc-resizemachine -p &quot;M 2GB RAM (1CORE)&quot;
9626a584-187c-40b0-aa84-7f6f3a22ec44</code></pre>
<ul>
<li>開啓一臺主機</li>
</ul>
<pre><code>simonsuteki-MacBook-Pro:~ simonsu$ sdc-createmachine -name simontest123 -package &quot;S
1GB RAM (1CORE)&quot; -dataset sdc:sdc:smartos64:1.5.1
{
&quot;id&quot;: &quot;845f21fe-1910-4b38-a4ca-e2a81144f9a2&quot;,
&quot;name&quot;: &quot;simontest123&quot;,
&quot;type&quot;: &quot;smartmachine&quot;,
&quot;state&quot;: &quot;provisioning&quot;,
&quot;dataset&quot;: &quot;sdc:sdc:smartos64:1.5.1&quot;,
&quot;ips&quot;: [
&quot;211.78.245.41&quot;
],
&quot;memory&quot;: 1024,
&quot;disk&quot;: 15360,
&quot;metadata&quot;: {},
&quot;created&quot;: &quot;2012-01-18T02:13:31+00:00&quot;,
&quot;updated&quot;: &quot;2012-01-18T02:13:31+00:00&quot;
}</code></pre>
<h1>流量恢復正常了～WEB刪除主機</h1>
<ul>
<li>WEB刪除虛擬主機<br><img src='images/MiCloud+API+Implement+2-p11.PNG' width='650' align='center'/><h1>流量恢復正常了～CloudAPI刪除主機</h1>
</li>
<li>CloudAPI刪除虛擬主機</li>
</ul>
<pre><code>simonsuteki-MacBook-Pro:~ simonsu$ sdc-deletemachine 845f21fe-1910-4b38-a4cae2a81144f9a2
Requested transition is not acceptable due to current resource state
(主機刪除前，必需要停機，否則會不能刪除)
# Stop server first
simonsuteki-MacBook-Pro:~ simonsu$ sdc-stopmachine 845f21fe-1910-4b38-a4cae2a81144f9a2
# Confirm stop OK and delete...
simonsuteki-MacBook-Pro:~ simonsu$ sdc-deletemachine 845f21fe-1910-4b38-a4cae2a81144f9a2</code></pre>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="MiCloud+API+Implement+33.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=MiCloud+API+Implement+33.md">MiCloud+API+Implement+33.md</a></h1><br/></p><hr style="border-top: 1px dotted #f00;"/><p  id="MiCloud+API.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=MiCloud+API.md">MiCloud+API.md</a></h1><br/><h1>MiCloud API</h1>
<p>本文件為MiCloud API之簡短說明文件，MiCloud使用Joyent服務，進行IaaS環境部署，基於Joyent提供之API套件進行MiCloud API相關功能之提供。</p>
<h1>MiCloud API簡介</h1>
<h1>何謂MiCloud API?</h1>
<p>MiCloud API 為提供一個與MiCloud平台(SmartDataCenter，文件後面簡稱為SDC)完整介接之應用程式介面，透過該介面您可以：<br><em>  進行雲端主機之建立與管理(此部份將包含SmartMachine與Linux/Windows主機)
</em>  管理您的雲端帳戶以及相關之認證權限事宜<br>*  建立屬於您專屬的分析與監控儀表版</p>
<h1>如何存取MiCloud API?</h1>
<p>MiCloud API為以REST API為呈現方式的介面,您可以透過下面方法與MiCloud API進行介接：<br><em>  WEB存取方式：SmartDataCenter Customer Portal (<a href="http://micloud.tw">http://micloud.tw</a>)
</em>  指令列存取方式：Command line interface (CLI)<br><em>  Node.js程式化介面：node.js SDK
</em>  REST API協定</p>
<h1>開始使用MiCloud API</h1>
<p>在開始使用MiCloud API前，請先確認您的環境已經安裝下述套件，如未安裝，請依照下面鏈結安裝：<br><em>  Node.js
</em>  NPM</p>
<p>安裝完成後，您可以透過下面指令安裝MiCloud API之工具程式：</p>
<pre><code>npm install smartdc -g</code></pre>
<p>%%</p>
<p>MiCloud API為以REST為協定，並以JSON為呈現之工具，為了輔助您在檢視相關訊息時格式上之排版，請依下面指令下載jsontool：</p>
<pre><code>npm install jsontool -g</code></pre>
<p>%%</p>
<h1>MiCloud API連線位置</h1>
<p>MiCloud所屬之API連線位置如下：<br>||DNS Name  ||開放區域  ||Port<br>|api.micloud.tw  |僅限MiCloud主機連線 |443<br>PS: 原micloudapi.micloud.tw之DNS已修改為api.micloud.tw。</p>
<h1>建立與MiCloud之連線：SSH key建立</h1>
<p>MiCloud API需透過SSH之連線方式操作，為方便操作以及保護連線密碼，請依下面指令產生所屬之SSH Key，如為Windows平台，則可使用PUTTY之Key Generator工具產生SSH Key：</p>
<pre><code>ssh-keygen -b 2048 -t rsa</code></pre>
<p>%%</p>
<p>Mac, Linux系統，使用ssh-keygen產生之金鑰會放置於$HOME/.ssh/目錄中，而Windows使用者則可直接指定存放之位置儲存。</p>
<h1>設定您的MiCloud API CLI介面</h1>
<p>產生好SSH Key後，您可以透過下面指令設定好您的CLI環境：</p>
<pre><code>sdc-setup https://api.example.com
Username (login): demo
Password:
SSH public key: (/Users/demo/.ssh/id_rsa.pub)</code></pre>
<p>%%</p>
<h1>使用CLI</h1>
<p>MiCloud CLI的使用上，您可以透過 command --help 方式查詢該command的使用方法：</p>
<pre><code>sdc-listdatacenters --help
sdc-listdatacenters [--account string] [--debug boolean] [--help boolean]](sdc-listdatacenters [--account string [--debug boolean] [--help boolean])
[--identity path] [--keyId string] [--url url]]([--identity path [--keyId string] [--url url])</code></pre>
<p>由顯示之提示說明，使用MiCloud API CLI時候，需要指定相關權限與帳號參數：<br>||CLI Flag    ||Description    ||Environment Variable<br>|--account    |login name (account)    |SDC_CLI_ACCOUNT<br>|--keyId    |name of the key to use for signing    |SDC_CLI_KEY_ID<br>|--url    |URL of the MiCloud API endpoint    |SDC_CLI_URL</p>
<p>Note that you can use the short form of flags as well. For instance, you can use the -a or the --account flag.</p>
<h1>新建立一台SmartMachine主機</h1>
<p>在MiCloud環境上，您可以透過下面指令來新增一台雲端SmartMachine主機：</p>
<pre><code>sdc-createmachine -n getting-started</code></pre>
<p>當主機建立完成，您可透過下面方式查詢主機狀態：</p>
<pre><code>sdc-listmachines -n getting-started

[
{
&quot;id&quot;: &quot;0b97c186-05a5-4113-b05f-3e597e3cf038&quot;,
&quot;name&quot;: getting-started&quot;,
&quot;owner&quot;: demo&quot;,
&quot;type&quot;: &quot;smartmachine&quot;,
&quot;state&quot;: &quot;running&quot;,
&quot;dataset&quot;: &quot;smartos-1.3.13&quot;,
&quot;ips&quot;: [
&quot;10.88.88.50&quot;
],
&quot;memory&quot;: 128,
&quot;disk&quot;: 5120,
&quot;metadata&quot;: {},
&quot;created&quot;: &quot;2011-06-27T19:52:40+00:00&quot;,
&quot;updated&quot;: &quot;2011-06-27T20:08:55+00:00&quot;
}
]</code></pre>
<p>當主機狀態回復至running狀態時，您就可以透過SSH連線至您的主機：</p>
<pre><code>ssh-add
$ ssh -A admin@10.88.88.50</code></pre>
<h1>MiCloud相關主機參數：Datasets</h1>
<p>於MiCloud SDC環境中，您可以透過下面指令取得目前定義中的dataset (dataset為SDC環境中描述IaaS主機類別之描述檔案，開通主機時透過此描述檔案可以決定您開立主機之類別)：</p>
<pre><code>sdc-listdatasets</code></pre>
<p>您在開立雲端主機時，可透過下面方法指定開啓主機之類別：</p>
<pre><code>sdc-createmachine -e sdc:sdc:nodejs:1.2.0 -n getting-started-nodejs</code></pre>
<h1>MiCloud相關主機參數：Packages</h1>
<p>另一各常用之主機參數為package，此參數提供主機大小規格之相關資訊，開通主機時透過指定package參數，可以決定開立之主機規格大小，下面為查詢MiCloud SDC現行定義之package內容：</p>
<pre><code>sdc-listpackages</code></pre>
<p>下面為指定dataset與package之建立主機範例：</p>
<pre><code>sdc-createmachine -e sdc:sdc:nodejs:1.2.0 -n big-nodejs -p regular_1024</code></pre>
<h1>管理您的SSH keys</h1>
<p>透過下面指令，您可以將SSH Key上傳至MiCloud SDC管理平台，讓之後的連線均直接受到SSH加密保護：</p>
<pre><code>sdc-createkey -n my_other_rsa_key ~/.ssh/my_other_rsa_key.pub</code></pre>
<p>您可以透過下面指令查詢現行已經同步至SDC環境織金鑰：</p>
<pre><code>sdc-listkeys -k my_other_rsa_key</code></pre>
<p>當您有一組以上的key時候，您需要指定key之位置，透過下面參數的指定，可以讓smartdc認得您要使用的key：</p>
<pre><code>export SDC_CLI_KEY_ID=my_other_rsa_key</code></pre>
<h1>建立主機分析</h1>
<p>MiCloud API一樣允許您建立主機之分析，SDC中特有的主機分析提供許多主機上運算與狀態資訊，透過這些資訊，您可以診斷目前環境中的弱點並予以加強，MiCloud API之分析範例(分析vnic支流量狀態)如下：</p>
<pre><code>sdc-createinstrumentation -m nic -s vnic_bytes</code></pre>
<p>當分析建立完成時，您可以透過連線上您的雲端主機，並操作ping指令：</p>
<pre><code>wget joyent.com
$ ping -I 1 joyent.com</code></pre>
<p>此時再回分析進行檢視：</p>
<pre><code>sdc-getinstrumentation -v 1</code></pre>
<p>其中上面指令的”1”是您所見立分析的ID，透過取回分析的指令，您可以完整的監控您的系統。更多詳細的資訊，請參考： Appendix B: Cloud Analytics.</p>
<h1>刪除主機</h1>
<p>MiCloud比對Amazone之收費方式，其上的IaaS服務均是以機器的生成(create)到移除(destroy)區間計費，因此確實的移除主機，方可確認您不會再被收費。而在刪除主機之前，您可以透過下面指令將上面建立的分析刪除：</p>
<pre><code>sdc-deleteinstrumentation 1</code></pre>
<p>然後透過sdc-stopmachine的指令將主機關閉：</p>
<pre><code>sdc-listmachines -n getting-started | json 0.id | xargs sdc-stopmachine</code></pre>
<p>關閉之後，透過sdc-deletemachine將主機移除：</p>
<pre><code>sdc-listmachines -n getting-started | json 0.state
$ sdc-listmachines -n getting-started | json 0.id | xargs sdc-deletemachine</code></pre>
<p>刪除SSH Key</p>
<p>另外，您或許會想要把目前沒用到的SSH Key刪除，透過下面指令可以把SSH Key移除：</p>
<pre><code>sdc-deletekey id_rsa</code></pre>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="MiCloud+billing.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=MiCloud+billing.md">MiCloud+billing.md</a></h1><br/><h1>帳單資料</h1>
<p>用戶可以在帳單資料中，查詢到過去6個月內的帳單細項資訊以及未來帳單。<br><img src='images/MiCloud+billing-http://wiki.micloud.tw/Wiki/attach/MiCloud%20Account%20Modify/p1%20-11.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="MiCloud+Credential+Description.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=MiCloud+Credential+Description.md">MiCloud+Credential+Description.md</a></h1><br/><h1>預載程式之預設密碼</h1>
<p>登入 MiCloud 完成後能在畫面左上方點選主機，在從下方表格點選您的主機查看細項。<br><img src='images/MiCloud+Credential+Description-p1+-21.png' width='650' align='center'/><br>進入查詢細項頁面，可於 <strong>概述</strong> 中找到 <strong>Credentials</strong> 欄位,左鍵點擊 <strong>Show Credentials</strong>，查看該台主機預載程式之密碼。</p>
<p><img src='images/MiCloud+Credential+Description-p1+-18.png' width='650' align='center'/></p>
<p>登入帳號與密碼說明如下:</p>
<center><br>||       ||功能   ||登入帳號  ||登入步驟<br>| root   |系統帳號 |root  |登入：ssh root@your.ip.address<br>密碼：本表格root密碼<br>| admin  |系統帳號 |admin |登入：ssh admin@your.ip.address<br>密碼：本表格admin密碼<br>| mysql  |MySQL資料庫帳號 |root |登入：mysql -uroot -p<br>密碼：本表格mysql密碼<br>| pgsql  |PostgreSQL資料庫帳號 |postgres |登入：/opt/local/bin/psql -U postgres<br>密碼：(此時輸入pgsql密碼欄位)<br>| virtualmin  |Virtualmin系統管理工具帳號 |admin |啓動服務：svcadm enable webmin<br>連線：<a href="https://your.ip.address:10000/">https://your.ip.address:10000/</a><br>帳號：admin<br>密碼：本表格virtualmin密碼<br>| jill  |系統帳號 |jill |登入：ssh jill@your.ip.address<br>密碼：本表格jill密碼<br>| zxtm  |負載平衡服務帳號 |admin |連線：<a href="http://your.ip.address:9090">http://your.ip.address:9090</a><br>帳號：admin<br>密碼：本表格zxtm密碼<br></center>

<hr>
<h1>修改預設密碼</h1>
<p>SmartOS修改密碼<br>修改root密碼，指令如下</p>
<p><code>#passwd</code></p>
<p><img src='images/MiCloud+Credential+Description-clip-image001.jpg' width='650' align='center'/></p>
<p>修改Mysql密碼<br>先登入mysql後再執行修改密碼<br>登入指令如下，此時密碼為主機細項上所預設的密碼:</p>
<p><code>#mysql
-u root
-p</code></p>
<p>修改密碼指令如下:</p>
<p><code>mysql&gt; SET PASSWORD FOR root@localhost=PASSWORD(&#39;yournewpassword&#39;);</code></p>
<p><img src='images/MiCloud+Credential+Description-clip-image002.jpg' width='650' align='center'/></p>
<p>如欲更改其他帳戶之密碼，請於root執行下方指令。</p>
<p><code>#passwd admin</code></p>
<p><img src='images/MiCloud+Credential+Description-clip-image003.jpg' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="MiCloud+Example.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=MiCloud+Example.md">MiCloud+Example.md</a></h1><br/><p>MiCloud Self-Service Portal實作</p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Micloud+Features.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Micloud+Features.md">Micloud+Features.md</a></h1><br/><h1>MiCloud的特點</h1>
<p>有別於台灣其他業者，不論是在服務或技術方面皆持續完善及創新，以符合整個市場需求，MiCloud是您服務的最佳選擇。MiCloud擁有以下的特點：</p>
<p>(1) 線上快速申請</p>
<p>透過 <a href="http://micloud.tw">http://micloud.tw</a> 即可立即申請專屬的虛擬主機。</p>
<p>(2) 彈性付費</p>
<p>針對不同的虛擬主機提供不同的計費方式，以分計費，讓您用多少、付多少。</p>
<p>詳細計費方式，請參考<a href="http://portal.micloud.tw/price/price">MiCloud產品價目表</a></p>
<p>(3) 提供免費主機</p>
<p>每個帳號皆可線上申請免費主機(256MB) 試用，直接至<a href="http://micloud.tw">MiCloud平台</a></p>
<p>(4) 多樣化作業系統</p>
<p>MiCloud提供三種不同的虛擬主機服務：SmartMachine、Ubuntu Linux、Windows R2 2008，分別可針對不同需求有不同的記憶體、CPU、硬碟規格。</p>
<p>(5) 高效能</p>
<p>MiCloud讓企業自訂服務條件，自動調整CPU、記憶體、網路等，透過作業系統內建虛擬化管理功能，直接控管硬體資源，讓效能最大化。</p>
<p>(6) 高安全性</p>
<ul>
<li>MiCloud引進Joyent公有雲架構，從SmartDataCenter的ZFS架構，使用Zone安全隔離每部虛擬機器的檔案空間，並加上網路上安全規劃的實體隔離，達到虛擬主機內部安全機制，並加上MiCloud特殊防火牆規劃，特別防護網路上多種攻擊。</li>
</ul>
<ul>
<li>使用SSH key連線方式，保護虛擬主機之擁有者，亦可隔離無金鑰之駭客。</li>
</ul>
<ul>
<li>嚴密及安全的機房管理</li>
</ul>
<ul>
<li>*機房門禁管理</li>
<li>*24小時機房監視錄影系統</li>
<li>*24小時網路監控</li>
<li>*防火牆之保護</li>
<li>*提供不斷電系統</li>
</ul>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Micloud+Password.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Micloud+Password.md">Micloud+Password.md</a></h1><br/><h1>登入密碼管理</h1>
<p>若您需要更改登入MiCloud登入時的密碼，可於此頁做變更。<br><img src='images/MiCloud+Account+Modify-p1+-8.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="MiCloud+Self-Service+Portal.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=MiCloud+Self-Service+Portal.md">MiCloud+Self-Service+Portal.md</a></h1><br/><h1>MiCloud Self-Service Portal實作</h1>
<h1>主題：我的第一個雲端服務</h1>
<h1>我的雲端服務簡介</h1>
<ul>
<li>線上紫微計算服務，透過輸入出生年月日計算紫微命盤</li>
<li>此服務提供各地命理老師可以透過遠端電腦或行動裝置連線計算，並管理客戶資料</li>
<li>服務的高峰時間約是過年期間前後兩個月</li>
</ul>
<h1>從申請MiCloud IaaS服務開始</h1>
<p>[{tw.idv.ecoast.plugin.Mediaplayer src=&#39;p1.mov&#39; playertype=&#39;quicktime&#39; moviewidth=&#39;650&#39; movieheight=&#39;390&#39; caption=&#39;從申請MiCloud IaaS服務開始&#39; control=true autostart=false autorewind=true playcount=0 align=&#39;center&#39;}]</p>
<h1>連線我的MiCloud主機</h1>
<p>[{tw.idv.ecoast.plugin.Mediaplayer src=&#39;p2.mov&#39; playertype=&#39;quicktime&#39; moviewidth=&#39;650&#39; movieheight=&#39;390&#39; caption=&#39;連線我的MiCloud主機&#39; control=true autostart=false autorewind=true playcount=0 align=&#39;center&#39;}]</p>
<h1>部署我的應用程式</h1>
<p>[{tw.idv.ecoast.plugin.Mediaplayer src=&#39;p3.mov&#39; playertype=&#39;quicktime&#39; moviewidth=&#39;650&#39; movieheight=&#39;390&#39; caption=&#39;部屬我的應用程式01-Runtime準備&#39; control=true autostart=false autorewind=true playcount=0 align=&#39;center&#39;}]<br>[{tw.idv.ecoast.plugin.Mediaplayer src=&#39;p4.mov&#39; playertype=&#39;quicktime&#39; moviewidth=&#39;650&#39; movieheight=&#39;390&#39; caption=&#39;部屬我的應用程式02-上傳war檔&#39; control=true autostart=false autorewind=true playcount=0 align=&#39;center&#39;}]</p>
<h1>使用&quot;分析功能&quot;監看服務運行狀態</h1>
<p>[{tw.idv.ecoast.plugin.Mediaplayer src=&#39;p5.mov&#39; playertype=&#39;quicktime&#39; moviewidth=&#39;650&#39; movieheight=&#39;390&#39; caption=&#39;使用分析功能監看服務運行狀態&#39; control=true autostart=false autorewind=true playcount=0 align=&#39;center&#39;}]</p>
<h1>預防尖峰流量拖垮服務：Scale Out應用服務-線上增加主機</h1>
<p>[{tw.idv.ecoast.plugin.Mediaplayer src=&#39;p6.mov&#39; playertype=&#39;quicktime&#39; moviewidth=&#39;650&#39; movieheight=&#39;390&#39; caption=&#39;Scale Out應用服務-線上增加主機&#39; control=true autostart=false autorewind=true playcount=0 align=&#39;center&#39;}]</p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="MiCloud+SSH+Key.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=MiCloud+SSH+Key.md">MiCloud+SSH+Key.md</a></h1><br/><h1>SSH金鑰</h1>
<p>您若需要在Micloud上建置SmartOS及Linux的作業系統</p>
<p>則需要在這個頁面建立您的<a href="/index.html?page=SSH+KeyGen+Connect+Tutorial-Windows.md">SSH-Key Windows</a></p>
<p>以便您在登入系統時做驗證</p>
<p><img src='images/MiCloud+Account+Modify-p1+-7.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="MiCloudCloudAPI.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=MiCloudCloudAPI.md">MiCloudCloudAPI.md</a></h1><br/><h1>MiCloud CloudAPI</h1>
<ul>
<li><a href="/index.html?page=MiCloud+Self-Service+Portal.md">在MiCloud上建置我的雲端服務</a></li>
<li><a href="/index.html?page=Using+DTrace+on+MySQL.md">使用DTrace分析MySQL</a></li>
<li>MiCloud API案例說明<ul>
<li><a href="/index.html?page=MiCloud+API.md">MiCloud API</a></li>
<li><a href="/index.html?page=MiCloud+API+Implement+1.md">MiCloud API實做案例(一)</a></li>
<li><a href="/index.html?page=MiCloud+API+Implement+2.md">MiCloud API實做案例(二)</a></li>
</ul>
</li>
</ul>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="MongoDB+SmartMachine.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=MongoDB+SmartMachine.md">MongoDB+SmartMachine.md</a></h1><br/><h1>MongoDB</h1>
<h1>在SmartOS上安裝MongoDB</h1>
<p>MiCloud 在SmartOS 32bit 提供預載MongoDB的服務，可以直接選擇此預載的套件，若當初沒有選擇預載服務，用戶可以依下列步驟進行安裝。</p>
<p>1.本範例將在 /tmp路徑下安裝MongoDB，請先切換至tmp目錄下。</p>
<pre><code># cd /tmp</code></pre>
<p><img src='images/MongoDB+SmartMachine-p1.png' width='650' align='center'/></p>
<p>2.利用crul指令下載，其指令如下:</p>
<pre><code># curl http://fastdl.mongodb.org/sunos5/mongodb-sunos5-x86_64-2.2.0.tgz &gt; mongodb.tgz</code></pre>
<p><img src='images/MongoDB+SmartMachine-p2.png' width='650' align='center'/></p>
<p>3.解開壓縮檔，並切換至mongodb-sunos5-x86_64-2.2.0下的bin目錄中:</p>
<pre><code># tar -zxvf mongodb.tgz
# cd mongodb-sunos5-x86_64-2.2.0/bin</code></pre>
<p><img src='images/MongoDB+SmartMachine-p3.png' width='650' align='center'/></p>
<p>4.建立資料庫的位置</p>
<pre><code># mkdir -p /data/db</code></pre>
<p><img src='images/MongoDB+SmartMachine-p4.png' width='650' align='center'/></p>
<p>5.連結資料庫，其指令如下:</p>
<pre><code># nohup ./mongod &amp;</code></pre>
<p><img src='images/MongoDB+SmartMachine-p5.png' width='650' align='center'/></p>
<p>6.執行mongo指令，即可進入環境操作</p>
<pre><code># ./mongo</code></pre>
<p><img src='images/MongoDB+SmartMachine-p6.png' width='650' align='center'/></p>
<h1>MongoDB操作說明</h1>
<p>1.檢視服務狀態:</p>
<p>若State為online，代表服務已啟動；反之，則代表未啟動。</p>
<pre><code># svcs mongodb</code></pre>
<p><img src='images/MongoDB+SmartMachine-p7.png' width='650' align='center'/></p>
<p>2.啟用服務:</p>
<p>利用svcadm enable mongodb指令來啟動服務，並以svcs指令來確認是否啟用成功。</p>
<pre><code># svcadm enable mongodb
# svcs mongodb</code></pre>
<p><img src='images/MongoDB+SmartMachine-p8.png' width='650' align='center'/></p>
<p>3.停止服務:</p>
<p>利用svcadm disable mongodb指令來啟動服務，並以svcs指令來確認是否已停止服務。</p>
<pre><code># svcadm disable mongodb
# svcs mongodb</code></pre>
<p><img src='images/MongoDB+SmartMachine-p9.png' width='650' align='center'/></p>
<p>4.連結至MongoDB：</p>
<p>在MiCloud平台中，自行安裝MongoDB及預載的連結方式有些許差異，自行安裝的連結方式，可參考前面介紹的指令；選擇預載的用戶，需要用admin來連結至MongoDB，其指令如下，另外，登入的密碼可以在主機細項的Credentials內查看。</p>
<pre><code># mongo -u admin -p admin</code></pre>
<p><img src='images/MongoDB+SmartMachine-p10.png' width='650' align='center'/><br><img src='images/MongoDB+SmartMachine-p11.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Monitor+System.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Monitor+System.md">Monitor+System.md</a></h1><br/><h1>主機監控之設定</h1>
<h1>Windows</h1>
<p>1.MiCloud平台虛擬主機之監控程式需使用nodejs來執行，<strong>請先登入您的Windows虛擬主機</strong>，再至<a href="http://nodejs.org/"><a href="http://nodejs.org/">http://nodejs.org/</a></a><br><img src='images/Monitor+System-node.png' width='650' align='center'/></p>
<p>2.請下載由MiCloud研發團隊撰寫的監控程式並解壓，下載網址為</p>
<pre><code>http://211.78.245.110:3000/install/nomon-lastest.tgz</code></pre>
<p><img src='images/Monitor+System-nom.png' width='500' align='center'/></p>
<p>3.請在桌面上新增一個副檔名為.bat的檔案(XXX.bat)，如下圖，這邊建立的檔案為test.bat<br><img src='images/Monitor+System-bat.png' width='500' align='center'/></p>
<p>在檔案上點選右鍵→編輯，在檔案中貼上下方指令(如下圖)</p>
<pre><code>node您將檔案解壓縮後存放的位置
main.js，主要用來設定排程應該執行哪支程式。</code></pre>
<p><img src='images/Monitor+System-node1.png' width='650' align='center'/></p>
<p>4.點選開始--系統管理工具--工作排程器，設定程式排程<br><img src='images/Monitor+System-p1.png' width='650' align='center'/></p>
<p>5.點選建立工作來新增排程<br><img src='images/Monitor+System-p2.png' width='650' align='center'/></p>
<p>6.在建立工作--一般，打上排程名稱，名稱可以自己命名，這裡舉例將它命名為”node”(如下圖)<br><img src='images/Monitor+System-p3.png' width='650' align='center'/></p>
<p>7.點選建立工作--觸發程序之新增並做設定，將排程設定為每5分鐘執行一次且是持續不間斷<br><img src='images/Monitor+System-p4.png' width='650' align='center'/><br><img src='images/Monitor+System-set.png' width='650' align='center'/></p>
<p>8.點選建立工作--動作之新增並設定，將前面設定的*.bat執行檔的路徑填入(步驟3中建立的檔案)<br><img src='images/Monitor+System-p6.png' width='650' align='center'/><br><img src='images/Monitor+System-p8.png' width='650' align='center'/></p>
<p>9.完成上方所有的排序設定後，即可在工作排程器主頁上的進行中工作裡看到您新增的排程。<br><img src='images/Monitor+System-p7.png' width='650' align='center'/></p>
<p>10.完成排程設定後，15分鐘後即可至MiCloud平台點選您所設置監控的主機，即可檢視您主機上的CPU、Memory、Disk的使用率。<br><img src='images/Monitor+System-cpu.png' width='650' align='center'/></p>
<p>歷史監控資料，可檢視一週、一個月或整年的監控狀況，並可下載近半年的原始資料。<br><img src='images/Monitor+System-cpu2.png' width='650' align='center'/></p>
<hr>
<h1>Linux</h1>
<p>1.登入MiCloud主機清單中，選擇任何一台Linux主機<br><img src='images/Monitor+System-pl1.png' width='650' align='center'/></p>
<p>2.進入主機細項後，請點選”主機監控”頁籤並點擊”複製指令”按鈕<br><img src='images/Monitor+System-pl2.png' width='650' align='center'/></p>
<p>3.完成上述步驟後，請登入您欲監控的虛擬主機並貼上剛剛的指令</p>
<pre><code># curl http://211.78.245.110:3000/install/install.sh | bash</code></pre>
<p><img src='images/Monitor+System-pl3.png' width='650' align='center'/></p>
<p>執行成功後，可由下方指令檢視監控程式是否己加入例行排程中</p>
<pre><code>#crontab -l</code></pre>
<p><img src='images/Monitor+System-pl4.png' width='650' align='center'/></p>
<p>4.cron job設定完成後，15分鐘後即可至MiCloud管理平台檢視您主機上的CPU、Memory、Disk的使用率。<br><img src='images/Monitor+System-pl5.png' width='650' align='center'/><br>也可以在歷史監控資料中查看週、月、年的資訊，並可下載近半年的原始資料。<br><img src='images/Monitor+System-pl6.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Mounting+Disks+on+a+Virtual+Machine.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Mounting+Disks+on+a+Virtual+Machine.md">Mounting+Disks+on+a+Virtual+Machine.md</a></h1><br/><p>The new Joyent Cloud offering currently does not autoprovision with formatted and mounted data volumes for Linux and Windows Virtual Machines. We plan to automate this in the provisioning tool in the near future, however the following is a workaround to do this.</p>
<p>In this page:</p>
<h1>Mounting the Data Volume on Windows</h1>
<p>To mount the data volume on Windows, you can use the Disk Manager application or the diskpart command line tool.</p>
<h1>Using Disk Manager</h1>
<p>To mount the secondary drive using Disk Manager, follow these steps:</p>
<ul>
<li>Choose Run from the Start menu.</li>
<li>Type diskmgm.msc and press Enter.</li>
</ul>
<p>The Disk Manager application will open.<br>*  The secondary disk is listed on the disks pane. Right click on the secondary volume, click Format, then follow the wizard instructions</p>
<h1>Using Diskpart</h1>
<p>To mount the secondary drive using the diskpart command line tool, follow these instructions:</p>
<ul>
<li>Choose Run from the Start menu.</li>
<li>Type cmd.exe and press Enter.</li>
</ul>
<p>The Command Prompt window appears.<br>*  Type diskpart, press Enter, and follow the instructions.<br>You can also use this guide:</p>
<pre><code>rescan
select disk 1
attributes clear disk readonly
online disk
create partition
format fs=ntfs quick
exit</code></pre>
<h1>Mounting the Data Volume on Linux</h1>
<p>With Linux, you can choose the formatting of the file system you need. Some best pratices are:</p>
<ul>
<li>to use a journaled filesystem such as ext3, ext4, or reiserfs on partitions that have persistent data</li>
<li>for partitions with many small files you may want to increase the inode count</li>
<li>there is no need to use software RAID as you virtual server still resides on KVM in SmartOS, so it has access to the actual benefits of ZFS FS on the hardware RAID</li>
<li>you can recover the reserved space for root and increase performance of the drive by using the tune2fs command.</li>
</ul>
<pre><code>The following example uses /dev/vdb. Your configuration may use a different device as your disk.</code></pre>
<ul>
<li>Use fdisk to set up the disk.</li>
</ul>
<pre><code>$ fdisk /dev/vdb</code></pre>
<ul>
<li>Select n for new partition: p for primary, 1 for partition number, select whole range of disk(1-xxxxx), w to write out new partition</li>
<li>Create the file system.</li>
</ul>
<pre><code>$ mkfs.ext3 /dev/vdb1</code></pre>
<ul>
<li>Create a mountpoint for the new file system.</li>
</ul>
<pre><code>$ mkdir /data</code></pre>
<ul>
<li>Mount the drive.</li>
</ul>
<pre><code>$ mount -t ext3 /dev/vdb1 /data</code></pre>
<ul>
<li>Verify that the drive is mounted.</li>
</ul>
<pre><code>$ df -kh</code></pre>
<p>To make the mount presistent across rebooting, add the following line the file /etc/fstab&quot;:</p>
<pre><code>/dev/vdb1            /data            ext3       defaults      0 0</code></pre>
<p>Reboot your system to verify the disk is mounted on reboot.</p>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Mounting+the+Data+Volume+on+Windows.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Mounting+the+Data+Volume+on+Windows.md">Mounting+the+Data+Volume+on+Windows.md</a></h1><br/><h1>Windows主機掛載硬碟</h1>
<p>訂購MiCloud Windows主機的硬碟空間屬於額外提供給每台主機的空間，並不包含在原作業系統的硬碟空間中，預設每台虛擬主機之作業系統空間有40GB，但用戶需自行將OS外之硬碟掛載後，才可使用，其掛載及啟用的操作說明如下。</p>
<p>登入您的主機後點選”開始”在<strong>電腦</strong>上按右鍵點選<strong>管理</strong>，如下圖。<br><img src='images/Mounting+the+Data+Volume+on+Windows-win-dis.jpg' width='500' align='center'/></p>
<p>開啟伺服器管理員後點選存放-磁碟管理，如下圖。<br><img src='images/Mounting+the+Data+Volume+on+Windows-win-dis1.jpg' width='600' align='center'/></p>
<p>請在<strong>磁碟1</strong>的空白處按右鍵選<strong>連線</strong>，如下圖紅色框框部分。<br><img src='images/Mounting+the+Data+Volume+on+Windows-win-dis2.jpg' width='600' align='center'/></p>
<p>連線後，再<strong>按右鍵</strong>選<strong>初始化磁碟</strong>，會出現初始化硬碟的視窗，按下確定即可。<br><img src='images/Mounting+the+Data+Volume+on+Windows-win-dis3.jpg' width='600' align='center'/><br><img src='images/Mounting+the+Data+Volume+on+Windows-win-dis4.jpg' width='600' align='center'/></p>
<p>初始化磁碟後，請至紅色框框裡<strong>按右鍵</strong>點選<strong>新增簡單磁碟區</strong>，如下圖。<br><img src='images/Mounting+the+Data+Volume+on+Windows-win-dis5.jpg' width='600' align='center'/></p>
<p>出現新增簡單磁碟區精靈視窗，點選下一步即可。<br><img src='images/Mounting+the+Data+Volume+on+Windows-win-dis6.jpg' width='600' align='center'/></p>
<p>第三步驟可選擇磁碟機代號如下圖橘色框框，再執行下一步至完成即可。<br><img src='images/Mounting+the+Data+Volume+on+Windows-win-dis7.jpg' width='600' align='center'/></p>
<p>E槽即為您所掛載的硬碟，如下圖。<br><img src='images/Mounting+the+Data+Volume+on+Windows-win-dis8.jpg' width='600' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="My.joyentcloud.com+FAQ.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=My.joyentcloud.com+FAQ.md">My.joyentcloud.com+FAQ.md</a></h1><br/><h1>FAQ</h1>
<h1>Joyent的雲端服務將重新訂價？</h1>
<p>是的。 Joyent雲端服務的雲端基本入門價格，在北美是以SmartMachines小時計費做為選項($0.085/hour 美元)。 而使用XL或更大規格的客戶，將以低於每小時0.04美元價格計算。 而架構在Linux上的虛擬機，使用雲端的定價將適度調低為0.04美元。 Windows虛擬機的價格雖為未定，但預計將以Linux的定價計算。（請點選此處了解全部的價格。）Joyent的雲端計劃的任何變化、新功能，都是提供給世界各地Joyent的客戶。</p>
<h1>我原有的服務將會得到新的訂價，對不對？</h1>
<p>現有Joyent雲端平台（my.joyent）已有一個基礎的按月每小時計費計費結構，客戶若不啟用，我們將繼續以原先訂價，並以每月相同的價格向客戶收取費用。而隨著客戶遷移到新的系統時，這些客戶將可以受益於以每小時計算的新定價計費標準。</p>
<h1>我喜歡它！ 我如何註冊？</h1>
<p>您將需要重新輸入您的付款資訊，而且未有帳戶的客戶亦需建立新帳戶，以便開始使用我們新的付款機制。<br>我可以將我的應用程式移轉過去嗎？<br>現有Joyent的雲端平台客戶可以立即將他們的應用程式移植到現有的Joyent雲端新平台，但因為Joyent的嶄新雲端平台與原有的系統有所差異，為避免造成您系統程式上無法挽救的錯誤，我們強烈的建議客戶，再移轉之前請務必先了解相關技術問題。（點選此處了解我們的相關技術問題，包含如何將舊有系統遷移到新的Joyent的雲端平台）。</p>
<h1>我現在應該要立即地做什麼事情嗎？</h1>
<p>其實沒有。 我們將繼續運作，並支持Joyent的雲端平台版本。 歡迎原有雲端平台上的客戶繼續使用，並希望在不久的將來，所有的現有客戶都將被移植到Joyent嶄新的雲端平台上。 因為在那個時候，您將會被切換到新的計費系統，屆時您將需要重新輸入您的付款資訊。</p>
<h1>我還可以在舊的Joyent雲端平台上註冊一個新的帳戶？</h1>
<p>不，很抱歉！我們認為Joyent嶄新的雲端平台服務是如此完善，所以自今天推出之後的任何及所有新帳戶都將在新的雲端平台上建置。<br>原有的Joyent雲端用戶若想升級到新版本，Joyent公司是否將提供升級支援的服務呢？<br>是的。Joyent的技術工程師將對現有的客戶提供相對的支援。 然而，移轉的過程對客戶不會造成任何痛苦，也沒有太多需要指引過程。</p>
<h1>是否仍然可以採取每月支付的方式呢？</h1>
<p>Joyent新雲端平台服務仍將可以月計價方式，而以每小時定價的方式將是許多（但不是全部）的產品和服務可選擇的計費方式。事實上，我們預計特別選擇Joyent的客戶，會想要以簡單明瞭的計費方式，繼續使用Joyent的嶄新雲端平台服務。</p>
<h1>每月的計算基礎，還是以當月的每小時計價嗎？</h1>
<p>以一個經驗法則來說，每月以30天做計算，乘以720小時的價格，將會得到相當於每月的帳單費率。但請注意，部分產品的帳單費率，將會有超過以月計算的每小時帳單費率。但因每小時的計算費率可以為使用雲端平台的客戶提供更多的消費選擇。</p>
<h1>亞馬遜AWS等值定價又是什麼？</h1>
<p>不是所有的雲端平台都是一樣的 - 所以比較現有雲端平台價格並不是一個有效的方式，更遑論是以每小時收費作為計算比較標準。 而在最近的基準測試中，<a href="http://www.joyentcloud.com/resources/benchmarks/">http://www.joyentcloud.com/resources/benchmarks/</a> Joyent的雲端平台卻優於亞馬遜EC2上的CPU，硬碟大小和3到14倍的記憶體。 但這是否意味著Joyent應收取亞馬遜3倍到14倍的價格嗎？或許是有可能的，但以每小時0.085美分與亞馬遜最小的Linux平台比較，其價格計費率是一樣的。</p>
<h1>Joyent的雲端服務支援哪些操作系統？</h1>
<p>Joyent的SmartDataCenter雲端平台現在可以在任何地方，支援任何應用程式，以及支援任何操作系統。 而透過我們的KVM-SmartOS解決方案，Joyent的雲端平台服務更提供我們SmartOS（UNIX操作系統虛擬化環境），以及Linux和Windows的相關支援。 目前確定可支援的操作系統是：<br><em>  CentOS
</em>  Debian<br><em>  Joyent SmartOS
</em>  Ubuntu<br><em>  Windows Server Enterprise
</em>  Windows Server HPC<br>*  Windows Server Standard</p>
<h1>救命啊！ SmartOS軟體套組是指什麼意思？</h1>
<p>這些特別的軟體套組各自有不同的命名，這將會為我們的API用戶提供了更正確的軟體套組的版本資訊。</p>
<p>若您想要了解SmartOS更多的細節，請點選此處。</p>
<h1>哪裡可以找到我的MySQL，VirtualMin，Windows和Zeus密碼？</h1>
<p>這些密碼是對每一台機器上所建立配置的。 您可以透過它們記錄到您在my.joyentcloud.com的帳號。</p>
<p>密碼將記錄在證書區域中，您可對每一台機器上的“查看證書” 點選按鈕：</p>
<pre><code>the default username for VirtualMin and Zeus is &#39;admin&#39;.
The default username for MySQL is &#39;root&#39;.
The default username for Windows is &#39;administrator&#39;.</code></pre>
<p><img src='images/My.joyentcloud.com+FAQ-pic1.png' width='650' align='left'/></p>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="No.de+Version+2.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=No.de+Version+2.md">No.de+Version+2.md</a></h1><br/><p>A bunch of new features have come in this release, just in time for the second annual Node Knockout competition. We&#39;ve designed this version of the no.de product in response to the feedback we&#39;ve gotten from users of the existing system.</p>
<h1>No Coupon Codes</h1>
<p>That&#39;s right! You can sign up for the service, and provision right away without anyone&#39;s permission, or jumping through any extra hoops.</p>
<p>The codes served their purpose, and gave us a way to limit the influx of new users in the first few versions, but I think everyone is pretty happy to see them go.</p>
<p>If you were waiting in the queue to get a code, then the good news is that you don&#39;t need to wait any more. Just go provision a new no.de SmartMachine, and start pushing code onto it.</p>
<h1>Proxied HTTP</h1>
<p>In version 2, we&#39;re using Nodejitsu&#39;s http-proxy program, and have been very happy with it so far. For SSH access, we&#39;re assigning a specific port to every no.de machine.</p>
<p>The net result is that we can get a lot more mileage out of each physical machine.</p>
<p>For your purposes, it means that all HTTP requests will appear to come from the same req.socket.remoteAddress, so you&#39;ll have to look at the req.headers[&#39;x-forwarded-for&#39;] and req.headers[&#39;x-forwarded-port&#39;] headers instead.](For your purposes, it means that all HTTP requests will appear to come from the same req.socket.remoteAddress, so you&#39;ll have to look at the req.headers[&#39;x-forwarded-for&#39; and req.headers[&#39;x-forwarded-port&#39;] headers instead.)</p>
<p>And of course, this comes along with a new version of Cloud Analytics which can interpret these headers for you to show the origin of all your incoming HTTP requests on a heatmap in real time.</p>
<p>If you really need a public IP address for some reason, you can upgrade at any time to a full-on SmartMachine. There are lots of options to choose from.</p>
<h1>No Space Commits: node-service-deploy</h1>
<p>One of the biggest complaints we heard about a git-push deployment model is that sometimes you want to re-run the deployment process when something goes wrong. However, because of how git works, just running git push again won&#39;t actually do anything if there aren&#39;t new commits to push. So, what do you do? You add a space or a semicolon to a file, commit it with a message like, Something dumb just to restart the server, and then git push. It makes the commit history look pretty silly.</p>
<p>With the new version of the no.de service, you can manually run the node-service-deploy <commit-ish> script to run the deployment process at any time. The commit-ish argument defaults to master, so just running node-service-deploy is exactly like doing a git push, but without requiring an additional &quot;space commit&quot;.</p>
<h1>npm Integration</h1>
<p>If you provide a package.json file with a set of dependencies and a start script, then the no.de system will see that and make sure that your dependencies are installed, and run your start script. The default npm start script is node server.js if there&#39;s a server.js file present, so if you were doing things without a package.json file before, then it&#39;ll keep working as it did before.</p>
<p>Since your package gets started using npm, this also means that all the npm config information is available in process.env. To set a custom environment variable, you can put it in your package.json file in the config hash, or log in and run npm config set foo=bar in your machine.</p>
<p>A bunch more detail can be found on the wiki</p>
<h1>Updated Platform</h1>
<p>This release comes along with an update to the underlying operating system that powers Joyent&#39;s cloud, SmartOS. This means:</p>
<ul>
<li>Updates to the administration portal.</li>
<li>New instrumentations in the Cloud Analytics system.</li>
<li>Updated packages and operating system features on the machines.<br>Some of these changes should be mostly unnoticeable, but the added stability and introspection means that bugs and issues will be fewer and easier to fix.</li>
</ul>
<h1>The Past</h1>
<p>If you had a no.de machine already, don&#39;t worry. There are no plans to take it away or make any changes to it.</p>
<p>However, if you want access to these newer features, you&#39;ll have to provision a machine on the new v2 system.</p>
<h1>The Future</h1>
<p>Stay tuned for more features and functionality coming to the no.de service in the future. SmartOS and SDC are under active development, and will keep getting better, and of course Node is moving at breakneck speed.</p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Node+install.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Node+install.md">Node+install.md</a></h1><br/><h1>Node.js安裝與使用</h1>
<h1>使用production模式</h1>
<pre><code>NODE_ENV=production node app.js</code></pre>
<h1>必裝套件-Express</h1>
<pre><code>npm install express -gd
cd /usr/local/lib/node
ln -s ../node_module/express</code></pre>
<h1>必裝套件-EJS</h1>
<pre><code>npm install ejs -gd
cd /usr/local/lib/node
ln -s ../node_module/ejs</code></pre>
<h1>Eclipse Plugin for Node.js</h1>
<pre><code>https://github.com/joyent/node/wiki/Using-Eclipse-as-Node-Applications-Debugger</code></pre>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Node+reference.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Node+reference.md">Node+reference.md</a></h1><br/><h1>Node.js相關網站</h1>
<p><a href="http://blog.labin.cc/?page-id=857">Node.js實戰聖經</a></p>
<p><a href="http://www.nodebeginner.org/">Node.js Tutorial</a></p>
<p><a href="http://wiki.joyent.com/display/node/Node.js+Home">Node.js在Joyent上的說明文件</a></p>
<p><a href="https://github.com/joyent/node/wiki/Installation">Node.js的Git安裝說明</a></p>
<p><a href="http://nodejs.org/docs/v0.5.9/api/">官方文件</a></p>
<p><a href="http://cnodejs.org/cman/">官方文件(簡中版)</a></p>
<p><a href="http://clayliao.blogspot.com/2011/08/using-npm-manage-nodejs-pkg.html">Node.js + YUI</a></p>
<h1>TermKit（模擬主機端console之node實作品，原TermKit為Mac上很讚的終端軟體：[<a href="http://termkit.org/]）">http://termkit.org/]）</a></h1>
<h1>](TermKit（模擬主機端console之node實作品，原TermKit為Mac上很讚的終端軟體：[<a href="http://termkit.org/）">http://termkit.org/）</a></h1>
<p>)<br><a href="[http://carl830.pixnet.net/blog/post/78961929-linux-mint-%E5%AE%89%E8%A3%9Dtermkit"><a href="http://carl830.pixnet.net/blog/post/78961929-linux-mint-%E5%AE%89%E8%A3%9Dtermkit">http://carl830.pixnet.net/blog/post/78961929-linux-mint-%E5%AE%89%E8%A3%9Dtermkit</a>]</a></p>
<p><a href="[https://github.com/unconed/TermKit"><a href="https://github.com/unconed/TermKit">https://github.com/unconed/TermKit</a>]</a></p>
<p><a href="http://howtonode.org/arm-chroot-fun">Putting Node on Mobile Device</a></p>
<p><a href="http://www.diybl.com/course/4-webprogram/jsp/jsp-js/20100721/477945.html">Node.js implement https</a></p>
<h2><a href="http://ithelp.ithome.com.tw/event/ironman4/index/personal/type/participant-list/page/1/user/20000108">node.js伺服器實戰</a></h2>
<h1>From Kevin@Joyent</h1>
<p><a href="http://www.wilcoxd.com/whitepapers/node-js/">Bryan&#39;s Site</a></p>
<p><a href="http://toolbox.no.de/">Node Toolbox</a></p>
<h1>Tutorials</h1>
<p><a href="http://www.google.com/url?q=http%3A%2F%2Fnodeguide.com%2F&amp;sa=D&amp;sntz=1&amp;usg=AFrqEzcB7IUbeaVgSgfW-YEYZLlCMjGKeQ">Node.js guide</a></p>
<p><a href="http://www.google.com/url?q=http%3A%2F%2Fnodetuts.com%2F&amp;sa=D&amp;sntz=1&amp;usg=AFrqEze6cOCe-S92nM84HZyma8U4iR0iXw">Node tuts</a></p>
<h1>Videos</h1>
<p><a href="http://www.youtube.com/watch?v=jo-B4LTHi3I">Introduction to Node.js with Ryan Dahl</a></p>
<p><a href="http://www.google.com/url?q=http%3A%2F%2Fwww.infoq.com%2Fpresentations%2Fnodejs&amp;sa=D&amp;sntz=1&amp;usg=AFrqEzcZmwIQWHwrzary7B9KLhqsep6MWg">Node.js: Asynchronous Purity Leads to Faster Development</a></p>
<p><a href="http://www.google.com/url?q=http%3A%2F%2Fwww.infoq.com%2Fpresentations%2FParallel-Programming-with-Nodejs&amp;sa=D&amp;sntz=1&amp;usg=AFrqEzf1vS7TNLqTzLJ-Fbqy4r34Pc2QJQ">Parallel Programming with Node.js</a></p>
<p><a href="http://www.google.com/url?q=http%3A%2F%2Fvimeo.com%2F18077379&amp;sa=D&amp;sntz=1&amp;usg=AFrqEzcNR6SkIp8mUCrxtVJMkQkrHim-sw">Server-side JavaScript with Node, Connect &amp; Express</a></p>
<h1>Books</h1>
<p><a href="http://www.google.com/url?q=http%3A%2F%2Fnodebeginner.org%2F&amp;sa=D&amp;sntz=1&amp;usg=AFrqEzcLcIoIMmf-MSBk9EFrOAfvMiVapg">The Node Beginner Book</a></p>
<p><a href="http://www.google.com/url?q=http%3A%2F%2Fvisionmedia.github.com%2Fmasteringnode%2F&amp;sa=D&amp;sntz=1&amp;usg=AFrqEzdG8ojM59Jubo-sxDfUJqPTGpqBQA">Mastering Node.js</a></p>
<p><a href="http://www.google.com/url?q=http%3A%2F%2Fofps.oreilly.com%2Ftitles%2F9781449398583%2Findex.html&amp;sa=D&amp;sntz=1&amp;usg=AFrqEzcquQ50tzTBx5Q0i5r13gmCkNp0iw">Up and Running with Node.js</a></p>
<h1>Blogs</h1>
<p><a href="http://www.google.com/url?q=http%3A%2F%2Fblog.nodejs.org%2F&amp;sa=D&amp;sntz=1&amp;usg=AFrqEzfTr93SE-YQse0AsCLuuoss5Z-IKg">Ryan Dahl&#39;s Node blog</a></p>
<p><a href="http://www.google.com/url?q=http%3A%2F%2Fhowtonode.org%2F&amp;sa=D&amp;sntz=1&amp;usg=AFrqEzcpCiHtS5aGFvjepDXBDPxkt3juzg">How To Node</a></p>
<p><a href="http://www.google.com/url?q=http%3A%2F%2Fdailyjs.com%2F&amp;sa=D&amp;sntz=1&amp;usg=AFrqEzdKYaWCgapgN8Zw8cnz-zrzX1WZ-w">DailyJS</a></p>
<p><a href="http://www.google.com/url?q=http%3A%2F%2Fblog.nodejitsu.com%2F&amp;sa=D&amp;sntz=1&amp;usg=AFrqEzcUjHz8mN8NxTP7FVuZzlsTWvrpxg">Nodejitsu blog</a></p>
<h1>Podcasts</h1>
<p><a href="http://www.google.com/url?q=http%3A%2F%2Fnodeup.com%2F&amp;sa=D&amp;sntz=1&amp;usg=AFrqEzerZFx8Vu2BRhzu8qGqVhN5klCT1A">NodeUp</a></p>
<p><a href="http://www.google.com/url?q=http%3A%2F%2Fnode.minutewith.com%2F&amp;sa=D&amp;sntz=1&amp;usg=AFrqEzfbO8QfidiF4-gOzIQ3SNdDsg8gDQ">Minute with node.js</a></p>
<h1>JavaScript resources</h1>
<p><a href="http://www.google.com/url?q=http%3A%2F%2Fyuiblog.com%2Fcrockford%2F&amp;sa=D&amp;sntz=1&amp;usg=AFrqEzcJULSwneGTwx8M0ETBqcH6vucNHw">Crockford&#39;s videos (must see!)</a></p>
<p><a href="http://www.google.com/url?q=http%3A%2F%2Fwww.addyosmani.com%2Fresources%2Fessentialjsdesignpatterns%2Fbook%2F&amp;sa=D&amp;sntz=1&amp;usg=AFrqEzdGTCR1aLgCYg0ktxPiND1DI1UpGg">Essential JavaScript Design Patterns For Beginners</a></p>
<p><a href="http://www.google.com/url?q=http%3A%2F%2Fbonsaiden.github.com%2FJavaScript-Garden%2F&amp;sa=D&amp;sntz=1&amp;usg=AFrqEzfVDYr-yCBsnMjyzQCQfMAd2CmZPQ">JavaScript garden</a></p>
<p><a href="http://www.google.com/url?q=http%3A%2F%2Foreilly.com%2Fcatalog%2F9780596806767&amp;sa=D&amp;sntz=1&amp;usg=AFrqEzfBo80O-SK1eecmCkCife8F9PjOeA">JavaScript Patterns book</a></p>
<p><a href="http://www.google.com/url?q=http%3A%2F%2Foreilly.com%2Fcatalog%2F9780596517748%2F&amp;sa=D&amp;sntz=1&amp;usg=AFrqEzcNTgA5Uo-Gjah-tZhRM1iBt2atZQ">JavaScript: The Good Parts book</a></p>
<h1>Node Modules</h1>
<p><a href="http://www.google.com/url?q=https%3A%2F%2Fgithub.com%2Fjoyent%2Fnode%2Fwiki%2Fmodules&amp;sa=D&amp;sntz=1&amp;usg=AFrqEzdt6uLym-GktR2GCflpc-mvxxJlPg">Wiki List on Github/Joyent/Node (start here last!)</a></p>
<p><a href="http://www.google.com/url?q=http%3A%2F%2Fsearch.npmjs.org%2F&amp;sa=D&amp;sntz=1&amp;usg=AFrqEzdYUfs2cliF3TrcRoKIED603mVWtA">Search for registered node.js modules</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Npm+Integration.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Npm+Integration.md">Npm+Integration.md</a></h1><br/><p>As of the August 2011 v2 release of no.de, npm is much more tightly integrated into the service.</p>
<p><strong>server.js → package.json</strong><br>Previously, you had to add a server.js file to your git repository and push it to no.de. Any dependencies had to be bundled and checked into git. This sometimes raised problems if the dependency had a .gitignore, or needed to be built on the target architecture.</p>
<p>Also, some people didn&#39;t really want to have a single server.js file as the way to start their app. If you wanted to start it with cluster, or write your app in coffee-script, you&#39;d have to bootstrap it with a server.js which was sometimes a bit clumsy.</p>
<p>In v2, if you have a package.json file, then you can specify dependencies, add custom configurations, and define a custom start command. Since the scripts.start member defaults to node server.js, the old style still works.</p>
<p>Also, if you define a server.js file, but no package.json, then the deploy system will create a package.json for you, and all will still be well.</p>
<p>See npm help json for everything you can put in your package.json file. For the purposes of this doc, what&#39;s most important are the dependencies, scripts.start, and config fields.</p>
<h1>dependencies</h1>
<p>Let&#39;s say you have something like this in your package.json file:</p>
<pre><code>{ &quot;name&quot;: &quot;my-program&quot;
, &quot;version&quot;: &quot;1.2.3&quot;
, &quot;dependencies&quot;: { &quot;express&quot;: &quot;2.0&quot; } }</code></pre>
<p>When you push the code to your no.de machine, it&#39;ll set things up so that some version of express &gt;=2.0.0 and &lt;2.1.0 is installed and ready to be require()&#39;d.</p>
<p>Binary dependencies can be specified as well, though since they can sometimes take a while to build, you may want to log in and pre-install them. More on that below.</p>
<h1>scripts.start</h1>
<p>Let&#39;s say that you like Coffee Script, and want to have the service run coffee server.coffee rather than a node server.js. No problem! Just add coffee-script as a dependency, and then the appropriate start script.</p>
<pre><code>
{ &quot;name&quot;: &quot;my-program&quot;
, &quot;version&quot;: &quot;1.2.3&quot;
, &quot;dependencies&quot;: { &quot;express&quot;: &quot;2.0&quot;, &quot;coffee-script&quot;: &quot;1.1&quot; }
, &quot;scripts&quot;: { &quot;start&quot;: &quot;coffee server.coffee&quot; } }</code></pre>
<p>Just make sure that there actually is a server.coffee file in your repo, or else that&#39;ll of course fail.</p>
<h1>config</h1>
<p>There are a lot of times where you want to push some random config params to your service. When npm runs scripts, all of the config options and package.json fields are available in the environment. Since your server is started using the npm start command, this means that those settings are available to your no.de program.</p>
<p>Additionally, the config field in the package.json file can be used to supply per-package config fields that won&#39;t be overwritten in new versions. This makes it easy to configure your program to run differently on your laptop than it does on no.de. See the section entitled Per-Package Config Settings in npm help config.</p>
<p>For example, let&#39;s say that you had the following package.json:</p>
<pre><code>{ &quot;name&quot;: &quot;my-program&quot;
, &quot;version&quot;: &quot;1.2.3&quot;
, &quot;dependencies&quot;: { &quot;express&quot;: &quot;2.0&quot; } }
, &quot;config&quot;:
{ &quot;_some-private-api-key&quot;: &quot;TESTING&quot;
, &quot;server-environment&quot;: &quot;development&quot; } }</code></pre>
<p>Then your script would see the following items in process.env:</p>
<pre><code>{
// ... lots of npm_config_var: &#39;value&#39; ...
npm_package_name: &#39;my-program&#39;,
npm_package_version: &#39;1.2.3&#39;,
npm_package_dependencies_express: &#39;2.0&#39;,
npm_package_scripts_start: &#39;node server.js&#39;,
npm_package_config__some_private_api_key: &#39;TESTING&#39;,
npm_package_config_server_environment: &#39;development&#39;
}</code></pre>
<p>Note the double underscore in npm_package_config__some_private_api_key. That leading underscore means that it&#39;s a private configuration param that will not be shared with any other packages that may be installed on the zone. (Of course, since it&#39;s in the environment, it will be shared with any child processes, if you don&#39;t override the env.)</p>
<p>If you want to change some of those values, then ssh into your no.de machine, and do this:</p>
<pre><code>npm config set my-program:server-environment=&quot;no.de&quot;
npm config set my-program:_some-private-api-key=&quot;the.actual.api.key&quot;</code></pre>
<p>And then restart or redeploy your program.</p>
<p>Now, process.env will have these keys:</p>
<pre><code>{
// ... lots of npm_config_var: &#39;value&#39; ...
// ... other npm_package_* values ...
npm_package_config__some_private_api_key: &#39;the.actual.api.key&#39;,
npm_package_config_server_environment: &#39;no.de&#39;
}</code></pre>
<p>and additional deploys will not override those configs, since they&#39;re stored outside of your package in the ~/.npmrc file.</p>
<h1>Speeding Up Dependency Installs</h1>
<p>If you have a lot of dependencies, then you may find that it takes a little while to deploy, since it has to fetch those every time. You can speed it up considerably by logging into your no.de machine, and installing those packages globally.</p>
<pre><code>npm install -g express@2.0 request dnode socket.io async underscore vows mongodb</code></pre>
<p>Then, each deploy will use the same symlinked copy of those dependencies.</p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Npm+usage.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Npm+usage.md">Npm+usage.md</a></h1><br/><h1>NPM的安裝與操作</h1>
<p>Node.js 的套件管理工具(Node Package Manager)可以讓 Node.js 的開發者直接利用、擴充線上的套件庫（packages registry），加速軟體專案的開發。此外npm 提供很友善的搜尋功能，可以快速找到及安裝需要的套件，當這些套件發行新版本時，npm 也可以協助開發者自動更新這些套件。</p>
<h1>安裝NPM</h1>
<p>利用下方指令安裝</p>
<pre><code>#pkgin install npm</code></pre>
<p><img src='images/Npm+usage-p7.png' width='650' align='center'/></p>
<h1>搜尋可附加的套件</h1>
<p>Node.js是一個非常熱門的開發平台，有各式各樣的開放套件可以供用戶去下載安裝。而npm也提供了一個平台可以讓用戶去搜尋，用戶可以在網頁上看到最新、熱門、最多人用的套件下載或是建議等等。網站來源: <a href="https://npmjs.org/"><a href="https://npmjs.org/">https://npmjs.org/</a></a><br><img src='images/Npm+usage-p8.png' width='650' align='center'/></p>
<h1>安裝套件</h1>
<p>我們以request.js來當作範例來安裝，輸入以下指令及可以安裝:</p>
<pre><code>#npm install request -gd</code></pre>
<p><img src='images/Npm+usage-p9.png' width='650' align='center'/><br>PS: -g代表安裝到NODE_PATH裡的lib裏面，而-d代表把相依性套件也一起安裝</p>
<h1>檢視己安裝套件</h1>
<p>安裝完成後Node.js所需要套件的安裝、升級、移除都靠npm這個套件來運作。我們可以利用npm list指令來看套件列表，在預設狀態下會顯示empty，而下圖範例已裝好一些套件:</p>
<pre><code># npm list</code></pre>
<p><img src='images/Npm+usage-p10.png' width='650' align='center'/><br>如果用戶在執行此指令時看到套件名稱前面有亂碼的產生，表示在預設狀態下的編碼是錯誤且無法讀取。用戶必須先在putty上先設定好編碼，如下圖:<br><img src='images/Npm+usage-p11.png' width='650' align='center'/></p>
<h1>更新套件</h1>
<p>利用npm update來更新我們已有的套件，如下圖:</p>
<pre><code># npm update</code></pre>
<p><img src='images/Npm+usage-p12.png' width='650' align='center'/></p>
<h1>移除套件</h1>
<p>利用npm uninstall指令來刪除既有套件，以textlogin套件為例，如下圖:</p>
<pre><code># npm uninstall textlogin</code></pre>
<p><img src='images/Npm+usage-p13.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Order+a+Machine.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Order+a+Machine.md">Order+a+Machine.md</a></h1><br/><h1>訂購主機</h1>
<p>若您還未建立您的 <strong>SSH-Key</strong> 以及 <strong>付款方式</strong> 的資料填寫 ，請先建立完成。</p>
<p>SSH-Key 相關教學:<a href="index.html?page=SSH+KeyGen+Connect+Tutorial-Windows.md">Windows</a></p>
<p>付款方式 相關教學:<a href="index.html?page=Pay+way.md">付費方式</a></p>
<p>若您上述步驟皆已完成，即可進入此頁訂購主機。</p>
<ul>
<li>首先您可以先從頁面左邊(即藍色框框)開始看起,其內容為 MiCloud 所有提供的機器類型、規格、服務項目以及各自的定價為何.</li>
</ul>
<ul>
<li>接著您可以於右邊紅色框框內開始選擇您想要購買的機器或服務,選擇完後可先看一看下方顯示的資訊(即黃色框框).</li>
</ul>
<ul>
<li>確認完成即可點選 <strong>Provision</strong>(綠色框框), MiCloud 會馬上幫您建立機器.</li>
</ul>
<p>關於機器建立狀況與相關資訊可於 __[主機管理](Manage your Machines)<br><img src='images/Order+a+Machine-p1+-5.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Pay+way.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Pay+way.md">Pay+way.md</a></h1><br/><h1>付款方式</h1>
<p>付款方式分為企業付款、信用卡付款二種，詳細解說如下:</p>
<h1>企業付款說明</h1>
<p>企業付款方式僅提供合作或簽約夥伴，不適用於網路申請之用戶。</p>
<h2><img src='images/Pay+way-http://wiki.micloud.tw/Wiki/attach/Pay%20with%20business/pay1.png' width='650' align='center'/></h2>
<h1>信用卡付款說明</h1>
<p>[{arnaud.Flash src=&#39;v4.swf&#39; width=&#39;700&#39; height=&#39;550&#39; controls=&#39;false&#39; play=&#39;false&#39; loop=&#39;false&#39; }]<br>用戶皆可透過網路做信用卡認證，認證成功後即可訂購主機，未來帳單將從此張信用卡做扣款動作。</p>
<p><img src='images/Pay+way-p1+-9.png' width='650' align='center'/><br>請確認您的<strong>帳單寄送地址</strong>是否正確!<br><img src='images/Pay+way-p1+-10.png' width='650' align='center'/><br>請選擇您的信用卡與填寫相關資訊<br><img src='images/Pay+way-CC3.JPG' width='650' align='center'/><br>完成後請確認您的<strong>卡號</strong>是否正確<br><img src='images/Pay+way-CC1.JPG' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Pay+with+business.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Pay+with+business.md">Pay+with+business.md</a></h1><br/><h1>企業付款</h1>
<p>如果您在個人資訊中選擇的是企業付款，在付款方式的頁面會請您連絡專人，如下圖<br><img src='images/Pay+with+business-pay1.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Percona+install.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Percona+install.md">Percona+install.md</a></h1><br/><h1>安裝Percona</h1>
<p>MiCloud只有在SmartOS中有預載Percona的服務，用戶可參考以下的步驟，在Linux環境下安裝。</p>
<h1>在CentOS中安裝Percona</h1>
<p>1.將Percona的套件安裝至主機的套件庫中</p>
<pre><code>#rpm -Uhv http://www.percona.com/downloads/percona-release/percona-release-0.0-1.x86_64.rpm</code></pre>
<p><img src='images/Percona+install-c1.png' width='650' align='center'/></p>
<p>2.請搜尋Percona的套件，並安裝下方框起來的二個套件</p>
<pre><code>#yum search percona</code></pre>
<p><img src='images/Percona+install-c2.png' width='650' align='center'/></p>
<p>3.安裝Percona</p>
<pre><code># yum install Percona-Server-client-55.x86_64</code></pre>
<p><img src='images/Percona+install-c3.png' width='650' align='center'/></p>
<pre><code># yum install Percona-Server-server-55.x86_64</code></pre>
<p><img src='images/Percona+install-c4.png' width='650' align='center'/></p>
<p>4.請至etc下建立一個檔案，且命名為my.cnf，並加入下方列出的幾個設定</p>
<pre><code>#vi /etc/my.cnf</code></pre>
<pre><code>[mysqld]]([mysqld)
plugin-load=handlersocket.so

loose_handlersocket_port = 9998
# the port number to bind to (for read requests)

loose_handlersocket_port_wr = 9999
# the port number to bind to (for write requests)

loose_handlersocket_threads = 16
# the number of worker threads (for read requests)

loose_handlersocket_threads_wr = 1
# the number of worker threads (for write requests)

open_files_limit = 65535
# to allow handlersocket accept many concurrent
# connections, make open_files_limit as large as
# possible.</code></pre>
<p><img src='images/Percona+install-c5.png' width='650' align='center'/></p>
<p>5.啟動服務</p>
<pre><code>#service mysql start</code></pre>
<p><img src='images/Percona+install-c6.png' width='650' align='center'/></p>
<p>6.設定root密碼</p>
<pre><code># mysqladmin -u root password 1qaz</code></pre>
<p>7.登入mysql</p>
<pre><code>#mysql -uroot -p</code></pre>
<p><img src='images/Percona+install-c7.png' width='650' align='center'/></p>
<hr>
<h1>在Ubuntu、Debian安裝Percona</h1>
<p>1.下載Percona套件至套件套中並安裝</p>
<pre><code>#gpg --keyserver  hkp://keys.gnupg.net --recv-keys 1C4CBDCDCD2EFD2A
#gpg -a --export CD2EFD2A | sudo apt-key add -</code></pre>
<p><img src='images/Percona+install-u1.png' width='650' align='center'/></p>
<p>2.依照不同OS及OS版本，加入不同的設定至/etc/apt/sources.list中。</p>
<pre><code>#vi /etc/apt/sources.list</code></pre>
<p>2-1 Ubuntu</p>
<p>a. Ubuntu10</p>
<pre><code>deb http://repo.percona.com/apt lucid main
deb-src http://repo.percona.com/apt lucid main</code></pre>
<p><img src='images/Percona+install-u2.png' width='650' align='center'/></p>
<p>b. Ubuntu12</p>
<pre><code>deb http://repo.percona.com/apt precise main
deb-src http://repo.percona.com/apt precise main</code></pre>
<p><img src='images/Percona+install-u3.png' width='650' align='center'/></p>
<p>2-2 Debian</p>
<pre><code>deb http://repo.percona.com/apt squeeze main
deb-src http://repo.percona.com/apt squeeze main</code></pre>
<p><img src='images/Percona+install-d1.png' width='650' align='center'/></p>
<p>3.更新套件庫</p>
<pre><code>#apt-get update</code></pre>
<p><img src='images/Percona+install-u4.png' width='650' align='center'/></p>
<p>4.安裝Percona</p>
<pre><code>#apt-get install percona-server-server-5.5 percona-server-client-5.5</code></pre>
<p><img src='images/Percona+install-u5.png' width='650' align='center'/></p>
<p>5.設定root密碼</p>
<pre><code># mysqladmin -u root password 1qaz</code></pre>
<p>6.登入mysql</p>
<pre><code>#mysql -uroot -p</code></pre>
<p><img src='images/Percona+install-c7.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Percona+SmartMachine.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Percona+SmartMachine.md">Percona+SmartMachine.md</a></h1><br/><p>The Joyent Percona SmartMachine is a dynamically scalable virtual machine that is optimized for the cloud. It&#39;s based on a standard MySQL SmartMachine, with general software stripped down to bare minimum, and with Percona Server (MySQL) pre-installed and preconfigured for ultimate performance and scalability. Percona Server (MySQL) is better suited for cloud environments with its added features and performance enhancements.</p>
<p>The Joyent Percona Smartmachine is available in both Percona Server 5.1 and Percona Server 5.5.  Both are 64-bit.  The corresponding dataset templates in my.joyentcloud.com are as follows:</p>
<p>Percona 5.1: percona:1.0.7</p>
<p>Percona 5.5: percona:1.2.2</p>
<p>In this page:</p>
<h1>Directory Layout</h1>
<p>The directory layout is similar to a standard Joyent MySQL SmartMachine:</p>
<p>||Directory     ||Description<br>|/mysql             |Holds Percona Server MySQL binaries<br>|/databases     |The data directory for MySQL<br>|/var/log/mysql     |Where all MySQL logs are kept<br>|/backups     |Backups files are stored here from Joyent QuickBackup</p>
<h1>Starting and stopping Percona Server (MySQL)</h1>
<p>The Percona Server (MySQL) process is configured to run under SMF (Service Management Facility); the SmartOS way to stop and start services. See About the Service Management Facility.</p>
<p>Percona already comes started by default. To disable or stop the service:</p>
<pre><code># svcadm disable mysql:percona</code></pre>
<p>To enable or start the service:</p>
<pre><code># svcadm enable mysql:percona</code></pre>
<p>To restart the service:</p>
<pre><code># svcadm restart mysql:percona</code></pre>
<h1>Connecting to Percona Server (MySQL)</h1>
<p>The Percona MySQL server is configured to listen on the private IP address. The private IP can be seen through the portal or by using ifconfig -a; it is the one that starts with 10.. It is strongly recommended that you connect to your Percona Server MySQL appliance from a different SmartMachine (such as a standard generic SmartMachine) using the private IP, regardless of whether from your website code directly (for regular use), or whether you set up phpMyAdmin on another SmartMachine for management or troubleshooting.</p>
<p>We recommend as a best practice that you not use ther MySQL root user. Instead, you should first set up a restricted user with the minimum privileges actually needed.</p>
<p>You can just connect to your appliance and log into MySQL using mysql using the MySQL root password when prompted:</p>
<pre><code># mysql -uroot -p</code></pre>
<p>Such a connection takes place over a localhost UNIX socket.</p>
<h1>Connecting to Percona Server (MySQL) using SSH tunnels</h1>
<p>While you can re-configure your MySQL instance to listen on the public IP instead (or all available IPs), it is not recommended to do that for security reasons. Instead, you can use SSH tunnels for secure remote connections. Some MySQL administrator tools (e.g. Navicat) already provide for SSH tunneling functionality. You&#39;d use these values when configuring such tool:</p>
<ul>
<li>SSH hostname: <smartmachine-hostname-or-ip></li>
<li>SSH port: 22 (should be default)</li>
<li>SSH username (login): admin</li>
<li>SSH password: <smartmachine-admin-password></li>
<li>MySQL hostname: <smartmachine-private-ip></li>
<li>MySQL port: 3306 (should be default)</li>
<li>MySQL username: root (or a custom user your created)</li>
<li>MySQL password: <smartmachine-mysql-password><br>To use &#39;ssh&#39; in a terminal to open the tunneled connection instead:</li>
</ul>
<pre><code>ssh -L3336:&lt;smartmachine-private-ip&gt;:3306 -N admin@&lt;smartmachine-hostname&gt;</code></pre>
<p>You&#39;d change 3336 to anything you like, that&#39;s the local port on your computer that you&#39;ll connect the MySQL client to afterwards.</p>
<h1>Backing up MySQL with Joyent QuickBackup</h1>
<p>Part of the Joyent Percona SmartMachine is Joyent QuickBackup, a fast non-blocking MySQL backup service powered by Percona Xtrabackup on the back end. This service comes already configured with the username and password configured, but disabled by default. You do not need to change the username and password settings. Only minute, hour, day, and expiredays need to be set.</p>
<p>To configure the backup service, use the svccfg command to set the following values. By default the service is set to backup every night at midnight</p>
<p>||Property     ||Description     ||Accepted Values     ||Default Value<br>|quickbackup/username     |MySQL user for QuickBackup     |16 characters     |qb-xxxxxxxx<br>|quickbackup/password     |MySQL password for QuickBackup |41 characters     |xxxxxxxxxxx<br>|quickbackup/minute     |Minute of the hour to backup     |0-60 comma separated or &#39;all&#39;     |0<br>|quickbackup/hour     |Hour of the day to backup     |0-23 comma separated or &#39;all&#39;     |0<br>|quickbackup/day     |Day of the week to backup     |sun-sat comma separated or &#39;all&#39;     |all<br>quickbackup/expiredays     Number of days to keep backups     1-255 or &#39;none&#39;     |3<br>To see the current settings, use the svcprop command like this:</p>
<pre><code># svcprop svc:/network/mysql:quickbackup | grep quickbackup | head -6
quickbackup/day astring all
quickbackup/expiredays astring 3
quickbackup/hour astring 0
quickbackup/minute astring 0
quickbackup/username astring qb-xxxxxxxx
quickbackup/password astring xxxxxxxx</code></pre>
<p>For example, to have the service do a backup every 15 minutes of every hour Monday, Tuesday, Wednesday, Thursday, and Friday, you would use the following svccfg commands:</p>
<pre><code># svccfg -s network/mysql:quickbackup setprop quickbackup/minute = astring: 0,15,30,45
# svccfg -s network/mysql:quickbackup setprop quickbackup/hour = astring: all
# svccfg -s network/mysql:quickbackup setprop quickbackup/day = astring: mon,tue,wed,thur,fri</code></pre>
<p>After setting the properties use the svcadm command to refresh and restart the service:</p>
<pre><code># svcadm refresh mysql:quickbackup
# svcadm restart mysql:quickbackup
# svcs mysql:quickbackup
STATE          STIME    FMRI
enabled        Apr_13   svc:/network/mysql:quickbackup</code></pre>
<p>Each backup will be its own file in /backups in files named %Y-%m-%d_%H-%M-%S-backup.tar.gz. The backup files contain all of the databases. A future release will let you back up specific databases.</p>
<p>QuickBackup backup messages are logged to /var/log/mysql/backups.log. If the backup completed successfully you will see:</p>
<pre><code>Backup completed successfully.</code></pre>
<p>in the log file at the end of every back up.</p>
<p>At the end of every backup QuickBackup will do a clean up of old backup files and remove them if older than quickbackup/expiredays set. It does this by checking the last modification time of the backup file.</p>
<h1>Restoring a MySQL backup with Joyent QuickBackup</h1>
<p>To restore a backup you must first shut down the MySQL server:</p>
<pre><code># svcadm disable mysql:percona
# svcs mysql:percona
STATE          STIME    FMRI
disabled       14:19:21 svc:/network/mysql:percona</code></pre>
<p>Next, tell QuickBackup which backup you want to restore by giving it the proper file of the backup. If everything works as expected you&#39;ll see the message that the restore completed successfully:</p>
<pre><code># quickbackup restore /backups/2011-04-16_20-20-00-backup.tar.gz
Restore from /backups/2011-04-16_20-20-00-backup.tar.gz
Restore completed successfully.</code></pre>
<p>If you receive an error you&#39;ll need to check the QuickBackup restore log file at /var/log/mysql/restores.log to see what happened.</p>
<p>Once the restore is complete, re-enable MySQL, and everything will be running from the backup you just restored from:</p>
<pre><code># svcadm enable mysql:percona
# svcs mysql:percona
STATE          STIME    FMRI
online         14:30:31 svc:/network/mysql:percona</code></pre>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Pkagin%C3%83%C3%82%C2%BA%C3%83%C3%83%C3%83.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Pkagin%C3%83%C3%82%C2%BA%C3%83%C3%83%C3%83.md">Pkagin%C3%83%C3%82%C2%BA%C3%83%C3%83%C3%83.md</a></h1><br/><h1>pkgin</h1>
<p>pkgin這個command是關於SmartOS套件的相關安裝與維護指令。</p>
<p>您可以在putty或是類似的terminal工具連線至SmartOS後，輸入pkgin即可查詢pkgin的指令後面能接的command說明。</p>
<pre><code>[root@MiCloudDBT /tmp]# pkgin]([root@MiCloudDBT /tmp# pkgin)
Usage: pkgin [-cdfFhlnPvVy] command [package ...]](Usage: pkgin [-cdfFhlnPvVy command [package ...])

Commands and shortcuts:
list (ls) -  Lists installed packages.
avail (av) -  Lists available packages.
install (in) -  Performs packages installation or upgrade.
update (up) -  Creates and populates the initial database.
remove (rm) -  Remove packages and depending packages.
upgrade (ug) -  Upgrade main packages to their newer versions.
full-upgrade (fug) -  Upgrade all packages to their newer versions.
show-deps (sd) -  Display direct dependencies.
show-full-deps (sfd) -  Display dependencies recursively.
show-rev-deps (srd) -  Display reverse dependencies recursively.
keep (ke) -  Marks package as &quot;non auto-removable&quot;.
unkeep (uk) -  Marks package as &quot;auto-removable&quot;.
show-keep (sk) -  Display &quot;non auto-removable&quot; packages.
search (se) -  Search for a package.
clean (cl) -  Clean packages cache.
autoremove (ar) -  Autoremove orphan dependencies.</code></pre>
<p><img src='images/Pkagin%C3%83%C3%82%C2%BA%C3%83%C3%83%C3%83-pkgin.png' width='750' align='center'/></p>
<h1>下面介紹幾個較常使用的command(list、search、install、remove):</h1>
<hr>
<h1>List：</h1>
<p>列出該台SmartOS您已經安裝的套件，輸入指令如下：</p>
<pre><code>pkgin list</code></pre>
<h2><img src='images/Pkagin%C3%83%C3%82%C2%BA%C3%83%C3%83%C3%83-pkgin=list.png' width='750' align='center'/></h2>
<h1>Search：</h1>
<p>搜尋您想要安裝的軟體，輸入指令如下：</p>
<pre><code>pkgin search [軟體名稱]](pkgin search [軟體名稱)
ex:pkgin search postgre</code></pre>
<h2><img src='images/Pkagin%C3%83%C3%82%C2%BA%C3%83%C3%83%C3%83-pkgin=search.png' width='750' align='center'/></h2>
<h1>Install：</h1>
<p>安裝您剛剛搜尋到的套件，輸入指令如下：</p>
<pre><code>pkgin install [套件名稱(使用pkgin search查詢)]](pkgin install [套件名稱 - 使用pkgin search查詢)
ex:pkgin install postgresql90-adminpack-9.0.4</code></pre>
<h2><img src='images/Pkagin%C3%83%C3%82%C2%BA%C3%83%C3%83%C3%83-pkgin=install.png' width='750' align='center'/></h2>
<h1>Remove:移除套件您已安裝的套件，輸入指令如下：</h1>
<pre><code>pkgin remove [套件名稱(使用pkgin list查詢)]](pkgin remove [套件名稱 - 使用pkgin list查詢)
ex:pkgin remove postgresql90-adminpack-9.0.4</code></pre>
<h2><img src='images/Pkagin%C3%83%C3%82%C2%BA%C3%83%C3%83%C3%83-pkgin=remove.png' width='750' align='center'/></h2>
<h1>若您需要安裝的軟體在search時找不到相關的套件時，可使用以下指令：</h1>
<pre><code>wget [軟體壓縮檔連結網址]](wget [軟體壓縮檔連結網址)
wget ftp://ftp.ruby-lang.org//pub/ruby/1.9/ruby-1.9.2-p0.tar.gz
gtar xvzf [軟體壓縮檔]](gtar xvzf [軟體壓縮檔)
gtar xvzf ruby-1.9.2-p0.tar.gz
cd [軟體資料夾]](cd [軟體資料夾)
cd ruby-1.9.2-p0
./configure
gmake
ls
sudo gmake install
ruby -v</code></pre>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="PkaginÃÂºÃÃÃ.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=PkaginÃÂºÃÃÃ.md">PkaginÃÂºÃÃÃ.md</a></h1><br/><h1>pkgin</h1>
<p>pkgin這個command是關於SmartOS套件的相關安裝與維護指令。</p>
<p>您可以在putty或是類似的terminal工具連線至SmartOS後，輸入pkgin即可查詢pkgin的指令後面能接的command說明。</p>
<pre><code>[root@MiCloudDBT /tmp]# pkgin]([root@MiCloudDBT /tmp# pkgin)
Usage: pkgin [-cdfFhlnPvVy] command [package ...]](Usage: pkgin [-cdfFhlnPvVy command [package ...])

Commands and shortcuts:
list (ls) -  Lists installed packages.
avail (av) -  Lists available packages.
install (in) -  Performs packages installation or upgrade.
update (up) -  Creates and populates the initial database.
remove (rm) -  Remove packages and depending packages.
upgrade (ug) -  Upgrade main packages to their newer versions.
full-upgrade (fug) -  Upgrade all packages to their newer versions.
show-deps (sd) -  Display direct dependencies.
show-full-deps (sfd) -  Display dependencies recursively.
show-rev-deps (srd) -  Display reverse dependencies recursively.
keep (ke) -  Marks package as &quot;non auto-removable&quot;.
unkeep (uk) -  Marks package as &quot;auto-removable&quot;.
show-keep (sk) -  Display &quot;non auto-removable&quot; packages.
search (se) -  Search for a package.
clean (cl) -  Clean packages cache.
autoremove (ar) -  Autoremove orphan dependencies.</code></pre>
<p><img src='images/Pkagin%C3%83%C3%82%C2%BA%C3%83%C3%83%C3%83-pkgin.png' width='750' align='center'/></p>
<h1>下面介紹幾個較常使用的command(list、search、install、remove):</h1>
<hr>
<h1>List：</h1>
<p>列出該台SmartOS您已經安裝的套件，輸入指令如下：</p>
<pre><code>pkgin list</code></pre>
<h2><img src='images/Pkagin%C3%83%C3%82%C2%BA%C3%83%C3%83%C3%83-pkgin-list.png' width='750' align='center'/></h2>
<h1>Search：</h1>
<p>搜尋您想要安裝的軟體，輸入指令如下：</p>
<pre><code>pkgin search [軟體名稱]](pkgin search [軟體名稱)
ex:pkgin search postgre</code></pre>
<h2><img src='images/Pkagin%C3%83%C3%82%C2%BA%C3%83%C3%83%C3%83-pkgin-search.png' width='750' align='center'/></h2>
<h1>Install：</h1>
<p>安裝您剛剛搜尋到的套件，輸入指令如下：</p>
<pre><code>pkgin install [套件名稱(使用pkgin search查詢)]](pkgin install [套件名稱 - 使用pkgin search查詢)
ex:pkgin install postgresql90-adminpack-9.0.4</code></pre>
<h2><img src='images/Pkagin%C3%83%C3%82%C2%BA%C3%83%C3%83%C3%83-pkgin-install.png' width='750' align='center'/></h2>
<h1>Remove:移除套件您已安裝的套件，輸入指令如下：</h1>
<pre><code>pkgin remove [套件名稱(使用pkgin list查詢)]](pkgin remove [套件名稱 - 使用pkgin list查詢)
ex:pkgin remove postgresql90-adminpack-9.0.4</code></pre>
<h2><img src='images/Pkagin%C3%83%C3%82%C2%BA%C3%83%C3%83%C3%83-pkgin-remove.png' width='750' align='center'/></h2>
<h1>若您需要安裝的軟體在search時找不到相關的套件時，可使用以下指令：</h1>
<pre><code>wget [軟體壓縮檔連結網址]](wget [軟體壓縮檔連結網址)
wget ftp://ftp.ruby-lang.org//pub/ruby/1.9/ruby-1.9.2-p0.tar.gz
gtar xvzf [軟體壓縮檔]](gtar xvzf [軟體壓縮檔)
gtar xvzf ruby-1.9.2-p0.tar.gz
cd [軟體資料夾]](cd [軟體資料夾)
cd ruby-1.9.2-p0
./configure
gmake
ls
sudo gmake install
ruby -v</code></pre>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Pkgin+usage.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Pkgin+usage.md">Pkgin+usage.md</a></h1><br/><h1>pkgin</h1>
<p>pkgin這個command是關於SmartOS套件的相關安裝與維護指令。</p>
<p>您可以在putty或是類似的terminal工具連線至SmartOS後，輸入pkgin即可查詢pkgin的指令後面能接的command說明。</p>
<pre><code>[root@MiCloudDBT /tmp]# pkgin]([root@MiCloudDBT /tmp# pkgin)
Usage: pkgin [-cdfFhlnPvVy] command [package ...]](Usage: pkgin [-cdfFhlnPvVy command [package ...])

Commands and shortcuts:
list (ls) -  Lists installed packages.
avail (av) -  Lists available packages.
install (in) -  Performs packages installation or upgrade.
update (up) -  Creates and populates the initial database.
remove (rm) -  Remove packages and depending packages.
upgrade (ug) -  Upgrade main packages to their newer versions.
full-upgrade (fug) -  Upgrade all packages to their newer versions.
show-deps (sd) -  Display direct dependencies.
show-full-deps (sfd) -  Display dependencies recursively.
show-rev-deps (srd) -  Display reverse dependencies recursively.
keep (ke) -  Marks package as &quot;non auto-removable&quot;.
unkeep (uk) -  Marks package as &quot;auto-removable&quot;.
show-keep (sk) -  Display &quot;non auto-removable&quot; packages.
search (se) -  Search for a package.
clean (cl) -  Clean packages cache.
autoremove (ar) -  Autoremove orphan dependencies.</code></pre>
<p><img src='images/Pkgin+usage-pkgin.png' width='650'  align='center'/></p>
<h1>下面介紹幾個較常使用的command(list、search、install、remove):</h1>
<hr>
<h1>List：</h1>
<p>列出該台SmartOS您已經安裝的套件，輸入指令如下：</p>
<pre><code>pkgin list</code></pre>
<h2><img src='images/Pkgin+usage-pkgin-list.png' width='650'  align='center'/></h2>
<h1>Search：</h1>
<p>搜尋您想要安裝的軟體，輸入指令如下：</p>
<pre><code>pkgin search [軟體名稱]](pkgin search [軟體名稱)
ex:pkgin search postgre</code></pre>
<h2><img src='images/Pkgin+usage-pkgin-search.png' width='650'  align='center'/></h2>
<h1>Install：</h1>
<p>安裝您剛剛搜尋到的套件，輸入指令如下：</p>
<pre><code>pkgin install [套件名稱(使用pkgin search查詢)]](pkgin install [套件名稱 - 使用pkgin search查詢)
ex:pkgin install postgresql90-adminpack-9.0.4</code></pre>
<h2><img src='images/Pkgin+usage-pkgin-install.png' width='650'  align='center'/></h2>
<h1>Remove:移除套件您已安裝的套件，輸入指令如下：</h1>
<pre><code>pkgin remove [套件名稱(使用pkgin list查詢)]](pkgin remove [套件名稱 - 使用pkgin list查詢)
ex:pkgin remove postgresql90-adminpack-9.0.4</code></pre>
<h2><img src='images/Pkgin+usage-pkgin-remove.png' width='650'  align='center'/></h2>
<h1>若您需要安裝的軟體在search時找不到相關的套件時，可使用以下指令：</h1>
<pre><code>wget [軟體壓縮檔連結網址]](wget [軟體壓縮檔連結網址)
wget ftp://ftp.ruby-lang.org//pub/ruby/1.9/ruby-1.9.2-p0.tar.gz
gtar xvzf [軟體壓縮檔]](gtar xvzf [軟體壓縮檔)
gtar xvzf ruby-1.9.2-p0.tar.gz
cd [軟體資料夾]](cd [軟體資料夾)
cd ruby-1.9.2-p0
./configure
gmake
ls
sudo gmake install
ruby -v</code></pre>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Preload+Software+Default+Password.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Preload+Software+Default+Password.md">Preload+Software+Default+Password.md</a></h1><br/><h1>預載程式之預設密碼</h1>
<p>登入 MiCloud 完成後能在畫面左上方點選主機，在從下方表格點選您的主機查看細項。<br><img src='images/Preload+Software+Default+Password-p1+-21.png' width='650' align='center'/><br>進入查詢細項頁面，可於 <strong>概述</strong> 中找到 <strong>Credentials</strong> 欄位,左鍵點擊 <strong>Show Credentials</strong>，查看該台主機預載程式之密碼。<br><img src='images/Preload+Software+Default+Password-p1+-18.png' width='650' align='center'/></p>
<p>登入帳號與密碼說明如下:</p>
<center><br>||       ||功能   ||登入帳號  ||登入步驟<br>| root   |系統帳號 |root  |登入：ssh root@your.ip.address<br>密碼：本表格root密碼<br>| admin  |系統帳號 |admin |登入：ssh admin@your.ip.address<br>密碼：本表格admin密碼<br>| mysql  |MySQL資料庫帳號 |root |登入：mysql -uroot -p<br>密碼：本表格mysql密碼<br>| pgsql  |PostgreSQL資料庫帳號 |postgres |登入：/opt/local/bin/psql -U postgres<br>密碼：(此時輸入pgsql密碼欄位)<br>| virtualmin  |Virtualmin系統管理工具帳號 |admin |啓動服務：svcadm enable webmin<br>連線：<a href="https://your.ip.address:10000/">https://your.ip.address:10000/</a><br>帳號：admin<br>密碼：本表格virtualmin密碼<br>| jill  |系統帳號 |jill |登入：ssh jill@your.ip.address<br>密碼：本表格jill密碼<br>| zxtm  |負載平衡服務帳號 |admin |連線：<a href="http://your.ip.address:9090">http://your.ip.address:9090</a><br>帳號：admin<br>密碼：本表格zxtm密碼<br></center>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="PuttyLoginErrorCannotAgreeAClientToServerCipher.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=PuttyLoginErrorCannotAgreeAClientToServerCipher.md">PuttyLoginErrorCannotAgreeAClientToServerCipher.md</a></h1><br/><h1>Putty登入SmartOS錯誤訊息：Couldn&#39;t agree a client-to-server cipher</h1>
<p>申請SmartOS之用戶，如遇到登入錯誤訊息如下：<br><img src='images/PuttyLoginErrorCannotAgreeAClientToServerCipher-CannotAgreeAClientToServerCipher.png' align='center'/><br>則可能原因有數種，您可檢查下面項目：<br><em>  確認SSH Key已經上傳，且本機之連線已經使用SSH私鑰加密。
</em>  針對SmartOS，您可重新產生SSH Key並重新上傳至Portal，應該就可以直些連線。<br><em>  如上述均未能解決連線問題，您可確認Putty版本是否為最新，可至Putty官方網站下載新版本軟體，重新執行即可正常連線。
</em>  如均為您解決您的問題，可聯繫<a href="mailto:service@micloud.tw">MiCloud Service</a><br>參考：</p>
<ul>
<li><a href="http://www.google.com.tw/url?sa=t&amp;rct=j&amp;q=putty&amp;source=web&amp;cd=1&amp;ved=0CDIQFjAA&amp;url=http%3A%2F%2Fwww.chiark.greenend.org.uk%2F~sgtatham%2Fputty%2Fdownload.html&amp;ei=YJbXTtDACITKmQXppsXtCw&amp;usg=AFQjCNEawi7s0aRUeJP3qKnncgvPiSqZYA&amp;sig2=-7FhRbxa0seZVhrrNQUBnw">Putty官方網站</a></li>
<li>[<a href="http://hub.opensolaris.org/bin/view/Community+Group+on/2009013001]](*">http://hub.opensolaris.org/bin/view/Community+Group+on/2009013001]](*</a>  [<a href="http://hub.opensolaris.org/bin/view/Community+Group+on/2009013001">http://hub.opensolaris.org/bin/view/Community+Group+on/2009013001</a>)</li>
</ul>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="QNA.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=QNA.md">QNA.md</a></h1><br/><h1>常見問題</h1>
<ul>
<li><a href="/index.html?page=PuttyLoginErrorCannotAgreeAClientToServerCipher.md">PUTTY連線錯誤訊息：Cannot Agree A Client To Server Cipher</a></li>
<li><a href="/index.html?page=SmartOS+Install+Oracle.md">SmartOS如何安裝Oracle</a></li>
<li><a href="/index.html?page=What+is+Smart+Machine.md">何謂Smart Machine?</a></li>
<li><a href="/index.html?page=Update+Timezone.md">如何更新主機時區？</a></li>
<li><a href="/index.html?page=View+Used+Resources.md">如何檢視已使用的資源?</a></li>
<li><a href="/index.html?page=View+network+routing+instructions.md">如何檢視網路路由?</a></li>
<li><a href="/index.html?page=Used+commmands.md">常用指令集有哪些?</a></li>
<li><a href="/index.html?page=Micloud+Features.md">MiCloud的特點是什麼？</a></li>
</ul>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="README.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=README.md">README.md</a></h1><br/><h1>MiCloud官方資源</h1>
<p><a href="http://micloud.tw"><img width="15px" src="images/point.png"/> MiCloud官方網站</a></p>
<p><a href="http://micloud.tw/ch/price/price"><img width="15px" src="images/point.png"/> MiCloud產品規格</a></p>
<p><a href="http://blogger.micloud.tw"><img width="15px" src="images/point.png"/> MiCloud Blog</a></p>
<p><a href="mailto:service@micloud.tw"><img width="15px" src="images/point.png"/> MiCloud服務信箱</a></p>
<h1>MiCloud操作與文件</h1>
<p><a href="/index.html?page=ApplyAndOrder.md"><img width="15px" src="images/point.png"/>自助服務操作資訊</a></p>
<p><a href="/index.html?page=3PartyCloudServer.md"><img width="15px" src="images/point.png"/>MiCloud第三方服務主機</a></p>
<p><a href="/index.html?page=MiCloudCloudAPI.md"><img width="15px" src="images/point.png"/>雲端實例及API</a></p>
<p><a href="/index.html?page=QNA.md"><img width="15px" src="images/point.png"/>常見問題</a></p>
<p><a href="/index.html?page=BlogShare.md"><img width="15px" src="images/point.png"/>Blog分享</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Rebooting+or+Shutting+Down+a+SmartMachine.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Rebooting+or+Shutting+Down+a+SmartMachine.md">Rebooting+or+Shutting+Down+a+SmartMachine.md</a></h1><br/><p>The best way to reboot your SmartMachine is in a way that gracefully shuts down all of your major servers (especially databases).</p>
<p>It is highly reccomend that on production servers you use this shutdown / reboot method from the command line:</p>
<ul>
<li>SSH into your SmartMachine as admin.</li>
<li>Use this commnd to gracefully reboot your SmartMachine:</li>
</ul>
<pre><code>sudo shutdown -y -i6 -g0</code></pre>
<pre><code>You will have to give the admin user&#39;s password.</code></pre>
<p>For development and testing systems you can also shut down or reboot your machine by using the Reboot or Shutdown buttons in my.joyentcloud.com:<br><img src='images/Rebooting+or+Shutting+Down+a+SmartMachine-myjoyent+-1.png' width='650' align='left'/></p>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Recovering+a+Forgotten+SmartMachine+Password.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Recovering+a+Forgotten+SmartMachine+Password.md">Recovering+a+Forgotten+SmartMachine+Password.md</a></h1><br/><p>如您忘記SmartMachine只密碼，您可以使用下面方式，透過Webmin來回復您的密碼:</p>
<pre><code>https://&lt;PUBLIC_IP&gt;:10000/password-recovery</code></pre>
<p>or</p>
<pre><code>https://&lt;HOSTNAME&gt;:10000/password-recovery</code></pre>
<p>您可以參考相關影片片段：<a href="您可以參考相關影片片段：[http://p.castfire.com/NTYYi/video/511969/511969-2011-02-14-160309.sd.m4v"><a href="http://p.castfire.com/NTYYi/video/511969/511969_2011-02-14-160309.sd.m4v">http://p.castfire.com/NTYYi/video/511969/511969_2011-02-14-160309.sd.m4v</a>]</a></p>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Riak+SmartMachine.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Riak+SmartMachine.md">Riak+SmartMachine.md</a></h1><br/><h1>安裝Riak</h1>
<p>Riak為開放式、高擴增性、可容錯的NoSQL資料庫套件，提供大量資料快速存儲服務，以開放程式碼為基礎的分散式資料庫系統。<br>MiCloud所提供的SmartOS主機中，已有預載Riak服務的主機只有SmartOS32+Riak這個版本，若其他規格的主機想安裝Riak於您的主機上，請按照下列步驟進行安裝。</p>
<p>1.檢視主機上Riak可安裝的版本</p>
<pre><code>#pkgin se riak</code></pre>
<p><img src='images/Riak+SmartMachine-p1.png' width='650' align='center'/></p>
<p>2.進行安裝</p>
<pre><code># pkgin in riak-1.0.2nb1</code></pre>
<p><img src='images/Riak+SmartMachine-p2.png' width='650' align='center'/></p>
<p>3.完成後啟動服務，但會發現服務的狀態為offline</p>
<pre><code>#svcadm enable riak
#svcs riak</code></pre>
<p><img src='images/Riak+SmartMachine-p3.png' width='650' align='center'/><br>請使用下方指令檢視服務無法啟動的原因</p>
<pre><code>#svcs -xv riak</code></pre>
<p><img src='images/Riak+SmartMachine-p4.png' width='650' align='center'/></p>
<p>4.啟動epmd服務，並將riak重新啟動</p>
<pre><code>#svcadm enable svc:/network/epmd:default
#svcadm disable riak
#svcadm enable riak</code></pre>
<p><img src='images/Riak+SmartMachine-p6.png' width='650' align='center'/></p>
<p>5.檢視服務是否已啟動</p>
<pre><code>#svcs riak</code></pre>
<p><img src='images/Riak+SmartMachine-p7.png' width='650' align='center'/></p>
<p>6.連線至riak</p>
<pre><code>#riak attach</code></pre>
<p><img src='images/Riak+SmartMachine-p8.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Running+a+Web+Server+on+a+SmartMachine.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Running+a+Web+Server+on+a+SmartMachine.md">Running+a+Web+Server+on+a+SmartMachine.md</a></h1><br/><p>Content</p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Sandbox.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Sandbox.md">Sandbox.md</a></h1><br/><h1>Sandbox</h1>
<p><script><br>  (function() {<br>    var cx = &#39;002616967781504063184:ccxhequ_zu4&#39;;<br>    var gcse = document.createElement(&#39;script&#39;);<br>    gcse.type = &#39;text/javascript&#39;;<br>    gcse.async = true;<br>    gcse.src = (document.location.protocol == &#39;https:&#39; ? &#39;https:&#39; : &#39;http:&#39;) +<br>        &#39;//www.google.com/cse/cse.js?cx=&#39; + cx;<br>    var s = document.getElementsByTagName(&#39;script&#39;)[0];<br>    s.parentNode.insertBefore(gcse, s);<br>  })();<br></script></p>
<div style="width:500px"><br><gcse:search></gcse:search><br></div>

<hr>
<embed width="420" height="345" src="http://youtube.googleapis.com/v/QdHGTfH_WGg&hd=1" type="application/x-shockwave-flash"></embed> 

<hr>
<input type="text" id="test" value="do test"/>

<hr>
<p><img src="https://portal.micloud.tw/images/logo.png"/></p>
<ul>
<li>test code block</li>
</ul>
<table>
<thead>
<tr>
<th>aaaa</th>
<th>bbbb</th>
<th>cccc</th>
</tr>
</thead>
<tbody>
<tr>
<td>1111</td>
<td>2222</td>
<td>3333</td>
</tr>
</tbody>
</table>
<pre>
  <code>
function(){

  alert('Hello');

}
  </code> 
</pre>  

<hr>
<pre><code>function(){
  alert(&#39;Hello&#39;);
}</code></pre>
<hr>
<p>  function(){<br>    alert(&#39;Hello&#39;);<br>  }</p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Search+information.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Search+information.md">Search+information.md</a></h1><br/><h1>Windows察看主機資訊</h1>
<p>申請MiCloud Windows Server之後，您會需要進入Windows Server上安裝與設定您所要提供的相關服務，<a href="http://micloud.tw">MiCloud Customer Portal</a></p>
<h1>查詢主機基本資料</h1>
<p>1.登入 <a href="http://micloud.tw">MiCloud</a><br><img src='images/Search+information-p1.png' width='650' align='center'/><br>2.輸入您 MiCloud 的帳號密碼<br><img src='images/Search+information-p2.png' width='650' align='center'/><br>3.點選您的主機<br><img src='images/Search+information-p3.png' width='650' align='center'/><br>４.顯示其相關資訊,可點&quot;SHOW CREDENTIAL&quot;查看其登入帳密<br><img src='images/Search+information-p4.png' width='650' align='center'/><br>5.顯示其登入密碼<br><img src='images/Search+information-p5.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Security+concerns.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Security+concerns.md">Security+concerns.md</a></h1><br/><h1>使用MiCloud會不會有安全上的疑慮？</h1>
<ul>
<li>MiCloud植基於Joyent公有雲架構，從SmartDataCenter的ZFS架構，使用Zone安全隔離每部虛擬機器的檔案空間，並加上網路上安全規劃的實體隔離，達到虛擬主機內部安全機制，並加上MiCloud特殊防火牆規劃，特別防護網路上多種攻擊，使您可放心使用MiCloud服務。</li>
</ul>
<ul>
<li>除平台上的安全，使用者於申請帳號時候的SSH Key亦保護擁有金鑰的使用者可以連線使用，並隔離所有無金鑰的駭客。</li>
</ul>
<ul>
<li>此外，主機的安全亦在神通嚴密的機房安全管理機制下(ISO 27001)受到嚴密的保護：</li>
</ul>
<ul>
<li>*機房門禁進出管理</li>
</ul>
<ul>
<li>*24小時監視錄影系統</li>
</ul>
<ul>
<li>*24小時網路監控</li>
</ul>
<ul>
<li>*防火牆之保護</li>
</ul>
<ul>
<li>*機房電力、空調、保全、消防等全面品質管控</li>
</ul>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Security+with+IPFilter.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Security+with+IPFilter.md">Security+with+IPFilter.md</a></h1><br/><h1>安全與IPFILTER</h1>
<p>在您全新Joyent的Smartmachines預設虛擬NIC的網路和default情況下， 這意味著您必須在您的電腦的網路協定中進行相關設訂。 最安全的做法，是建立一台防禦主機或是VPN伺服器，並以後端存取訪問相關服務，如資料庫存取或是Web伺服器，並加載負載平衡器如Zeus/Stingray。</p>
<p>以下是以IPFILTER為您的SmartOS Smartmachine所做的基本的分配概況：</p>
<h1>如何啟動與停止IPFILTER</h1>
<p>以SmartOS的方式，在IPFILTER過程配置下運行的SMF（服務管理工具）進行停止和啟動服務。<br>查詢關於服務管理工具。</p>
<p>IPFILTER是在default情況下禁用。 如何啟用，禁用，啟動或停止服務:</p>
<pre><code># svcadm enable ipfilter</code></pre>
<p>重新啟動該服務:</p>
<pre><code># svcadm restart ipfilter</code></pre>
<p>檢查服務的狀態:</p>
<pre><code># svcs -a | grep ipfilter
online         20:49:27 svc:/network/ipfilter:default</code></pre>
<h1>IPFilter相關範例規則</h1>
<ul>
<li>IPFilter規則都包含在/ etc / IPF / ipf.conf</li>
<li>src.ip.addr指定源頭和dest.ip.addr指定的目的地。<br>允許從一個特定的IP位址的進入:</li>
</ul>
<pre><code>pass in quick from src.ip.addr to dest.ip.addr</code></pre>
<p>允許從特定IP位址的進入到一個特定的Port：:</p>
<pre><code>pass in quick from src.ip.addr to dest.ip.addr port=22</code></pre>
<p>允許ICMP只從一個特定的IP位址進入:</p>
<pre><code>pass in quick proto icmp from src.ip.addr to dest.ip.addr keep state</code></pre>
<p>允許任何人從SmartMachine出去:</p>
<pre><code>pass out from src.ip.addr to any keep state</code></pre>
<p>阻止一個特定的IP位址:</p>
<pre><code>block in from src.ip.addr to dest.ip.addr</code></pre>
<p>阻止一個特定的範圍:</p>
<pre><code>block in from src.ip.addr/xx to dest.ip.addr</code></pre>
<p>阻止從任何一個特定的IP進出:</p>
<pre><code>block in from any to dest.ip.addr</code></pre>
<p>阻止ICMP只從一個特定的IP進入:</p>
<pre><code>block in proto icmp from src.ip.addr to dest.ip.addr</code></pre>
<p>阻止所有從任何一個特定的port進出:</p>
<pre><code>block in from any to dest.ip.addr port = (example:22)</code></pre>
<p>設置default的拒絕規則，阻止除了443和80以外的Port:</p>
<pre><code>pass out from src.ip.addr to any keep state
pass in quick from any to dest.ip.addr port=443
pass in quick from any to dest.ip.addr port=80
block in from any to dest.ip.addr</code></pre>
<p>只要使用XXXX / XX，而不是使用一個特定的IP，範圍可以適用於任何規則.</p>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Server+Restart+From+Portal.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Server+Restart+From+Portal.md">Server+Restart+From+Portal.md</a></h1><br/><h1>主機之重啟、關閉與刪除</h1>
<p>MiCloud自助服務平台提供給您直接操控主機之重啟、關閉及刪除功能，在您登入MiCloud Customer Portal之後，您可以至主機頁面，點選您欲操控的主機，在右方控制面板中點選您所需要的服務。相關說明如下:</p>
<h1>主機之重啟</h1>
<p>在您登入MiCloud Customer Portal之後，您可以至主機頁面，點選您欲操控的主機，在右方控制面板中，點選&quot;REBOOT&quot;進行重啟。如下圖:</p>
<p><img src='images/Server+Restart+From+Portal-reboot.jpg' width='650px' align='center'/></p>
<p>Reboot會經過關閉後再啟動主機，請用戶耐心等候。</p>
<hr>
<h1>主機之關閉</h1>
<p>關閉主機可由MiCloud管理平台上點選shutdown按鈕，也可以使用指令進行關閉，相關說明如下:</p>
<p>1.由MiCloud管理平台上進行</p>
<p>同上主機管理頁面，點選&quot;shutdown&quot;進行關閉主機。如下圖:<br><img src='images/Server+Restart+From+Portal-shutdown.jpg' width='650px' align='center'/></p>
<p>※shut down後不代表終止合約，帳單仍會繼續計費，如要停止計費請執行DELETE刪除主機。如下圖提醒:</p>
<p><img src='images/Server+Restart+From+Portal-shutdown1.jpg' width='650px' align='center'/></p>
<p>2.執行指令進行關閉<br>登入主機後使用指令來執行shutdown，指令如下:</p>
<pre><code>#poweroff</code></pre>
<p>以SmartMachine為例，執行畫面如下:</p>
<p>執行poweroff後會跳出下方黃色框框的警告視窗，提醒您主機已中斷連線。<br><img src='images/Server+Restart+From+Portal-poweroff.png' width='650px' align='center'/></p>
<p>再回到MiCloud平台上檢查主機是否已被關閉。<br><img src='images/Server+Restart+From+Portal-poweroff2.jpg' width='650px' align='center'/></p>
<hr>
<h1>主機之刪除</h1>
<p>同上主機管理頁面，點選&quot;DELETE&quot;按鍵後，系統將會移除您的主機。</p>
<p>※刪除主機前必需先Shut down主機後才能刪除。</p>
<p><img src='images/Server+Restart+From+Portal-delete.jpg' width='650px' align='center'/></p>
<p>刪除後主機及其上相關資料將無法回復，請確認後再執行。</p>
<p><img src='images/Server+Restart+From+Portal-delete1.jpg' width='650px' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Setting+hostname+on+Linux.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Setting+hostname+on+Linux.md">Setting+hostname+on+Linux.md</a></h1><br/><h1>Linux Hostname設置</h1>
<p>當您申請MiCloud上任何主機時，若未指定主機名稱，系統將預設以亂數產生一串文字做為您的主機名稱，可能類似：fxyzabcd.local的名稱。您可以以IP登入您的主機，並透過&quot;hostname&quot;之指令看到您的Hostname。<br>如您需要重設您的主機名稱，您可以修改某些檔案來達到修改Hostname的目的，不同的作業系統需要更改的檔案並不相同，詳細說明如下:</p>
<h1>Debian</h1>
<p>您需要修改的檔案如下:<br><em>  /etc/hostname
</em>  /etc/hosts</p>
<p>(1)修改/etc/hostname，指令如下:</p>
<pre><code>#vi /etc/hostname</code></pre>
<p>於下方畫面紅色框框更改您新的主機名稱<br><img src='images/Setting+hostname+on+Linux-dehostname.jpg' width='650px' align='center'/></p>
<p>(2)修改/etc/hosts，指令如下:</p>
<pre><code>#vi /etc/hosts</code></pre>
<p>於下方畫面紅色框框更改您的主機名稱<br><img src='images/Setting+hostname+on+Linux-dehostname2.jpg' width='650px' align='center'/></p>
<p>(3)修改完後執行下方指令主機名稱即被更改。</p>
<pre><code>#/etc/init.d/hostname.sh start</code></pre>
<p>當您設定好，您可以使用下面指令驗證：</p>
<pre><code>#hostname</code></pre>
<hr>
<h1>Ubuntu</h1>
<p>您需要修改的檔案如下:<br><em>  /etc/hostname
</em>  /etc/hosts</p>
<p>(1)修改/etc/hostname，指令如下:</p>
<pre><code>#vi /etc/hostname</code></pre>
<p>於下方畫面紅色框框更改您新的主機名稱<br><img src='images/Setting+hostname+on+Linux-ubhostname.jpg' width='650px' align='center'/></p>
<p>(2)修改/etc/hosts，指令如下:</p>
<pre><code>#vi /etc/hosts</code></pre>
<p>於下方畫面紅色框框更改您的主機名稱<br><img src='images/Setting+hostname+on+Linux-ubhostname2.jpg' width='650px' align='center'/></p>
<p>(3)修改完後執行下方指令主機名稱即被更改。</p>
<pre><code>#start hostname</code></pre>
<p>當您設定好，您可以使用下面指令驗證：</p>
<pre><code>#hostname</code></pre>
<hr>
<h1>CentOS</h1>
<p>您需要修改的檔案如下:<br><em>  /etc/sysconfig/network
</em>  /etc/hosts</p>
<p>(1)修改/etc/sysconfig/network，指令如下:</p>
<pre><code>#vi /etc/sysconfig/network</code></pre>
<p>於下方畫面紅色框框更改您新的主機名稱<br><img src='images/Setting+hostname+on+Linux-cehosname.jpg' width='650px' align='center'/></p>
<p>(2)修改/etc/hosts，指令如下:</p>
<pre><code>#vi /etc/hosts</code></pre>
<p>於下方畫面紅色框框更改您的主機名稱<br><img src='images/Setting+hostname+on+Linux-cehosname1.jpg' width='650px' align='center'/></p>
<p>(3)當您設定好，並重開主機後，您可以使用下面指令驗證：</p>
<pre><code>#hostname</code></pre>
<hr>
<h1>Fedora</h1>
<p>您需要修改的檔案如下:<br><em>  /etc/sysconfig/network
</em>  /etc/hosts</p>
<p>(1)修改/etc/sysconfig/network，指令如下:</p>
<pre><code>#vi /etc/sysconfig/network</code></pre>
<p>於下方畫面紅色框框更改您新的主機名稱<br><img src='images/Setting+hostname+on+Linux-fehosname.jpg' width='650px' align='center'/></p>
<p>(2)修改/etc/hosts，指令如下:</p>
<pre><code>#vi /etc/hosts</code></pre>
<p>於下方畫面紅色框框更改您的主機名稱<br><img src='images/Setting+hostname+on+Linux-fehosname1.jpg' width='650px' align='center'/></p>
<p>(3)當您設定好，並重開主機後，您可以使用下面指令驗證：</p>
<pre><code>#hostname</code></pre>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Setting+hostname+on+SmartOS.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Setting+hostname+on+SmartOS.md">Setting+hostname+on+SmartOS.md</a></h1><br/><h1>SmartOS Hostname設置</h1>
<p>當您申請MiCloud上任何主機時，若未指定主機名稱，系統將預設以亂數產生一串文字做為您的主機名稱，可能類似：fxyzabcd.local的名稱。您可以以IP登入您的主機，並透過&quot;hostname&quot;之指令看到您的Hostname。</p>
<p>如您需要重設您的主機名稱，您可以修改某些檔案來達到修改Hostname的目的，詳細說明如下:</p>
<p>SmartMachine需要修改的檔案如下:<br><em>  /etc/hosts：修改此檔案，讓您的主機本身認得此Hostname
</em>  /etc/nodename：此檔案為主要Hostname所讀取的檔案<br>*  /etc/inet/ipnodes：此檔案為/etc/hosts之symbolic link，主要存放主機靜態路由之IP/Name對應</p>
<p>1.修改檔案：/etc/hosts (也是/etc/inet/ipnodes)，加上您主機之新名稱，並對應到::1、127.0.0.1與您的主機IP(視申請服務類型而定，您的主機可能擁有一個或一個以上的內部或外部IP)指令為:</p>
<pre><code>#vi /etc/hosts</code></pre>
<p>於下方畫面紅色框框更改您的主機名稱<br><img src='images/Setting+hostname+on+SmartOS-smhostname.jpg' width='500' align='center'/></p>
<p>2.修改hostname設定檔：/etc/nodename，指令如下:</p>
<pre><code>#vi /etc/nodename</code></pre>
<p>於下方畫面紅色框框更改您新的主機名稱<br><img src='images/Setting+hostname+on+SmartOS-smhostname2.jpg' width='500' align='center'/></p>
<p>設定完畢後，重新開啓主機則會生效(您可以直接使用&quot;reboot&quot;指令重開或至<a href="http://portal.micloud.tw/">自助服務平台</a></p>
<p>當您設定好，並重開主機後，您可以使用下面指令驗證：</p>
<pre><code>#hostname</code></pre>
<font color='red'>※若您的服務需要對外提供時，您會需要設定DNS記錄，相關指令如下:</font>


<p>請您先向信任之網域名稱服務公司申請DNS，並將您主機名稱的紀錄指定至您上面所設定的網域名稱(smartos.example.com)。</p>
<p>若您己有申請及設定好DNS服務，可以透過下面指令檢查您的網域名稱是否生效:</p>
<pre><code>host + 網域名稱</code></pre>
<p>以micloud為例：</p>
<pre><code># host portal.micloud.tw</code></pre>
<p><img src='images/Setting+hostname+on+SmartOS-host.png' width='500' align='center'/></p>
<p>或者您可以透過nslookup檢查您的網域名稱是否與IP對應：</p>
<pre><code>nslookup + 網域名稱</code></pre>
<p>以micloud為例：</p>
<pre><code># nslookup portal.micloud.tw</code></pre>
<p><img src='images/Setting+hostname+on+SmartOS-nslookup.png' width='500' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Setting+hostname+on+Windows.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Setting+hostname+on+Windows.md">Setting+hostname+on+Windows.md</a></h1><br/><h1>Windows Hostname設置</h1>
<p>當您申請MiCloud上任何主機時，若未指定主機名稱，系統將預設以亂數產生一串文字做為您的主機名稱，可能類似：fxyzabcd.local的名稱。您可以以IP登入您的主機，並透過&quot;hostname&quot;之指令看到您的Hostname。</p>
<p>如您需要重設您的主機名稱，您可以修改某些檔案來達到修改Hostname的目的，詳細說明如下:</p>
<p>(1)點選開始，並且進入我的電腦，進入後點選上方工具，再點選資料夾選項<br><img src='images/Setting+hostname+on+Windows-wihostname.jpg' width='650px' align='center'/></p>
<p>(2)由於更改Hostname所在的資料夾為隱藏檔，藉由以下方式可以顯示出來。</p>
<p>選擇檢視欄位後往下方選擇，可以找到”顯示所有檔案和資料夾”的選項，並點選套用。<br><img src='images/Setting+hostname+on+Windows-wihostname1.jpg' width='450px' align='center'/></p>
<p>(3)成功之後開啟我的電腦進入以下路徑</p>
<pre><code>C:
WINDOWS
system32
drivers
etc</code></pre>
<p>利用記事本或是Notepad++開啟hosts文件並且在文件內裡面的127.0.0.1 localhost底下加入您想設定新的hostname，儲存後即可使用新的hostname。</p>
<pre><code>127.0.0.1       localhost
127.0.1.1       windows.example.com localhost</code></pre>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Setting+IPFilter.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Setting+IPFilter.md">Setting+IPFilter.md</a></h1><br/><h1>安全與IPFILTER</h1>
<p>在您全新Joyent的Smartmachines預設虛擬NIC的網路和default情況下， 這意味著您必須在您的電腦的網路協定中進行相關設訂。 最安全的做法，是建立一台防禦主機或是VPN伺服器，並以後端存取訪問相關服務，如資料庫存取或是Web伺服器，並加載負載平衡器如Zeus/Stingray。</p>
<p>以下是以IPFILTER為您的SmartOS Smartmachine所做的基本的分配概況：</p>
<h1>如何啟動與停止IPFILTER</h1>
<p>以SmartOS的方式，在IPFILTER過程配置下運行的SMF（服務管理工具）進行停止和啟動服務。<br>查詢關於服務管理工具。</p>
<p>IPFILTER是在default情況下禁用。 如何啟用，禁用，啟動或停止服務:</p>
<pre><code># svcadm enable ipfilter</code></pre>
<p>重新啟動該服務:</p>
<pre><code># svcadm restart ipfilter</code></pre>
<p>檢查服務的狀態:</p>
<pre><code># svcs -a | grep ipfilter
online         20:49:27 svc:/network/ipfilter:default</code></pre>
<h1>IPFilter相關範例規則</h1>
<ul>
<li>IPFilter規則都包含在/ etc / IPF / ipf.conf</li>
<li>src.ip.addr指定源頭和dest.ip.addr指定的目的地。<br>允許從一個特定的IP位址的進入:</li>
</ul>
<pre><code>pass in quick from src.ip.addr to dest.ip.addr</code></pre>
<p>允許從特定IP位址的進入到一個特定的Port：:</p>
<pre><code>pass in quick from src.ip.addr to dest.ip.addr port=22</code></pre>
<p>允許ICMP只從一個特定的IP位址進入:</p>
<pre><code>pass in quick proto icmp from src.ip.addr to dest.ip.addr keep state</code></pre>
<p>允許任何人從SmartMachine出去:</p>
<pre><code>pass out from src.ip.addr to any keep state</code></pre>
<p>阻止一個特定的IP位址:</p>
<pre><code>block in from src.ip.addr to dest.ip.addr</code></pre>
<p>阻止一個特定的範圍:</p>
<pre><code>block in from src.ip.addr/xx to dest.ip.addr</code></pre>
<p>阻止從任何一個特定的IP進出:</p>
<pre><code>block in from any to dest.ip.addr</code></pre>
<p>阻止ICMP只從一個特定的IP進入:</p>
<pre><code>block in proto icmp from src.ip.addr to dest.ip.addr</code></pre>
<p>阻止所有從任何一個特定的port進出:</p>
<pre><code>block in from any to dest.ip.addr port = (example:22)</code></pre>
<p>設置default的拒絕規則，阻止除了443和80以外的Port:</p>
<pre><code>pass out from src.ip.addr to any keep state
pass in quick from any to dest.ip.addr port=443
pass in quick from any to dest.ip.addr port=80
block in from any to dest.ip.addr</code></pre>
<p>只要使用XXXX / XX，而不是使用一個特定的IP，範圍可以適用於任何規則.</p>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Setting+Nagios.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Setting+Nagios.md">Setting+Nagios.md</a></h1><br/><h1>建置Nagios網路監控主機</h1>
<p>Nagios是一套網路監控軟體，不僅可以監控主機(本地端或遠端)及服務，管理者可自行依需求來撰寫當監控主機或服務發生問題時的反應動作，例如.可以設置當服務出現問題時會透過電子郵件的方式通知管理人員，讓管理人員更快、精準掌握網路、主機設備等狀況。</p>
<h1>Fedora</h1>
<h1>安裝Nagios及相關必要套件</h1>
<p><strong>前置作業：</strong></p>
<p>新增一個使用者(nagios)做為程式的預設使用者</p>
<pre><code>#useradd -m nagios</code></pre>
<p><img src='images/Setting+Nagios-add.png' width='650' align='center'/></p>
<p><strong>安裝Nagios及相關套件</strong></p>
<p>a.安裝httpd、php，方便您可以透過網頁使用Nagios(Nagios需建置在apache中，故於安裝Nagios前先安裝)</p>
<pre><code>#yum -y install httpd</code></pre>
<p><img src='images/Setting+Nagios-yumhttpd.png' width='650' align='center'/></p>
<pre><code>#yum install php</code></pre>
<p><img src='images/Setting+Nagios-yumphp.png' width='650' align='center'/></p>
<p>b.安裝gcc套件(此套件在安裝Nagios時會做check動作，故於安裝Nagios前先安裝)</p>
<pre><code>#yum -y install gcc</code></pre>
<p><img src='images/Setting+Nagios-yumgcc.png' width='650' align='center'/></p>
<p>c.安裝Nagios</p>
<p>下載Nagios軟體</p>
<pre><code>#wget http://prdownloads.sourceforge.net/sourceforge/nagios/nagios-3.4.1.tar.gz</code></pre>
<p><img src='images/Setting+Nagios-wget.png' width='650' align='center'/></p>
<p>解壓縮 (預設會建一個nagios目錄，並將檔案放在此目錄下)</p>
<pre><code>#tar -xzf nagios-3.4.1.tar.gz</code></pre>
<p>切換至nagios目錄下，並透過configure、make進行編譯</p>
<pre><code>#./configure</code></pre>
<p><img src='images/Setting+Nagios-config.png' width='650' align='center'/></p>
<pre><code>#make all</code></pre>
<p><img src='images/Setting+Nagios-make.png' width='650' align='center'/></p>
<pre><code>#make install
#make install-init          使用make install來安裝主程序,CGI和HTML文件
#make install-commandmode     使用make install-init在/etc/rc.d/init.d安裝啟動腳本
#make install-config          使用make install-commandmode來配置目錄權限
#make install-webconf</code></pre>
<p>d.安裝nagios-plugins-1.4.11 套件</p>
<pre><code>#wget http://prdownloads.sourceforge.net/sourceforge/nagiosplug/nagios-plugins-1.4.11.tar.gz</code></pre>
<p><img src='images/Setting+Nagios-wget2.png' width='650' align='center'/></p>
<p>解壓縮檔 (預設會建一個nagios-plugins-1.4.11目錄，並將檔案放在此目錄下)</p>
<pre><code>#tar -xzf nagios-plugins-1.4.11.tar.gz</code></pre>
<p>切換至nagios-plugins-1.4.11目錄下，並透過configure、make進行編譯</p>
<pre><code>#./configure
#make
#make install</code></pre>
<h1>設定</h1>
<p>a.設定一個帳號，此帳號可以透過網頁登入做管理(帳號為nagios)</p>
<pre><code>#htpasswd -c /usr/local/nagios/etc/htpasswd.users nagios</code></pre>
<p><img src='images/Setting+Nagios-pwd.png' width='650' align='center'/></p>
<p>b.將上方的帳號加入cgi.cfg中，使此帳號有監控的權限。</p>
<pre><code>#vi /usr/local/nagios/etc/cgi.cfg</code></pre>
<p>於下方參數中加入您的帳號(有多個帳號時請用逗號分開)</p>
<pre><code>authorized_for_system_information=nagiosadmin,nagios
authorized_for_configuration_information=nagiosadmin,nagios
authorized_for_system_commands=nagiosadmin,nagios
authorized_for_all_services=nagiosadmin,nagios
authorized_for_all_hosts=nagiosadmin,nagios
authorized_for_all_service_commands=nagiosadmin,nagios
authorized_for_all_host_commands=nagiosadmin,nagios</code></pre>
<p><img src='images/Setting+Nagios-cgi.png' width='650' align='center'/></p>
<p>c.設定系統有異常時，通知的email。請編輯contacts.cfg檔，在下圖中紅色框框的地方輸入被通知的email地址</p>
<pre><code>#vi /usr/local/nagios/etc/objects/contacts.cfg</code></pre>
<p><img src='images/Setting+Nagios-nagios.png' width='650' align='center'/></p>
<p>檢查設定檔是否有問題</p>
<pre><code>#/usr/local/nagios/bin/nagios -v /usr/local/nagios/etc/nagios.cfg</code></pre>
<p><img src='images/Setting+Nagios-co.png' width='650' align='center'/></p>
<p>d.將nagios加入chkconfig中，方便查詢及開啟服務</p>
<pre><code>#chkconfig --add nagios</code></pre>
<p>e.將nagios設定於開機時自動啟動</p>
<pre><code>#chkconfig nagios on</code></pre>
<p>f.啟動nagios</p>
<pre><code>#service nagios start</code></pre>
<p>g.啟動httpd並更改開機自動啟動此服務</p>
<pre><code>#service httpd start
#chkconfig httpd on</code></pre>
<p>h.關閉防火牆，網頁才能正常開啟，並設置防火牆於開機時不自動啟動</p>
<pre><code>#/etc/init.d/iptables stop
#chkconfig iptables off</code></pre>
<h1>驗證</h1>
<p>a.請在瀏覽器上，輸入<a href="http://192.168.xxx.xxx/nagios/">http://192.168.xxx.xxx/nagios/</a> ，輸入您設置好的帳號及密碼<br><img src='images/Setting+Nagios-login.png' width='650' align='center'/><br>成功登入之頁面<br><img src='images/Setting+Nagios-success.png' width='650' align='center'/></p>
<p>b.監控Services<br>安裝完成後，您會發現http服務會有一個警告訊息如下圖紅色框框的部分<br><img src='images/Setting+Nagios-su2.png' width='650' align='center'/><br>原因:<br>雖然http服務正常，但預設apache網頁目錄/var/www/html沒有相關的index.html檔，才會出現這個警告請在此目錄下加入一個空的index.html，幾分鐘後警告即被排除，指令如下:</p>
<pre><code>#touch /var/www/html/index.html</code></pre>
<p>c.驗證是否收到系統報警通知<br><img src='images/Setting+Nagios-http.png' width='650' align='center'/><br>由上方service監控畫面上，可以看出Swap Usage為Critical，故Nagios會自動發信至您之前設定的郵件地址，信件內容如下<br><img src='images/Setting+Nagios-mail.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Setting+SMF+on+SmartOS.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Setting+SMF+on+SmartOS.md">Setting+SMF+on+SmartOS.md</a></h1><br/><h1>在SmartOS上設置SMF</h1>
<p>SmartOS中的服務管理功能 (Service Management Facility, SMF)，類似於Linux系統中init.d的service架構，使用者可透過SMF的管理，系統會依設定來開啟會暫停每個服務。 本範例為如何建立一個服務加入SMF中。</p>
<p>若要執行一項服務，首先必須設置一個腳本，透過腳本即可設定服務的狀態，SMF中所使用之腳本的檔案類型為xml。以下將透過下載一個腳本做為範例，我們將利用此下載的腳本來修改為我們需要的腳本並進行測試及驗證。</p>
<h1>下載腳本範例(manifest)</h1>
<pre><code>#wget --no-check-certificate http://github.com/isaacs/joyent-node-on-smart-example/raw/master/node-hello-world-service-manifest.xml</code></pre>
<h1>設定服務</h1>
<p>以自建服務至主機為範例，必須修改的指令如下。</p>
<pre><code># vi noode-hello-world-service-manifest.xml</code></pre>
<p>更改部分如下:</p>
<pre><code>1.修改設定服務名稱，由node-hello-world-service 改為testSMF。
原設定：&lt;service_bundle type=&quot;manifest&quot; name=&quot;node-hello-world-service&quot;&gt;
修改為：&lt;service_bundle type=&quot;manifest&quot; name=&quot;testSMF&quot;&gt;

2.修改SMF服務啟動時，服務中的狀態名稱:
原設定：&lt;service name=&quot;site/node-hello-world-service&quot; type=&quot;service&quot; version=&quot;1&quot;&gt;
修改為：&lt;service name=&quot;site/testSMF&quot; type=&quot;service&quot; version=&quot;1&quot;&gt;

3.在執行服務的路徑中，可設定所需執行檔案的資料夾中:
原設定：&lt;method_context&gt;&lt;working_directory=&quot;/home/admin/hello-world&quot;&gt;
修改為：&lt;method_context&gt;&lt;working_directory=&quot;/root/testSMF&quot;&gt;

4.設定user以及group中，可以執行的名稱，原範例是admin及staff，我們將他們皆設定為root。
原設定：&lt;method_credential user=&quot;admin&quot; group=&quot;staff&quot; privileges=&#39;basic,net_privaddr&#39; /&gt;
修改為：&lt;method_credential user=&quot;root&quot; group=&quot;root&quot; privileges=&#39;basic,net_privaddr&#39; /&gt;

5.設定執行檔路徑變數，我們的範例是Nodejs服務，故需建立Nodejs執行檔的路徑。
原設定：&lt;envvar name=&quot;PATH&quot; value=&quot;/home/admin/local/bin:/usr/local/bin:/usr/bin:/usr/sbin:/bin&quot;/&gt;
修改為：&lt;envvar name=&quot;PATH&quot; value=&quot;/opt/node/bin:/usr/local/bin:/usr/bin:/usr/sbin:/bin&quot;/&gt;

6.設定目錄的環境變數:
原設定：&lt;envvar name=&quot;HOME&quot; value=&quot;/home/admin&quot;/&gt;
修改為：&lt;envvar name=&quot;HOME&quot; value=&quot;/root&quot;/&gt;

7.設定執行檔的路徑:
原設定：exec=&quot;/opt/local/bin/node /home/admin/hello-world/server.js&quot;
修改為：exec=&quot;/opt/local/bin/node /root/testSMF/server.js &quot;</code></pre>
<p>上述修改的位置如下方黃色框框所示:</p>
<p><img src='images/Setting+SMF+on+SmartOS-CaptureWiz143.png' width='650' align='center'/></p>
<h1>驗證服務啟動</h1>
<p>完成以上步驟後，開始驗證此自訂服務並將其服務匯入SMF，其指令如下:</p>
<pre><code># svccfg import node-hello-world-service-manifest.xml</code></pre>
<p><img src='images/Setting+SMF+on+SmartOS-p1.png' width='650' align='center'/></p>
<p>檢視匯入服務狀態，指令如下:</p>
<pre><code># svcs –a | grep testSMF</code></pre>
<p><img src='images/Setting+SMF+on+SmartOS-p2.png' width='650' align='center'/><br>從上方擷圖可看出，testSMF已成功匯入，但未啟動。</p>
<p>利用svcadm指令來啟用服務，並且再次檢視服務狀態，online表示已啟動:</p>
<pre><code># svcadm enable testSMF
# svcs–a | grep testSMF</code></pre>
<p><img src='images/Setting+SMF+on+SmartOS-p3.png' width='650' align='center'/></p>
<h1>刪除已匯入的SMF</h1>
<p>刪除服務之前，須先關閉後，方可進行刪除動作。</p>
<p>(1) 關閉 testSMF 服務</p>
<pre><code># svcadm disable testSMF
# svcs testSMF</code></pre>
<p><img src='images/Setting+SMF+on+SmartOS-p4.png' width='650' align='center'/></p>
<p>(2) 刪除 testSMF服務</p>
<pre><code># svccfg delete testSMF
# svcs testSMF</code></pre>
<p><img src='images/Setting+SMF+on+SmartOS-p5.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Setting+the+Host+Name+of+a+SmartMachine.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Setting+the+Host+Name+of+a+SmartMachine.md">Setting+the+Host+Name+of+a+SmartMachine.md</a></h1><br/><p>當您申請MiCloud上SmartMachine(或其他)主機時，當您未指定主機名稱時，系統將預設以一亂數產生您的主機名稱，可能類似：fxyzabcd.local的名稱，您可以以IP存取您的主機，並透過&quot;hostname&quot;之指令看到您的Hostname。</p>
<p>如您需要重設您的主機名稱，在SmartOS上，您可以修改下面幾個檔案來達到修改Hostname的目的：<br><em>  /etc/hosts：修改此檔案，讓您的主機本身認得此Hostname
</em>  /etc/nodename：此檔案為主要Hostname所讀取的檔案<br>*  /etc/inet/ipnodes：此檔案為/etc/hosts之symbolic link，主要存放主機靜態路由之IP/Name對應</p>
<p>修改檔案：/etc/hosts (也是/etc/inet/ipnodes)，加上您主機之新名稱，並對應到::1、127.0.0.1與您的主機IP(視申請服務類型而定，您的主機可能擁有一個或一個以上的內部或外部IP)</p>
<pre><code>/etc/hosts
# ident &quot;@(#)hosts      1.7     06/08/01 SMI&quot;
#
# Internet host table
#
::1             localhost
127.0.0.1       localhost
10.19.xxx.xxx   fxyzabcd    loghost
8.19.xxx.xxx    myserver.example.com</code></pre>
<p>修改hostname設定檔：/etc/nodename，:</p>
<pre><code># vi /etc/nodename</code></pre>
<p>修改設定檔內容為您新的主機名稱：</p>
<pre><code>myserver.example.com</code></pre>
<p>設定完畢後，重新開啓主機則會生效(您可以直接使用&quot;reboot&quot;指令重開或至<a href="http://micloud.tw">自助服務平台</a></p>
<p>當您設定好，並重開主機後，您可以以下面指令驗證：</p>
<pre><code>hostname</code></pre>
<h1>設定外部DNS對應</h1>
<p>當您服務需要對外提供時，您會需要設定DNS記錄，此部分請向您信任之網域名稱服務公司申請，並將您主機名稱之紀錄指定至您上面所設定之網域名稱(myserver.example.com)，如您有申請及設定好DNS服務，可以透過下面指令檢查您的網域名稱是否生效：</p>
<pre><code>host myserver.example.com</code></pre>
<p>回應範例：</p>
<pre><code># host portal.micloud.tw
portal.micloud.tw has address 211.78.245.68</code></pre>
<p>或者您可以透過nslookup檢查您的網癒名稱是否與IP對應：</p>
<pre><code>nslookup myserver.example.com</code></pre>
<p>回應範例：</p>
<pre><code># host portal.micloud.tw
portal.micloud.tw has address 211.78.245.68
[root@211-78-245-44 ~]# nslookup portal.micloud.tw]([root@211-78-245-44 ~# nslookup portal.micloud.tw)
Server:         8.8.8.8
Address:        8.8.8.8#53

Non-authoritative answer:
Name:   portal.micloud.tw
Address: 211.78.245.68</code></pre>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Setting+the+Host+Name+on+a+Linux+Machine.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Setting+the+Host+Name+on+a+Linux+Machine.md">Setting+the+Host+Name+on+a+Linux+Machine.md</a></h1><br/><p>You set the name of your machine when you order it on my.joyent.com. If you want to change the name later on, follow the instructions for the Linux distribution you&#39;re using.</p>
<p>__</p>
<pre><code>You need to be logged in as root or be using sudo to change the host name.</code></pre>
<p>__</p>
<h1>Debian</h1>
<ul>
<li>Set the host name in the /etc/hostname file:</li>
</ul>
<pre><code>echo &quot;debian.example.com&quot; &gt; /etc/hostname</code></pre>
<ul>
<li>Using and text editor, edit the file /etc/hosts so that the hostname points to the loopback address:</li>
</ul>
<pre><code>127.0.0.1       localhost
127.0.1.1       debian.example.com localhost

# The following lines are desirable for IPv6 capable hosts
::1     localhost ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
ff02::3 ip6-allhosts</code></pre>
<ul>
<li>Run the host name initialization script.</li>
</ul>
<pre><code>/etc/init.d/hostname.sh start</code></pre>
<h1>Ubuntu</h1>
<ul>
<li>Set the host name in the /etc/hostname file:</li>
</ul>
<pre><code>echo &quot;debian.example.com&quot; &gt; /etc/hostname</code></pre>
<ul>
<li>Using and text editor, edit the file /etc/hosts so that the hostname points to the loopback address:</li>
</ul>
<pre><code>127.0.0.1       localhost
127.0.1.1       ubuntu.example.com localhost

# The following lines are desirable for IPv6 capable hosts
::1     localhost ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
ff02::3 ip6-allhosts</code></pre>
<ul>
<li>Run the host name initialization script.</li>
</ul>
<pre><code>start hostname</code></pre>
<h1>CentOS</h1>
<ul>
<li>Using any text editor, edit the file /etc/sysconfig/network so that the HOSTNAME line contains your fully qualified domain name:</li>
</ul>
<pre><code>NETWORKING=yes
NETWORKING_IPV6=no
HOSTNAME=centos.example.com</code></pre>
<ul>
<li>Edit the file /etc/hosts so that the host name points to the loopback addresses:</li>
</ul>
<pre><code># Do not remove the following line, or various programs
# that require network functionality will fail.
127.0.0.1  centos  localhost
::1        centos  localhost6</code></pre>
<ul>
<li>Reboot your machine by either using the reboot command or by going to my.joyent.com and clicking the Reboot button.</li>
</ul>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Setting+the+Host+Name+on+a+Windows+Server.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Setting+the+Host+Name+on+a+Windows+Server.md">Setting+the+Host+Name+on+a+Windows+Server.md</a></h1><br/><p>TBD</p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Setting+the+Node.js+Version.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Setting+the+Node.js+Version.md">Setting+the+Node.js+Version.md</a></h1><br/><p>Your Node.js™ SmartMachine uses two ways to determine the version of Node.js you use.</p>
<p>One mechanism controls the version of Node.js used in your login environment as when you SSH into your Node.js SmartMachine and use npm to install packages.</p>
<p>The other controls the version that&#39;s used when you push a new version of your application and your application runs.</p>
<p>In most cases you will want both mechanisms to point to the same version of Node.js. But in some situations, you may want to ensure that your application runs with a specific version of Node.js.</p>
<p>By default, your Node.js SmartMachine uses the latest stable version of Node.js.</p>
<p>In this page:</p>
<h1>Changing the nodejs Symlink</h1>
<p>The /home/node/local/nodejs symlink points to the directory that contains the version of Node.js used when you log in to your Node.js SmartMachine. This is the version the npm looks at when you install packages</p>
<p>To make sure that you&#39;re always using the latest version of node, see that /home/node/local/nodejs points to the latest version:</p>
<pre><code>cd ~/local
rm nodejs
ln -s /opt/nodejs/latest nodejs</code></pre>
<p>You can use any of the version designators described in Which Versions Are Available?.</p>
<pre><code>Be careful when using tab expansion to set up the symlink. What you&#39;re linking to is actually a directory, and if you include the trailing slash, you will get an error when you push your changes.</code></pre>
<pre><code>ln -s /opt/nodejs/v0.4.1/ nodejs # DO NOT DO THIS</code></pre>
<h1>Using config.json to Select the Version Your Application Uses</h1>
<p>If your application must use a specific version of Node.js, add a file named config.json that contains the following:</p>
<pre><code>config.json
{ &quot;version&quot;: &quot;v0.2.6&quot; }</code></pre>
<p>When you push the change to your Node.js SmartMachine, your application runs with the version you selected:</p>
<pre><code>$ git push joyent
Counting objects: 5, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 310 bytes, done.
Total 3 (delta 0), reused 0 (delta 0)
remote: Starting node v0.2.6...
remote: Successful
To ssh://node@example.no.de/home/node/repo
e22d59d..305730f  master -&gt; master</code></pre>
<p>If your repository does not contain a config.json, it uses the /home/node/local/nodejs symlink.</p>
<h1>Which Versions Are Available?</h1>
<p>To find out which Node.js versions are available, log in to your Node.js SmartMachine and look at the file /opt/nodejs/NODE-BUILDS.</p>
<pre><code>/opt/nodejs/NODE-BUILDS
$ cat /opt/nodejs/NODE-BUILDS
v0.5.3 v0.5 unstable
v0.5.2
v0.5.1
v0.5.0
v0.4.11 v0.4 edge latest stable
v0.4.10
v0.4.8
v0.4.9
v0.4.7
v0.4.6</code></pre>
<p>You can use these special version values to make sure that you&#39;re always using the most recent version of Node.js for your requirements:</p>
<p>||Version Values     ||Description<br>|vX.Y.Z     |Always use this particular version of Node.js<br>|vX.Y     |The latest version for that series. For example, v0.4 refers to v0.4.1. If there are bug fixes and the version bumps to v0.4.2, your application will take advantage of those bug fixes.<br>|latest stable     |Your application will always use the latest stable version of Node.js suitable for production work.<br>|edge     |The cutting edge version of Node.js. Includes all the latest features, but may be buggy.</p>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Setting+Up+a+New+Domain.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Setting+Up+a+New+Domain.md">Setting+Up+a+New+Domain.md</a></h1><br/><p>此部分展示如何使用Webmin與您的網域名稱連結，並透過Webmin設定FTP：<a href="此部分展示如何使用Webmin與您的網域名稱連結，並透過Webmin設定FTP：[http://p.castfire.com/NTYYi/video/511915/setting-up-new-domain-mov-2011-02-14-142915.sd.m4v"><a href="http://p.castfire.com/NTYYi/video/511915/setting-up-new-domain-mov_2011-02-14-142915.sd.m4v">http://p.castfire.com/NTYYi/video/511915/setting-up-new-domain-mov_2011-02-14-142915.sd.m4v</a>]</a></p>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Setting+Up+Your+SmartMachine.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Setting+Up+Your+SmartMachine.md">Setting+Up+Your+SmartMachine.md</a></h1><br/><p>You have root access so you are free to do anything within the Cloud Hosting AUP.</p>
<p>This guide attempts to describe setting up the following core functionality on an SmartMachine as well as providing more general information for new users.</p>
<p>In this page:</p>
<h1>Setting Up Your Domain Name (DNS)</h1>
<p>Each SmartMachine comes with a dedicated public and private IP address, found in your machine details in your portal.</p>
<p>Many domain registrars such as Gandi (<a href="http://www.gandi.net">http://www.gandi.net</a>) offer the ability to use their nameservers and offer an interface to edit your DNS zone file to set up your domain. The following examples are based on the options provided by Gandi.</p>
<p>To establish the link between your domain name and public IP, you must specify what is known as an &quot;A record&quot;, this is done with the following two lines in BIND 9 format (for Gandi, these can be entered in their &quot;Expert&quot; interface):</p>
<pre><code>domain.name. 3600 IN A 1.2.3.4
*  .domain.name. 3600 IN A 1.2.3.4</code></pre>
<p><strong>Note the full-stop (or period) after your domain name.</strong>Make sure to replace domain.name with your own domain and 1.2.3.4 with your public IP. The 3600 is known as the Time To Live (TTL) and sets your A record to expire after 1 hour (3600 seconds) so that you can make changes and hopefully see it reflected online without too much delay.</p>
<p>The second line is known as a wildcard entry which ensures that anyone attempting to go to anything.domain.name will also be correctly resolved.</p>
<p>Note that those two lines may be abbreviated to the following:</p>
<pre><code>@ 3600 IN A 1.2.3.4
*   3600 IN A 1.2.3.4</code></pre>
<p>Do not worry as they are equivalent.</p>
<p>(See &quot;Setting Up E-mail&quot; below for information on MX records.)</p>
<p>Once enough time has passed for your changes to have been propagated to your ISP&#39;s DNS servers, you should be able to access your SmartMachine via your domain rather than its IP.</p>
<h1>Hostname vs SmartMachine name and reverse record</h1>
<p>1.Run these commands at the shell prompt to find out:<br>a.What is my hostname?</p>
<p><code>hostname</code></p>
<p>b.What is my SmartMachine name?</p>
<p><code>zonename</code></p>
<p>c.What is my IP?</p>
<p><code>cat /etc/hosts</code></p>
<p>Out of the box your SmartMachine will have its hostname set to an internal ID of the format zonename.joyent.us.<br>You are able to access your SmartMachine by IP or <a href="http://zonename.joyent.us">http://zonename.joyent.us</a>. It is recommended that you change your hostname to one of your own choosing (example.com). This is necessary if you want to send email from your SmartMachine (forum post).</p>
<pre><code>You do need to submit a support ticket to get your reverse PTR record set to your domain name. This is only really needed if you are going to be using your SmartMachine to send emails.</code></pre>
<pre><code>When submitting the ticket for any DNS related action please include the whois information which proves that you are the owner or technical contact for the name.</code></pre>
<h1>Changing your hostname</h1>
<p>In the following files replace the zonename.joyent.us with your new domain name (example.com). Be very careful when editing these files. If your name has not be changed after the reboot, make sure that there are no extra spaces or lines (for example do not comment out things in /etc/nodename).</p>
<pre><code>sudo nano /etc/nodename
sudo nano /etc/hosts
sudo nano /etc/inet/ipnodes</code></pre>
<p>1.(the last file might already be changed with the edit to hosts file). If you haven’t added your user to the sudoers list, you can su root then /opt/local/bin/nano /etc/nodename etc. If /etc/nodename is blank just add your new domain name (&amp; nothing else).<br>2.reboot<br>3.run at the command line:</p>
<pre><code>hostname</code></pre>
<p>your new name should display<br>4.from another machine (local machine is fine) run</p>
<pre><code>host domain.tld</code></pre>
<p>where domain.tld is the answer from hostname in the previous step. That should return the IP of your server.</p>
<pre><code>If you are using PHP you may have to change the hostname in your php.ini file to reflect your new hostname</code></pre>
<h1>Running Webmin</h1>
<p>Log into Webmin as admin with the details supplied in your systems credentials virtualmin password. (this should be a URL similar to <a href="https://1.2.3.4:10000">https://1.2.3.4:10000</a>)</p>
<p>The files are located in /home/jill/web/public.</p>
<h1>Create a new Virtual Server</h1>
<p>select <strong>Create Virtual Server</strong> from the menu on the left.</p>
<ol>
<li>Fill in the <strong>New virtual server details fields</strong> with:<br>a. your domain name (example.joyeurs.com)<br>b. a simple description<br>c. administration password<br>d. Administration custom username (example)</li>
<li>Fill in the <strong>Advanced options</strong><br>a. Group for mailbox users Custom group name (example)</li>
<li>Quotas and limits<br>a. Adjust the quotas if needed</li>
<li>Enabled features<br>a. Accept mail for domain (if you want email)<br>b. Setup log file rotation (select)</li>
<li>leave the rest of the settings at their default settings</li>
<li>Select Create Server<br>You are now able to ssh in as example@X.X.X.X with the password entered in step 1.III.</li>
</ol>
<pre><code>ssh example@X.X.X.X</code></pre>
<p>You now have a /home/example directory which is looks very close to a Shared SmartMachine.</p>
<pre><code>ls /home/example
Maildir
cgi-bin
etc
fcgi-bin
homes
logs
svn
web</code></pre>
<p><strong>Test out the site</strong></p>
<p>Point your browser to your newly created domain and see that the test page renders properly. You should see that the file is located at /home/example/web/public/index.php.</p>
<p><strong>Uploading your web content</strong></p>
<p>You are now ready to upload your customized content into the ~/web/public directory. Use your favorite SFTP application using your newly created domain name as the user. The IP of the SmartMachine for the host and the password you entered in step 1.III when creating the domain.</p>
<p>Common technologies such as PHP5 and Subversion are already installed and configured and ready to use with web hosting so you should be able to serve PHP files from the start.</p>
<h1>Just what is running?</h1>
<p>There are a couple of ways to check on what is running. See this guide for details about being reboot ready and what the various states mean.</p>
<p><strong>From Webmin</strong></p>
<p>Start Virtualmin from https:/X.X.X.X:10000/</p>
<ul>
<li>Select Webmin on the upper left</li>
<li>Under System select Service Management Facility Configuration</li>
<li>*Any items which are in maintenance will appear at the top of the list</li>
<li>*Any items which are offline appear in yellow below the maintenance items and above the online items<br><strong>From the Command line</strong></li>
</ul>
<ul>
<li>To see a list of services</li>
</ul>
<pre><code>#svcs -a</code></pre>
<ul>
<li>To stop a service</li>
</ul>
<pre><code>svcadm disable NAME</code></pre>
<ul>
<li>To restart a service</li>
</ul>
<pre><code>svcadm enable NAME</code></pre>
<ul>
<li>To to clear a service from maintenance</li>
</ul>
<pre><code>svcadm clear NAME</code></pre>
<p>The service should then go offline and if all is well return to online.<br>*  To see what services are in maintenance and why</p>
<pre><code>svcs -x</code></pre>
<ul>
<li>To see all processes for a service</li>
</ul>
<pre><code>svcs -p NAME</code></pre>
<h1>Sending root&#39;s email to a real user</h1>
<p>root will get the output from the cron jobs and other system messages. It is recommended to change root&#39;s email to be sent to a real user which is read on a regular basis.</p>
<p><strong>Postfix changes</strong></p>
<ul>
<li>Run Virtualmin/Webmin.</li>
<li>Select webmin link on the upper left</li>
<li>Select Servers-&gt;Postfix on the left side</li>
<li>*Select General Options</li>
<li>**Internet Hostname of this Mail system set to Default (provided by system)</li>
<li>**Select Save and Apply</li>
<li>*Select Mail Aliases</li>
<li>**Select Create a new Alias at the bottom</li>
</ul>
<pre><code>Address: root
Alias to: Email Address  REAL_USERNAME</code></pre>
<ul>
<li>**Select save at the bottom</li>
<li>**Select Save and Apply above the list of aliases<br>You could also edit /opt/local/etc/postfix/aliases and run the newaliases command</li>
</ul>
<p><strong>Trouble shooting</strong></p>
<p>Check that</p>
<pre><code>tail -f /var/log/syslog</code></pre>
<p>is not showing any error messages</p>
<h1>Setting Up E-mail</h1>
<pre><code>Managing a mail server is a significantly bigger undertaking than hosting a web site particularly when it comes to dealing with spam and the problems it causes. It is therefore not recommended that you run a mail server on your SmartMachine. You are instead advised to use external services such as Joyent&#39;s own Connector or Shared Hosting. Do this by altering your A and MX DNS records (external to Joyent).</code></pre>
<p>If, however, you do decide to run your own mail server, here are basic instructions to get started. This also AssUMes you have followed the instruction above. If you are jumping straight to this section, please review the earlier steps to make sure you are ready to enable email. Specifically renaming the hostname.</p>
<p><strong>MX Record</strong></p>
<p>In order for mail to be sent to your e-mail address(es) on your SmartMachine, you will need to set up an MX record in your DNS zone file. You need to add the following lines (where domain.name is your domain and 1.2.3.4 is your SmartMachine&#39;s public IP):</p>
<pre><code>domain.name. 1200 IN MX 10 mail.domain.name.
mail.domain.name. 1200 IN A 1.2.3.4</code></pre>
<p><note information> the full-stop (or period) after the domain name.</note> As MX records should not point directly at an IP address, we instead use a sub-domain which, in turn, points to your SmartMachine&#39;s public IP. Once these changes to your DNS have propagated to servers, you should begin receiving mail on your SmartMachine.</p>
<p><strong>Testing it out</strong></p>
<p>From your local machine make sure that the mail host is reported properly like so:</p>
<pre><code>$host example.joyeurs.com
example.joyeurs.com has address 1.2.3.4
example.joyeurs.com mail is handled by 10 mail.example.joyeurs.com.</code></pre>
<p><strong>Adding email users</strong></p>
<p>To add accounts and aliases, use the Virtualmin interface to do so. The only extra bit of work you need to do is to enable Courier so that you can use your mail client of choice to connect to your SmartMachine&#39;s mail server.</p>
<p><strong>Testing it out</strong></p>
<p>In both cases you are looking for the OK. If you don&#39;t get that then review the steps listed above. If you are still stuck, then google on the response to see what others have to say.</p>
<p><strong>POP3</strong></p>
<p>From your local machine see that port 110 is responding correctly:</p>
<pre><code>$ telnet example.joyeurs.com 110
Trying 1.2.3.4...
Connected to example.joyeurs.com.
Escape character is &#39;^]&#39;.
+OK Hello there.
^]
telnet&gt; Connection closed.</code></pre>
<p><strong>POP3-SSL</strong></p>
<p>From your local machine see that port 995 is responding correctly (A cert is returned):</p>
<pre><code>openssl s_client  -ssl3  -connect example.joyeurs.com:995</code></pre>
<p><strong>IMAP</strong></p>
<pre><code>You may have to first start your IMAP server. To do this you log into your SmartMachine as the user admin and run this command:
sudo svcadm enable /network/courier:imap</code></pre>
<p>From your local machine see that port 143 is responding correctly:</p>
<pre><code>$ telnet example.joyeurs.com 143
Trying 1.2.3.4...
Connected to example.joyeurs.com.
Escape character is &#39;^]&#39;.
*   OK [CAPABILITY IMAP4rev1 UIDPLUS CHILDREN NAMESPACE THREAD=ORDEREDSUBJECT THREAD=REFERENCES SORT QUOTA IDLE ACL ACL2=UNION STARTTLS] Courier-IMAP ready. Copyright 1998-2005 Double Precision, Inc.  See COPYING for distribution information.](*   OK [CAPABILITY IMAP4rev1 UIDPLUS CHILDREN NAMESPACE THREAD=ORDEREDSUBJECT THREAD=REFERENCES SORT QUOTA IDLE ACL ACL2=UNION STARTTLS Courier-IMAP ready. Copyright 1998-2005 Double Precision, Inc.  See COPYING for distribution information.)
IMAP-SSL
From your local machine see that port 993 is responding correctly (A cert is returned):

openssl s_client -ssl3 -connect example.joyeurs.com:993
Troubleshooting
===
1. Seeing errors like this in /var/log/syslog</code></pre>
<p>Oct 20 21:22:57 example.joyeurs.com postfix/smtp[2076]: [ID 197553 mail.info] 2E35E2F68: to=<a href="&#x6d;&#97;&#105;&#x6c;&#116;&#111;&#58;&#108;&#105;&#110;&#x64;&#x61;&#x40;&#101;&#120;&#x61;&#x6d;&#112;&#x6c;&#101;&#x2e;&#x63;&#111;&#x6d;">&#108;&#105;&#110;&#x64;&#x61;&#x40;&#101;&#120;&#x61;&#x6d;&#112;&#x6c;&#101;&#x2e;&#x63;&#111;&#x6d;</a>, relay=mail.example.com[8.12.37.104], delay=0, status=deferred (host mail.example.com[8.12.37.104] said: 450 4.7.1 Client host rejected: cannot find your reverse hostname, [8.12.36.201] (in reply to RCPT TO command))](Oct 20 21:22:57 example.joyeurs.com postfix/smtp[2076: [ID 197553 mail.info] 2E35E2F68: to=<a href="&#x6d;&#x61;&#105;&#x6c;&#116;&#111;&#x3a;&#108;&#x69;&#110;&#x64;&#97;&#x40;&#x65;&#120;&#97;&#109;&#x70;&#x6c;&#101;&#46;&#x63;&#111;&#x6d;">&#108;&#x69;&#110;&#x64;&#97;&#x40;&#x65;&#120;&#97;&#109;&#x70;&#x6c;&#101;&#46;&#x63;&#111;&#x6d;</a>, relay=mail.example.com[8.12.37.104], delay=0, status=deferred  - host mail.example.com[8.12.37.104] said: 450 4.7.1 Client host rejected: cannot find your reverse hostname, [8.12.36.201]  - in reply to RCPT TO command)</p>
<pre><code>
You need to submit a ticket requesting the PTR reverse record added. When it is correct then doing host domain.tld and the host X.X.X.X will correctly resolve as shown below</code></pre>
<p>$ host example.joyeurs.com<br>example.joyeurs.com has address 8.12.36.201<br>example.joyeurs.com mail is handled by 10 mail.example.joyeurs.com.<br>$ host 8.12.36.201<br>201.36.12.8.in-addr.arpa domain name pointer example.joyeurs.com.</p>
<pre><code>

Subversion
===

Set up your Subversion repositories using &quot;SVN Repositories&quot; under the &quot;Services&quot; menu of Virtualmin and grant repository access to users much as you would on Joyent Shared Hosting with &quot;Edit Mail and FTP Users&quot;.

Securing Your SmartMachine
===

Joyent recommend that you change your various passwords on your SmartMachine; for instructions on how to do this, see Changing Passwords</code></pre>
<p>keep in mind the usual advice regarding the selection of strong passwords. This is the recommended method<br>apg -t -m 12 -M NCL</p>
<pre><code>


As you will be using SSH to access your SmartMachine, it is also a good idea to take advantage of SSH&#39;s public key authentication instead of relying on using passwords. If you decide to rely on keys entirely and wish to disable password authentication.

Edit this file:</code></pre>
<p>sudo nano /etc/ssh/sshd_config</p>
<pre><code>


Setting both of these values to no (More detail on [Disable SSH Password Authentication].)](Setting both of these values to no  - More detail on [Disable SSH Password Authentication.)
#PasswordAuthentication
#PAMAuthenticationViaKBDInt
MySQL remote access
===

You are able to create a tunnel from your local machine to the remote machine. For example say you are on an OSX machine ([see this guide for all platforms]) then:](You are able to create a tunnel from your local machine to the remote machine. For example say you are on an OSX machine  - [see this guide for all platforms then:)</code></pre>
<p>ssh -L3307:127.0.0.1:3306 -p 22 -N -t -x user@example.joyeurs.us</p>
<pre><code>

will create a tunnel from local port 3307 to remote port 3306 on example.joyeurs.us. The only thing you need to change in the user@example.joyeurs.us on the line above.
In another terminal you are able to connect to the remote mysql database.</code></pre>
<p>mysql -u username -ppassword -h 127.0.0.1 -P 3307<br>```</p>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Share+by+qrtt1.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Share+by+qrtt1.md">Share+by+qrtt1.md</a></h1><br/><h1>聖藍科技分享文章</h1>
<p>感謝聖藍科技使用MiCloud服務，透過CloudAPI提供聖藍科技自動Scale之功能以架構多媒體影音服務，以下文章轉載自qrtt1 github repository<a href="http://www.accupass.com/Event/Register?eid=359099570305727">本文</a></p>
<h1>簡介</h1>
<p>最近在蒐集國內 IaaS 的資料，目前只看到 MiCloud 有提供 API。依照「沒有釋出API，就不能稱得上是真正的IaaS服務。」 那目前 MiCloud 算是國內的『真。IaaS』MiCloud 採用的 solution 是 joyent <a href="https://github.com/joyent"><a href="https://github.com/joyent">https://github.com/joyent</a></a></p>
<p><strong>此文件對讀者的假設是：</strong><br><em>  你已註冊擁有 MiCloud 帳號
</em>  使用 Linux</p>
<p><strong>安裝 MiCloud Command Line 流程如下：</strong><br><em>  安裝 node js (依客服的資訊，只能使用 0.6.x 版本)
</em>  設定 api 帳號<br><em>  產生 ssh key
</em>  使用 MiCloud 帳號認證</p>
<p><strong>常用功能：</strong><br><em>  建立新機器
</em>  建立機器並指定 user-s cript<br><em>  查詢機器狀態
</em>  撤銷機器（關閉與刪除）</p>
<p><strong>附錄：</strong><br><em>  Node.js RPM
</em>  Java API</p>
<p>另外，Cloud API 的官方文件的位置在： <a href="http://apidocs.joyent.com/sdcapidoc/cloudapi"><a href="http://apidocs.joyent.com/sdcapidoc/cloudapi/">http://apidocs.joyent.com/sdcapidoc/cloudapi/</a></a></p>
<h1>安裝Node JS</h1>
<p>目前 Node.js 最新版為 0.8.x。一開始看 wiki 去試著安裝，但它並沒有說明僅支援 0.6.x 版的 Node.js（這資訊同樣也是來自客服）。所以在做帳號認證時總是無法過關。而 Node.js 在我常用的 Debian 或 CentOS 似乎沒有直接包在官方的 repo 上，如果你也遇到相同的問題，建議就自行編譯吧。（編譯時記得將 openssl-devel 與 npm 的選項開啟。）</p>
<p>安裝完 Node.js 後，需加裝 joynet Cloud API 提供的 cli 工具，使用 Node.js 的套件管理程式安裝 smartdc 與jsontool（wiki 上的的指令沒有加 sudo，但我們下 npm -g 會安裝在系統目錄下，若您是一般用者請加 sudo）：</p>
<pre><code>sudo npm install smartdc -g
sudo npm install jsontool -g</code></pre>
<p>完成安裝後，會有一堆 sdc- 開頭的指令能使用，等等用他們操作 MiCloud 提供的服務：</p>
<pre><code>[qrtt1@localhost ~]$ sdc-]([qrtt1@localhost ~$ sdc-)
sdc-addmachinetags            sdc-getmachinetag
sdc-createinstrumentation     sdc-getpackage
sdc-createkey                 sdc-listdatacenters
sdc-createmachine             sdc-listdatasets
sdc-createmachinesnapshot     sdc-listinstrumentations
sdc-deleteinstrumentation     sdc-listkeys
sdc-deletekey                 sdc-listmachines
sdc-deletemachine             sdc-listmachinesnapshots
sdc-deletemachinemetadata     sdc-listmachinetags
sdc-deletemachinesnapshot     sdc-listpackages
sdc-deletemachinetag          sdc-rebootmachine
sdc-describeanalytics         sdc-resizemachine
sdc-getdataset                sdc-setup
sdc-getinstrumentation        sdc-startmachine
sdc-getkey                    sdc-startmachinefromsnapshot
sdc-getmachine                sdc-stopmachine
sdc-getmachinemetadata        sdc-updatemachinemetadata
sdc-getmachinesnapshot</code></pre>
<p>註：如果你有看 wiki，它是寫 api 的操作需要在 MiCloud 網域。這句話已過時了，向客服求證已無此限制。你可以在任何有對外網路的機器腦使用它。</p>
<h1>設定API帳號</h1>
<p>完成 stmartdc 安裝後，我們能使用 sdc-setup 指令設定 api 要使用的帳號。sdc-setup 需指定 api server 位置，請使用：<a href="https://api.micloud.tw"><a href="https://api.micloud.tw">https://api.micloud.tw</a></a><br><em>  使用 sdc-setup 指令
</em>  輸入 MiCloud 帳號與密碼進行驗證<br><em>  設定 ssh key
</em>  <em>使用既有的 ssh key
</em>  *使用新的 ssh key</p>
<h1>使用既有的SSH key</h1>
<pre><code>[qrtt1@localhost ~]$ sdc-setup https://api.micloud.tw]([qrtt1@localhost ~$ sdc-setup https://api.micloud.tw)
Username (login): (qrtt1) user_account@example.mail.com
Password:
The following keys exist in SmartDataCenter:
[1] sysGen-e10b3d16-5d92-45b0-b84f-299e4669b905]([1 sysGen-e10b3d16-5d92-45b0-b84f-299e4669b905)
[2] id_rsa]([2 id-rsa)
Would you like to use an existing key? (yes) yes
Select a key:(1) 1


If you set these environment variables, your life will be easier:
export SDC_CLI_URL=https://api.micloud.tw
export SDC_CLI_ACCOUNT=user_account@example.mail.com
export SDC_CLI_KEY_ID=sysGen-e10b3d16-5d92-45b0-b84f-299e4669b905

You&#39;ll additionally want to set SDC_CLI_IDENTITY to the full path location of the ssh key on your system (try export SDC_CLI_IDENTITY=/home/qrtt1/.ssh/sysGen-e10b3d16-5d92-45b0-b84f-299e4669b905).</code></pre>
<p>在『使用既有的 ssh key』內，我們選擇了初次註冊 MiCloud 時透過系統建立的 ssh key。sdc-setup 的功能是替您產生操作 Cloud API 需要的環境變數，你可以將它設在 .bashrc 內，並使用 source 指令載入環境變數。</p>
<h1>使用新建的SSH key</h1>
<p>我們使用 ssh-keygen 產生一組新的 ssh key 讓 MiCloud 使用：</p>
<pre><code>[qrtt1@localhost ~]$ ssh-keygen -b 2048 -t rsa -f ~/.ssh/micloud_at_vm]([qrtt1@localhost ~$ ssh-keygen -b 2048 -t rsa -f ~/.ssh/micloud-at-vm)
Generating public/private rsa key pair.
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /home/qrtt1/.ssh/micloud_at_vm.
Your public key has been saved in /home/qrtt1/.ssh/micloud_at_vm.pub.
The key fingerprint is:
34:e3:cd:2c:b3:1c:64:6f:29:9d:de:ef:4f:03:fe:ac qrtt1@localhost.localdomain
The key&#39;s randomart image is:
+--[ RSA 2048]----+](+--[ RSA 2048----+)
|                 |
|                 |
|        *        |
|       = O o     |
|        S X  .   |
|       . O .. .  |
|        o . .. ..|
|             .o..|
|             E++.|
+-----------------+</code></pre>
<p>使用 sdc-setup 並選用新的 ssh key：</p>
<pre><code>[qrtt1@localhost ~]$ sdc-setup https://api.micloud.tw]([qrtt1@localhost ~$ sdc-setup https://api.micloud.tw)
Username (login): (qrtt1) user_account@example.mail.com
Password:
The following keys exist in SmartDataCenter:
[1] sysGen-e10b3d16-5d92-45b0-b84f-299e4669b905]([1 sysGen-e10b3d16-5d92-45b0-b84f-299e4669b905)
[2] id_rsa]([2 id-rsa)
Would you like to use an existing key? (yes) no
SSH public key: (/home/qrtt1/.ssh/id_rsa.pub) /home/qrtt1/.ssh/micloud_at_vm.pub


If you set these environment variables, your life will be easier:
export SDC_CLI_URL=https://api.micloud.tw
export SDC_CLI_ACCOUNT=user_account@example.mail.com
export SDC_CLI_KEY_ID=micloud_at_vm
export SDC_CLI_IDENTITY=/home/qrtt1/.ssh/micloud_at_vm</code></pre>
<h1>使用cli tool</h1>
<p>完成設定後我們就能開始使用 cli tool，例如：查詢已註冊的 ssh key</p>
<pre><code>[qrtt1@localhost ~]$ sdc-listkeys]([qrtt1@localhost ~$ sdc-listkeys)
[
{
&quot;name&quot;: &quot;sysGen-e10b3d16-5d92-45b0-b84f-299e4669b905&quot;,
&quot;key&quot;: &quot;ssh-rsa …......&quot;,
&quot;created&quot;: &quot;2012-11-14T16:08:33+00:00&quot;,
&quot;updated&quot;: &quot;2012-11-14T16:08:33+00:00&quot;
},
{
&quot;name&quot;: &quot;micloud_at_vm&quot;,
&quot;key&quot;: &quot;ssh-rsa …......&quot;,
&quot;created&quot;: &quot;2012-11-20T09:42:32+00:00&quot;,
&quot;updated&quot;: &quot;2012-11-20T09:42:32+00:00&quot;
}
]</code></pre>
<h1>常用功能：建立新機器</h1>
<p>建立機器有些資訊需要事先查清楚的：<br><em>  機器的等級（CPU、記憶體、Disk），使用 sdc-listpackages 指令
</em>  機器的OS，使用 sdc-listdatasets 指令<br>*  使用上述『參數』建立機器，使用 sdc-createmachine 指令</p>
<p>依 Cloud API 的說明 CreateMachine 的參數 package name 可以不填，會使用 sdc-listpackages 標為 default 的那一組，而 dataset 需要填 URN：<a href="http://apidocs.joyent.com/sdcapidoc/cloudapi/#CreateMachine"><a href="http://apidocs.joyent.com/sdcapidoc/cloudapi/#CreateMachine">http://apidocs.joyent.com/sdcapidoc/cloudapi/#CreateMachine</a></a></p>
<p>先使用 sdc-listpackages 指令查出需要的機器等級的名稱 &quot;S 1GB RAM (1CORE)&quot;：</p>
<pre><code>[qrtt1@localhost ~]$ sdc-listpackages]([qrtt1@localhost ~$ sdc-listpackages)
[
{
&quot;name&quot;: &quot;XS 512MB RAM (4CORE)&quot;,
&quot;memory&quot;: 512,
&quot;disk&quot;: 15360,
&quot;vcpus&quot;: 4,
&quot;swap&quot;: 1024,
&quot;default&quot;: false
},
{
&quot;name&quot;: &quot;S 1GB RAM (1CORE)&quot;,
&quot;memory&quot;: 1024,
&quot;disk&quot;: 15360,
&quot;vcpus&quot;: 1,
&quot;swap&quot;: 2048,
&quot;default&quot;: true
},
…(略)
]</code></pre>
<p>查出 OS 的 URN，這個例子我們選用 CentOS 6：</p>
<pre><code>[qrtt1@localhost ~]$ sdc-listdatasets]([qrtt1@localhost ~$ sdc-listdatasets)
[
…(略)
{
&quot;id&quot;: &quot;a77907fc-123b-11e1-86d8-2bb3c7c6aaf2&quot;,
&quot;urn&quot;: &quot;centos6:0.1.0&quot;,
&quot;name&quot;: &quot;centos6&quot;,
&quot;os&quot;: &quot;linux&quot;,
&quot;type&quot;: &quot;virtualmachine&quot;,
&quot;description&quot;: &quot;您選擇的是：CentOS 6(64bit)版本，提醒您可以透過SSH金鑰的建立，讓您的連線更加方便有效率。&quot;,
&quot;default&quot;: false,
&quot;requirements&quot;: {},
&quot;version&quot;: &quot;0.1.0&quot;
},
{
&quot;id&quot;: &quot;0ac8200c-13b5-11e1-a042-7b2948257b3b&quot;,
&quot;urn&quot;: &quot;centos57:1.1.6&quot;,
&quot;name&quot;: &quot;centos57&quot;,
&quot;os&quot;: &quot;linux&quot;,
&quot;type&quot;: &quot;virtualmachine&quot;,
&quot;description&quot;: &quot;您選擇的是：CentOS 5(64bit)版本，提醒您可以透過SSH金鑰的建立，讓您的連線更加方便有效率。&quot;,
&quot;default&quot;: false,
&quot;requirements&quot;: {},
&quot;version&quot;: &quot;1.1.6&quot;
}
]</code></pre>
<p>相關資料備妥後，能真的建立機器：</p>
<pre><code>[qrtt1@localhost ~]$ sdc-createmachine --package &quot;S 1GB RAM (1CORE)&quot; --dataset &quot;centos6:0.1.0&quot;]([qrtt1@localhost ~$ sdc-createmachine --package &quot;S 1GB RAM  - 1CORE&quot; --dataset &quot;centos6:0.1.0&quot;)
{
&quot;id&quot;: &quot;4321d746-5df0-4e53-9178-d9390e507c17&quot;,
&quot;name&quot;: &quot;5177256&quot;,
&quot;type&quot;: &quot;virtualmachine&quot;,
&quot;state&quot;: &quot;provisioning&quot;,
&quot;dataset&quot;: &quot;sdc:sdc:centos6:0.1.0&quot;,
&quot;ips&quot;: [
&quot;211.78.245.129&quot;
],
&quot;memory&quot;: 1024,
&quot;disk&quot;: 15360,
&quot;metadata&quot;: {
&quot;root_authorized_keys&quot;: &quot;......&quot;
},
&quot;created&quot;: &quot;2012-11-20T10:25:54+00:00&quot;,
&quot;updated&quot;: &quot;2012-11-20T10:25:54+00:00&quot;,
&quot;primaryIp&quot;: &quot;211.78.245.129&quot;
}</code></pre>
<h1>常用功能:建立機器並指定user-s cript</h1>
<p>使用 MiCloud 時，第一次開啟 CentOS 並安裝軟體，你可能會注意到自動選擇的 mirror site 常常覺得 cn 離它比較接近。而開 Debian 時，預設似乎是抓到 us 的 mirror site。所以每次新建機器後，變更 repo mirror site 成為一個必要的例行工作。您可能曾在 MiCloud 的 wiki 到過這篇 <a href="http://wiki.micloud.tw/Wiki/Wiki.jsp?page=CentOS%20mirror%20site">CentOS mirror site</a></p>
<p>對 IaaS 最迷人之處是：用 API 能搞定一切！所以，我們就換個角度，不應該手工地事後補救。我們可以事前指定要執行的s cript 。這功能幾乎是 IaaS Provider 都有支援的功能，指定開機時執行下列s cript ：</p>
<pre><code>[qrtt1@localhost ~]$ cat change_yum.sh]([qrtt1@localhost ~$ cat change-yum.sh)
yum_cfg=https://raw.github.com/gist/4109252/2899290f3749bb7ce4a5a6934757512d9b980523/yum.base.cfg
curl $yum_cfg &gt; /etc/yum.repos.d/CentOS-Base.repo</code></pre>
<p>機器時，加上 --s cript參數：</p>
<pre><code>[qrtt1@localhost ~]$ sdc-createmachine --package &quot;S 1GB RAM (1CORE)&quot; --dataset &quot;centos6:0.1.0&quot; -- s cript change_yum.sh]([qrtt1@localhost ~$ sdc-createmachine --package &quot;S 1GB RAM  - 1CORE&quot; --dataset &quot;centos6:0.1.0&quot; -- s cript change-yum.sh)
{
&quot;id&quot;: &quot;e743dde0-3005-41fd-9848-07a114e9819c&quot;,
&quot;name&quot;: &quot;a2bc32d&quot;,
&quot;type&quot;: &quot;virtualmachine&quot;,
&quot;state&quot;: &quot;provisioning&quot;,
&quot;dataset&quot;: &quot;sdc:sdc:centos6:0.1.0&quot;,
&quot;ips&quot;: [
&quot;211.78.245.180&quot;
],
&quot;memory&quot;: 1024,
&quot;disk&quot;: 15360,
&quot;metadata&quot;: {
&quot;user-s cript&quot;: &quot;yum_cfg=https://raw.github.com/gist/4109252/2899290f3749bb7ce4a5a6934757512d9b980523/yum.base.cfg
ncurl $yum_cfg &gt; /etc/yum.repos.d/CentOS-Base.repo
n,
&quot;root_authorized_keys&quot;: &quot;...&quot;
},
&quot;created&quot;: &quot;2012-11-22T14:46:37+00:00&quot;,
&quot;updated&quot;: &quot;2012-11-22T14:46:37+00:00&quot;,
&quot;primaryIp&quot;: &quot;211.78.245.180&quot;
}</code></pre>
<h1>常用功能：查詢機器狀態</h1>
<p>查詢機器狀態很直覺得要用 sdc-listmachines 指令，但對我來說比較關心的是我用了多久，也就是機器的 age。sdc-listmachines 會列出 json array：</p>
<pre><code>[qrtt1@localhost ~]$ sdc-listmachines]([qrtt1@localhost ~$ sdc-listmachines)
[
{
&quot;id&quot;: &quot;2b36ed3a-6388-43d0-bcfe-446056952f3b&quot;,
&quot;name&quot;: &quot;dbd1362&quot;,
&quot;type&quot;: &quot;virtualmachine&quot;,
&quot;state&quot;: &quot;running&quot;,
&quot;dataset&quot;: &quot;sdc:sdc:centos6:0.1.0&quot;,
&quot;ips&quot;: [
&quot;211.78.245.129&quot;
],
&quot;memory&quot;: 1024,
&quot;disk&quot;: 15360,
&quot;metadata&quot;: {
&quot;root_authorized_keys&quot;: &quot;...&quot;
},
&quot;created&quot;: &quot;2012-11-20T13:50:29+00:00&quot;,
&quot;updated&quot;: &quot;2012-11-20T13:50:39+00:00&quot;,
&quot;primaryIp&quot;: &quot;211.78.245.129&quot;
}
]</code></pre>
<p>我們能利用一開始安裝的 jsontool，直接查出建立時間（查詢 array index 0 的 created 欄位）：</p>
<pre><code>[qrtt1@localhost ~]$ sdc-listmachines ]( json 0.created)
2012-11-20T13:50:29+00:00</code></pre>
<p>查詢到建立時間就離取得機器的 age 不遠了！javas cript 直接支援解釋 ISO 8601 Date String，我們能寫個簡單的 s cript 換算：</p>
<pre><code>[qrtt1@localhost ~]$ cat age.js]([qrtt1@localhost ~$ cat age.js)
#!/usr/bin/env node

var d = new Date(process.argv[process.argv.length-1]);](var d = new Date - process.argv[process.argv.length-1;)
var time = ((new Date()-d) / 1000) / 60;
console.log(Math.round(time));</code></pre>
<p>配合 jsontool 執行結果如下：</p>
<pre><code>[qrtt1@localhost ~]$ sdc-listmachines ]( json 0.created )
23</code></pre>
<p>心得：如果能直接在 response 有 age 是最好，省得使用者要自己算。</p>
<h1>常用功能:撤銷機器</h1>
<p>MiCloud 的計價結束時間點是在刪除機後才記錄的，而機器要能被刪除必需是關機的狀態。所以，完整的撤銷機器步驟為：<br><em>  關閉機器，使用 sdc-stopmachine 指令
</em>  刪除機器，使用 sdc-deletemachine 指令<br>接續在上一步學習使用到的 jsontool，我們能下達關機與刪除：</p>
<pre><code>sdc-listmachines | json 0.id | xargs sdc-stopmachine
sdc-listmachines | json 0.id | xargs sdc-deletemachine</code></pre>
<h1>附錄：Node.js RPMs</h1>
<p>由於 MiCloud 目前使用的 Cloud API 需要使用 Node.js。這通常得自己編譯，除了版本與現行最新版的差距外，另一個問題是它通常不在 Linux 主要的 software repo 內。我以我們單位主要用到的 CentOS 5 與 CentOS 6 打包了二組 RPMs。當然，我不是專業的 packager 只求能「動」就好。若你想要改變內容，也有 source rpm 版本可供下載：</p>
<pre><code>http://s3-ap-southeast-1.amazonaws.com/qrtt1.software/rpms/nodejs-0.6.8-1.el5.src.rpm
http://s3-ap-southeast-1.amazonaws.com/qrtt1.software/rpms/nodejs-0.6.8-1.el6.src.rpm</code></pre>
<pre><code>http://s3-ap-southeast-1.amazonaws.com/qrtt1.software/rpms/nodejs-0.6.8-1.el5.x86_64.rpm
http://s3-ap-southeast-1.amazonaws.com/qrtt1.software/rpms/nodejs-0.6.8-1.el6.x86_64.rpm</code></pre>
<h1>附錄：Java API</h1>
<p>由於我們單位的程式多半是以 Java 實作的，所以實作 Java 版的 API。目前只實作會用到的功能，但它是很容易擴充的，若是有需要額外的功能就 fork 專案去加唄。網址如下：<a href="https://github.com/qrtt1/joyent.cloudapi"><a href="https://github.com/qrtt1/joyent.cloudapi">https://github.com/qrtt1/joyent.cloudapi</a></a></p>
<hr>
<p>轉載自:</p>
<ul>
<li><a href="https://github.com/qrtt1/joyent.cloudapi/blob/master/MiCloud.Notes.zh-tw.md#%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD%EF%BC%9A%E5%BB%BA%E7%AB%8B%E6%96%B0%E6%A9%9F%E5%99%A8"><a href="https://github.com/qrtt1/joyent.cloudapi/blob/master/MiCloud.Notes.zh_tw.md#%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD%EF%BC%9A%E5%BB%BA%E7%AB%8B%E6%96%B0%E6%A9%9F%E5%99%A8">https://github.com/qrtt1/joyent.cloudapi/blob/master/MiCloud.Notes.zh_tw.md#%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD%EF%BC%9A%E5%BB%BA%E7%AB%8B%E6%96%B0%E6%A9%9F%E5%99%A8</a> </a></li>
</ul>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="SmartMachine+Introduce.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=SmartMachine+Introduce.md">SmartMachine+Introduce.md</a></h1><br/><h1>SmartMachine說明</h1>
<p>SmartMachine為運行於Joyent SmartOS上之最佳化虛擬平台，該平台提供相較於傳統虛擬平台的高效能，以及快速部署網頁應用程式能力。SmartMachine以Solaris為基底，全盤建構於ZFS檔案系統上，省去跨系統溝通的耗損，能夠更為動態調整資源。</p>
<p>您可透過MiCloud雲端管理系統([<a href="http://micloud.tw])監控並管理您的虛擬主機，以及連線操控所部屬的應用服務。MiCloud為持續精進的雲端管理平台，提供多項第三方預載套件，包含最常使用的資料庫MySQL與網頁工具Apache">http://micloud.tw])監控並管理您的虛擬主機，以及連線操控所部屬的應用服務。MiCloud為持續精進的雲端管理平台，提供多項第三方預載套件，包含最常使用的資料庫MySQL與網頁工具Apache</a> HTTPD、PHP，以及遠端管理界面webmin等。](您可透過MiCloud雲端管理系統 - [<a href="http://micloud.tw監控並管理您的虛擬主機，以及連線操控所部屬的應用服務。MiCloud為持續精進的雲端管理平台，提供多項第三方預載套件，包含最常使用的資料庫MySQL與網頁工具Apache">http://micloud.tw監控並管理您的虛擬主機，以及連線操控所部屬的應用服務。MiCloud為持續精進的雲端管理平台，提供多項第三方預載套件，包含最常使用的資料庫MySQL與網頁工具Apache</a> HTTPD、PHP，以及遠端管理界面webmin等。)</p>
<h1>更進階的說明，可以在Joyent Wiki搜尋到</h1>
<ul>
<li><a href="http://wiki.joyent.com/display/smart/Getting+Started+with+SmartMachines">Joyent wiki</a></li>
</ul>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="SmartMachine+MySQL+Guide.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=SmartMachine+MySQL+Guide.md">SmartMachine+MySQL+Guide.md</a></h1><br/><p>SmartMachines come with a Pkgsrc install of MySQL5 in /opt/local. Our older imaged Accelerators come with a Blastwave install of MySQL5 in /opt/csw/mysql5 and MySQL4 in /opt/csw/mysql4. MySQL5 is preferred over MySQL4 because many fixes and features have gone in to 5, especially in replication and clustering. Whatever is used, this guide will work for any of them. This will assume you have a Pkgsrc imaged SmartMachine.</p>
<h1>Replication</h1>
<p>Replication is a method that MySQL uses to mirror changes asynchronously to a secondary server. It is important to know that replication is not a true redundant configuration because there is no automatic fail over, but it is a good way to have a backup copy always on standby. Because of its limited requirements it can be used in lower memory and lower bandwidth situations making replication a good choice for using on small or large Joyent SmartMachines.</p>
<pre><code>Do not get MySQL replication mixed up with MySQL clustering. MySQL clustering is synchronous and a true fail over solution, while replication is asynchronous and only mirrors changes to a secondary server. You would have to use BigIP to handle the fail over case.
Any kind of replication with MySQL is pretty simple. Whether you are doing a master to slave or a master to master, MySQL replication is all one in the same. Once you understand how replication works, the configurations are applied the same way in each setup. And for the small amount of time it takes to implement, you can get huge gains such as redundancy, backups, or even load balancing.</code></pre>
<h1>Master to slave</h1>
<p>In a master to slave setup, the master server holds all of the information and handles client requests whereas the slave just contains a complete copy of the information. The slave is a mirror of the master server. It does this by constantly checking the master&#39;s binary log for updates and replicates them to its self. Because the master has to handle client traffic and slave traffic, the master is usually a more powerful box.</p>
<pre><code>To use a master to slave setup for load balancing the master can do read and writes, but the slave can only do reads. This is because if you do writes on the slave, the master has no way of knowing and copying them over, leaving you with inconsistent data between the two. This problem can be solved in a master to master setup.
To get started you need to setup a replicating user for the servers to talk between with:</code></pre>
<p>On the master:</p>
<pre><code>mysql&gt; grant replication slave, replication client on *.* to &#39;repuser&#39;@&#39;slaveip&#39;
identified by &#39;password&#39;;</code></pre>
<p>Note that here I give it privileges to any database, you can specify if you only want to give it access to a certain database.</p>
<p>Now to the my.cnf settings. For the master, we only need 2 lines under the mraw:mysqld heading.</p>
<p>On the master&#39;s /opt/local/etc/my.cnf:</p>
<pre><code>server-id = 1
log-bin = /var/log/mysql/binary.log
#binlog-do-db = testdb</code></pre>
<p>server-id is a number to identify the master server. In a replicating setup you have to give your servers these unique numbers so they don&#39;t get confused with each other.</p>
<p>log-bin is the path and file to the binary log, where it stores all of the changes. Be sure this directory exists and the user mysql has write access to it. This file will also be replaced with an index number as new log files are created, such as bin.000001, bin.000002, etc.</p>
<p>binlog-do-db is an option that tells to only replicate a certain database. It is commented out here so we will replicate all databases. If you use this, you must have it on the master and slave.</p>
<p>For the slave, we need more lines. It should look like this:</p>
<p>On the slave&#39;s /opt/local/etc/my.cnf:</p>
<pre><code>server-id = 2
master-host = masterip
master-port = 3306
master-user = repuser
master-password = password
log-bin = /databases/binary.log
log-bin-index = /databases/log-bin.index
log-error = /databases/error.log
relay-log = /databases/relay.log
relay-log-info-file = /databases/relay-log.info
relay-log-index = /databases/relay-log.index
master-info-file = /databases/master.info
#binlog-do-db = testdb</code></pre>
<p>You should know server-id from the previous configuration, and the next four lines are authentication settings from when we created the user earlier.</p>
<p>log-bin was mentioned before, but this one is on the slave.</p>
<p>log-bin-index holds the latest binary log file name to use. As mentioned before, the binary log gets rotated (bin.000001, bin.000002, etc), and as they are rotated this file keeps the file names and knows which one is the latest.</p>
<p>log-error is a file that holds any errors that come up in the replication process. It&#39;s always a good idea to have this logging so you know when things go wrong.</p>
<p>relay-log is a file that is for holding a copy of a change that the slave finds in the master&#39;s binary log. These are rotated like binary logs are.</p>
<p>relay-log-info-file holds the name of the file and its position where the relay change was found.</p>
<p>relay-log-index holds the name of the current relay log file to use.</p>
<p>master-info-file holds the user and password information to connect to the master. It also holds the position that it is at of the log.</p>
<p>binlog-do-db is an option that tells to only replicate a certain database. It is commented out here so we will replicate all databases. If you use this, you must have it on the master and slave.</p>
<p>Once you get these settings in and restart each server, everything is ready to go.</p>
<p>On the master and slave:</p>
<pre><code># svcadm restart mysql</code></pre>
<pre><code>Also be sure to check the bind-address is listening on the proper IP, and not 127.0.0.1. If it&#39;s listening on 127.0.0.1 it can&#39;t communicate with another server. The choices are to either map bind-address to the private IP of the machine and communicate over the local network, or use a ssh tunnel.</code></pre>
<p>Generally, a good way to get the master and slave machines to see each other is to leave both bound to 127.0.0.1, and use an ssh tunnel from the slave that maps a new port to mysql on the master. For example, port 3306 would be the slave local database as before, and port 3307 would provide access to the master database through a ssh tunnel.</p>
<p>If you are starting with a blank MySQL, create a database on the master and then check the slave to see if it replicated over. It should be almost instant.</p>
<p>If you already have a database in the master that you want replicated to the slave, you have two options:</p>
<ul>
<li>Run the LOAD DATA FROM MASTER; commmand on the slave which will tell it to grab all the data from the master. Beware this will lock all of the tables and only works with MyISAM</li>
<li>Take a mysqldump of the database and import it to the slave. When doing this make sure you use the mysqldump option --master-data so it will insert the master&#39;s binary log file name and position of the log. After imported to the slave, run:<br>On the slave:</li>
</ul>
<pre><code>mysql&gt; start slave;</code></pre>
<p>This will tell it to connect to the master and start checking for changes in the binary log.</p>
<h1>Master to master</h1>
<p>In a master to master configuration both servers are configured as masters where each one can update each other. Either server can receive writes and they will mirror the changes back and forth to each other, unlike a master to slave configuration where only the master will propagate changes. It does this by constantly check each other&#39;s binary log files for changes.</p>
<pre><code>Load balancing is a lot easier on multi-master because either server can update each other, allowing them both to perform reads and writes without data becoming inconsistent.</code></pre>
<p>One important thing to be aware of in a multi-master setup is because each server can receive writes, auto increment can be a problem if one fails and it starts adding increments that are already there.</p>
<p>To fix this use these two options: auto_increment_increment and auto_increment_offset.</p>
<p>MySQL4 doesn&#39;t have these which makes a multi-master setup on MySQL4 a real pain. These settings keep the increments unique so that they won&#39;t clash with each other. A good explanation of this can be found at:</p>
<p><a href="http://www.onlamp.com/pub/a/onlamp/2006/04/20/advanced-mysql-replication.html"><a href="http://www.onlamp.com/pub/a/onlamp/2006/04/20/advanced-mysql-replication.html">http://www.onlamp.com/pub/a/onlamp/2006/04/20/advanced-mysql-replication.html</a></a></p>
<p>The first thing to do is to setup the users on each server:</p>
<p>On master1:</p>
<pre><code>mysql&gt; grant replication slave, replication client on *.* to &#39;master1&#39;@&#39;master2ip&#39;
identified by &#39;password&#39;;</code></pre>
<p>On master2:</p>
<pre><code>mysql&gt; grant replication slave, replication client on *.* to &#39;master2&#39;@&#39;master1ip&#39;
identified by &#39;password&#39;;</code></pre>
<p>The next part is the settings in /opt/local/etc/my.cnf. Both master1 and master2 will pretty much look the same. Both will be configured as masters with different server-id&#39;s, swapped authentication information, and an auto_increment value.</p>
<p>On master1 under the mraw:mysqld section:</p>
<pre><code>server-id = 1

master-host = master2ip
master-port = 3306
master-user = master2
master-password = password

log-bin = /var/log/mysql/bin.log
log-slave-updates
log-bin-index = /var/log/mysql/log-bin.index
log-error = /var/log/mysql/error.log

relay-log = /var/log/mysql/relay.log
relay-log-info-file = /var/log/mysql/relay-log.info
relay-log-index = /var/log/mysql/relay-log.index
master-info-file = /var/log/mysql/master.info

auto_increment_increment = 10
auto_increment_offset = 1
replicate-same-server-id = 0</code></pre>
<p>On master2 under the mraw:mysqld section:</p>
<pre><code>server-id = 2

master-host = master1ip
master-port = 3306
master-user = master1
master-password = password

log-bin = /var/log/mysql/bin.log
log-slave-updates
log-bin-index = /var/log/mysql/log-bin.index
log-error = /var/log/mysql/error.log

relay-log = /var/log/mysql/relay.log
relay-log-info-file = /var/log/mysql/relay-log.info
relay-log-index = /var/log/mysql/relay-log.index
master-info-file = /var/log/mysql/master.info

auto_increment_increment = 10
auto_increment_offset = 2
replicate-same-server-id = 0</code></pre>
<p>You can see the only main difference here is the authentication information is swapped so they connect to each other. Here are the options explained:</p>
<p>server-id is a number to identify each server. In a replicating setup you have to give your servers these unique numbers so they don&#39;t get confused with each other.</p>
<p>master-host, master-port, master-user, and master-password are authentication settings to communicate with the other server.</p>
<p>log-bin is the path and file to the binary log, where it stores all of the changes. Be sure this directory exists and the user mysql has write access to it. This file will also be replaced with an index number as new log files are created, such as bin.000001, bin.000002, etc.</p>
<p>log-slave-updates tells the server to write changes that it receives from it&#39;s master through the relay log to its own log.</p>
<p>log-bin-index holds the latest binary log file name to use. The binary log gets rotated (bin.000001, bin.000002, etc), and as they are rotated this file keeps the file names and knows which one is the latest.</p>
<p>log-error is a file that holds any errors that come up in the replication process. It&#39;s always a good idea to have this logging so you know when things go wrong.</p>
<p>relay-log is a file that is for holding a copy of a change that the slave finds in the master&#39;s binary log. These are rotated like binary logs are.</p>
<p>relay-log-info-file holds the name of the file and its position where the relay change was found.</p>
<p>relay-log-index holds the name of the current relay log file to use.</p>
<p>master-info-file holds the user and password information to connect to the master. It also holds the position that it is at of the log.</p>
<p>replicate-same-server-id tells each server to ignore any statements that originated from its own server ID. This prevents infinite replication loops.</p>
<p>It is a good idea to be watching the error.log on both master1 and master2 while they are starting up so you can understand how they communicate with each other.</p>
<p>On master1 and master2:</p>
<pre><code># svcadm restart mysql</code></pre>
<p>When you restart them it is likely you won&#39;t be able to restart them at exactly the same time so one of them will refuse the connection at first. On one of the servers you&#39;ll probably see:</p>
<pre><code>070608 20:15:12 [ERROR] Slave I/O thread: error connecting to master &#39;master1@x.x.x.x:3306&#39;:](070608 20:15:12 [ERROR Slave I/O thread: error connecting to master &#39;master1@x.x.x.x:3306&#39;:)
Error: &#39;Lost connection to MySQL server at &#39;reading initial communication packet&#39;, system
error: 146&#39;  errno: 2013  retry-time: 60  retries: 86400</code></pre>
<p>Just ignore this and give it a minute or so to retry and sync up. You should see this when it finally does connect successfully:</p>
<pre><code>070608 20:16:27 [Note] Slave I/O thread: connected to master &#39;master1@x.x.x.x:3306&#39;,](070608 20:16:27 [Note Slave I/O thread: connected to master &#39;master1@x.x.x.x:3306&#39;,)
replication started in log &#39;FIRST&#39; at position 4</code></pre>
<p>Now you want to go to both master1 and master2 and run:</p>
<pre><code>mysql&gt; show slave status
G;
*  ************************** 1. row ***************************
Slave_IO_State: Waiting for master to send event
Master_Host: x.x.x.x
Master_User: master1
Master_Port: 3306
Connect_Retry: 60
Master_Log_File: bin.000001
Read_Master_Log_Pos: 278
Relay_Log_File: relay.000027
Relay_Log_Pos: 229
Relay_Master_Log_File: bin.000001
Slave_IO_Running: Yes
Slave_SQL_Running: Yes
Replicate_Do_DB:
Replicate_Ignore_DB:
Replicate_Do_Table:
Replicate_Ignore_Table:
Replicate_Wild_Do_Table:
Replicate_Wild_Ignore_Table:
Last_Errno: 0
Last_Error:
Skip_Counter: 0
Exec_Master_Log_Pos: 278
Relay_Log_Space: 229
Until_Condition: None
Until_Log_File:
Until_Log_Pos: 0
Master_SSL_Allowed: No
Master_SSL_CA_File:
Master_SSL_CA_Path:
Master_SSL_Cert:
Master_SSL_Cipher:
Master_SSL_Key:
Seconds_Behind_Master: 0
1 row in set (0.00 sec)</code></pre>
<p>If Slave_IO_Running and Slave_SQL_Running are both set to Yes, everything should be working properly.</p>
<p>Now check that you can create a database on master1 and it replicated to master2. Then check that you can create a database on master2 and it replicate to master1.</p>
<p>If one of the servers fail for some reason and you start the failed server, they should sync up and be ready to go without any kind of changes. You should not have to tell either one to start slave; This is a good test to do once you get everything setup:</p>
<p>Go to master1, stop it, check the show slave status<br>G on master2</p>
<p>You should see:</p>
<pre><code>Slave_IO_Running: No
Slave_SQL_Running: Yes</code></pre>
<p>Now goto master1, start it, and check the slow slave status<br>G on both of them. After 30 seconds or so they should both show:</p>
<pre><code>Slave_IO_Running: Yes
Slave_SQL_Running: Yes</code></pre>
<p>You should also see them sync back up in the error.log file.</p>
<h1>Troubleshooting</h1>
<ul>
<li>Check that you can telnet to each server on the MySQL listening port from one another.</li>
<li>Become familiar with the show slave status command.<br>On the slave:</li>
</ul>
<pre><code>mysql&gt; show slave status
G;
*  ************************** 1. row ***************************
Slave_IO_State: Waiting for master to send event
Master_Host: x.x.x.x
Master_User: repuser
Master_Port: 3306
Connect_Retry: 60
Master_Log_File: bin.000003
Read_Master_Log_Pos: 1077
Relay_Log_File: relay.000003
Relay_Log_Pos: 312
Relay_Master_Log_File: bin.000003
Slave_IO_Running: Yes
Slave_SQL_Running: Yes
Replicate_Do_DB:
Replicate_Ignore_DB:
Replicate_Do_Table:
Replicate_Ignore_Table:
Replicate_Wild_Do_Table:
Replicate_Wild_Ignore_Table:
Last_Errno: 0
Last_Error:
Skip_Counter: 0
Exec_Master_Log_Pos: 1077
Relay_Log_Space: 312
Until_Condition: None
Until_Log_File:
Until_Log_Pos: 0
Master_SSL_Allowed: No
Master_SSL_CA_File:
Master_SSL_CA_Path:
Master_SSL_Cert:
Master_SSL_Cipher:
Master_SSL_Key:
Seconds_Behind_Master: 0</code></pre>
<p>If Slave_IO_Running and Slave_SQL_Running are Yes, the slave is connected and working. If they say No, check your log-error file.</p>
<ul>
<li>Check your log-error file.</li>
<li>Check your user and password configuration again. If you change the user and password information in my.cnf, you will need to delete the var/master.info file first before starting up otherwise it will not pick up the changes. &quot;reset master&quot; will do the same.<h1>Extra configuration options</h1>
The configurations shown above in this guide will only get you started with replication. There are many other options mentioned here that you will want to look at.</li>
</ul>
<p>sync_binlog = num - This option tells MySQL to flush the binary log to disk after every number change. It is recommended you leave this value alone. Setting this value to something other than the default can kill your performance.</p>
<p>relay_log_purge = 1 - This says you want to turn purging of log files on.</p>
<p>expire_logs_days = 4 - This goes with the option above, saying to delete binary logs older than 4 days.</p>
<p>report-host = server1 - This will report the name of the server as shown in the &quot;show slave hosts&quot; command.</p>
<p>slave-skip-errors = 1062 - This will ignore &quot;Duplicate Entry&quot; errors. This error is very common on master to master setups and will cause your replication to break.</p>
<h1>Extra commands</h1>
<p>This shows you the status information of the binary log files on the master.<br>On the master:</p>
<pre><code>mysql&gt; show master status;
+------------+----------+--------------+------------------+
| File       | Position | Binlog_Do_DB | Binlog_Ignore_DB |
+------------+----------+--------------+------------------+
| bin.000003 |     1077 |              |                  |
+------------+----------+--------------+------------------+
1 row in set (0.00 sec)</code></pre>
<ul>
<li>Lists the binary logs on the server:<br>On the master or slave:</li>
</ul>
<pre><code>mysql&gt; show binary logs;
+------------+-----------+
| Log_name   | File_size |
+------------+-----------+
| bin.000001 |       210 |
| bin.000002 |       870 |
| bin.000003 |      1077 |
+------------+-----------+
3 rows in set (0.00 sec)</code></pre>
<ul>
<li>Lists replication slaves (you must have the slave started with --report-host=slave_name, or report-host in your mraw:mysqld section of /opt/local/etc/my.cnf) for it to show the slave:<br>On the master or slave:</li>
</ul>
<pre><code>mysql&gt; show slave hosts;
+-----------+--------+------+-------------------+-----------+
| Server_id | Host   | Port | Rpl_recovery_rank | Master_id |
+-----------+--------+------+-------------------+-----------+
|         2 | slave1 | 3306 |                 0 |         1 |
+-----------+--------+------+-------------------+-----------+
1 row in set (0.00 sec)</code></pre>
<h1>Help my replication is screwed</h1>
<p>A common problem with replication is the binary logs get too far behind on one server or the positions get mixed up with each other. This especially happens on master to master configurations. This will show you how to sync them back up with each other depending on what configuration you have.</p>
<h1>Master to Slave</h1>
<p>To sync a slave back up with a master all that is needed is a dump of the master, import on the slave, and start the slave with the correct coordinates.</p>
<p>On the master dump the database without the the mysql user tables and use the --master-data=2 option which puts the binary file and coordinates at the top of the dump file:</p>
<pre><code># mysqldump -uroot -p --master-data=2 -A --ignore-table=mysql.user  --ignore-
table=mysql.host --ignore-table=mysql.tables_priv --ignore-table=mysql.servers --ignore-table=mysql.db &gt; /opt/dump.sql</code></pre>
<p>Send this file to the slave:</p>
<pre><code># scp /opt/dump.sql admin@x.x.x.x:/home/admin</code></pre>
<p>Import the data on the slave:</p>
<pre><code># mysql -uroot -p &lt; /home/admin/dump.sql</code></pre>
<p>Get the binary file and coordinates from the dump file. It will be a &#39;CHANGE MASTER TO&#39; statement at the top:</p>
<pre><code># head -30 /home/admin/dump.sql</code></pre>
<p>On the slave reset the binary files and issue the CHANGE MASTER TO statement replacing master_user, master_password, master_host with the masters information and master_log_file, master_log_post with the binary file and coordinates you found in the dump.sql file:</p>
<pre><code># mysql -uroot -p
mysql&gt; stop slave;
mysql&gt; reset master;
mysql&gt; reset slave;
mysql&gt; CHANGE MASTER TO master_user = &#39;repuser&#39;, master_password = &#39;password&#39;, master_host = &#39;x.x.x.x&#39;, master_log_file = &#39;bin.xxx&#39;, master_log_pos=xxxxxx;
mysql&gt; start slave;</code></pre>
<p>Check to make sure everything looks good:</p>
<pre><code>mysql&gt; show slave status
G;</code></pre>
<p>If it does you will see Slave_IO_Running and Slave_SQL_Running showing &#39;Yes&#39;.</p>
<h1>Master to Master</h1>
<p>To clean out everything and re-sync two master servers all you need to do is flush out both servers binary logs, take a dump of one DB import it on the other (while tables are write locked), and then start the other back up.</p>
<p>Flushing the binary logs will not lose you anything since all the binary log holds are changes that have happened to the database.</p>
<p>On server1 (active):</p>
<pre><code>mysql&gt; reset master;
mysql&gt; reset slave;
mysql&gt; flush tables with read lock;
mysql&gt; stop slave;
# mysqldump -u root -p database &gt; db.sql
# scp db.sql root@server2:/opt</code></pre>
<p>On server2:</p>
<pre><code>mysql&gt; reset master;
mysql&gt; reset slave;
# mysql -u root -p &lt; /opt/db.sql
# svcadm restart mysql</code></pre>
<p>On server1:</p>
<pre><code>mysql&gt; unlock tables;
mysql&gt; start slave;</code></pre>
<h1>Sync to Master script</h1>
<p>This script will do all of the steps above in the master to slave case. It assumes that your my.cnf already has the proper slave configuration in place and all that needs is the dump, import, and CHANGE MASTER statement issued. This script is to be run on the slave.</p>
<p>You must first run this on the master mysql. This gives the slave permission to add users:</p>
<pre><code>mysql&gt; grant all on *.* to &#39;root&#39;@&#39;10.%.%.%&#39; identified by &#39;masterpass&#39; with grant option;
mysql&gt; flush privileges;</code></pre>
<p>Then edit the top of the file and change the variables. The MASTERUS, MASTERPW, SLAVEUS, and SLAVEPW are the mysql root user and passwords for each instance. The REPUS and REPPW can be anything and is the replication user and password used for communication between the two.</p>
<pre><code>## Edit these lines below for master and slave. Use internal IPs.
##
## Master mysql
MASTERIP=&quot;x.x.x.x&quot;;
MASTERUS=&quot;root&quot;;
MASTERPW=&quot;password&quot;;
## Slave mysql (this host)
SLAVEIP=&quot;x.x.x.x&quot;;
SLAVEUS=&quot;root&quot;;
SLAVEPW=&quot;password&quot;;
## Replication user
REPUS=&quot;repuser&quot;;
REPPW=&quot;password&quot;;
##
## DO NOT EDIT BLEOW THIS LINE. Stop editing here.</code></pre>
<p>And run the file on the slave:</p>
<pre><code># /opt/synctomaster.sh
====&gt; Dumping SQL data from x.x.x.x..
====&gt; Import SQL data from dump..
====&gt; Adding slave user to x.x.x.x..
====&gt; Getting binary coordinate position from x.x.x.x..
====&gt; Stopping slave and changing master to x.x.x.x..
====&gt; Verifiying the slave is connected to the master..
====&gt; Looks good! We are done.</code></pre>
<p>Script:</p>
<pre><code>#!/usr/bin/bash
#
# This will configure the slave host to the master host
# specified, sync all data to the slave, and start replication.
# This script is to be run on the slave.
#
# REQUIREMENTS:
# 1) You must have the master host root user grant allowed from 10.2.* with grant option:
#    On the master mysql, do:
#    mysql&gt; grant all on *.* to &#39;root&#39;@&#39;10.2.%.%&#39; identified by &#39;masterpass&#39; with grant option;
#    mysql&gt; flush privileges;
#
# 2) The master must have the proper master configuration in place: server-id, log-bin, log-bin-index, and log-error all set
#
# 3) The slave must have the proper slave configuration in place: server-id, log-bin, log-bin-index, log-error, master-host,
#    master-info-file, master-port, master-user, master-password relay-log, relay-log-info-file, and relay-log-index all set

## Edit these lines below for master and slave. Use internal IPs.
##
## Master mysql
MASTERIP=&quot;x.x.x.x&quot;;
MASTERUS=&quot;root&quot;;
MASTERPW=&quot;password&quot;;
## Slave mysql (this host)
SLAVEIP=&quot;x.x.x.x&quot;;
SLAVEUS=&quot;root&quot;;
SLAVEPW=&quot;password&quot;;
## Replication user
REPUS=&quot;repuser&quot;;
REPPW=&quot;password&quot;;
##
## DO NOT EDIT BLEOW THIS LINE. Stop editing here.

DUMPFILE=&quot;/opt/dump.sql&quot;;
GSEDBIN=&quot;/opt/local/bin/gsed&quot;;
SVCADMBIN=&quot;/usr/sbin/svcadm&quot;;
RMBIN=&quot;/usr/bin/rm&quot;;
GREPBIN=&quot;/usr/xpg4/bin/grep&quot;;
CATBIN=&quot;/usr/bin/cat&quot;;
AWKBIN=&quot;/usr/xpg4/bin/awk&quot;;
MYSQLDUMPBIN=`which mysqldump`;
MYSQLBIN=`which mysql`;
HEADBIN=&quot;/usr/bin/head&quot;;

echo &quot;====&gt; Dumping SQL data from ${MASTERIP}..&quot;;
${MYSQLDUMPBIN} -u${MASTERUS} -p${MASTERPW} --host=${MASTERIP} --master-data=2 -A --ignore-table=mysql.user --ignore-table=mysql.host --ignore-table=mysql.tables_priv --ignore-table=mysql.servers --ignore-table=mysql.db &gt; ${DUMPFILE}

echo &quot;====&gt; Import SQL data from dump..&quot;;
${MYSQLBIN} -u${SLAVEUS} -p${SLAVEPW} &lt; ${DUMPFILE}
${RMBIN} ${DUMPFILE}

echo &quot;====&gt; Adding slave user to ${MASTERIP}..&quot;;
${MYSQLBIN} -u${MASTERUS} -p${MASTERPW} --host=${MASTERIP} -sN -e &quot;grant replication slave, replication client on *.* to &#39;${REPUS}&#39;@&#39;${SLAVEIP}&#39; identified by &#39;${REPPW}&#39;&quot;
${MYSQLBIN} -u${MASTERUS} -p${MASTERPW} --host=${MASTERIP} -sN -e &quot;flush privileges&quot;

echo &quot;====&gt; Getting binary coordinate position from ${MASTERIP}..&quot;;
BINFILE=`${HEADBIN} -30 ${DUMPFILE} | ${GREPBIN} MASTER_LOG_FILE | ${AWKBIN} -F
&#39; &#39;{ print $2 }&#39;`;
BINPOS=`${HEADBIN} -30 ${DUMPFILE} | ${GREPBIN} MASTER_LOG_FILE | ${AWKBIN} -F= &#39;{ print $3 }&#39; | ${AWKBIN} -F
; &#39;{ print $1 }&#39;`;

echo &quot;====&gt; Stopping slave and changing master to ${MASTERIP}..&quot;;
${MYSQLBIN} -u${SLAVEUS} -p${SLAVEPW} -sN -e &quot;stop slave&quot;
${MYSQLBIN} -u${SLAVEUS} -p${SLAVEPW} -sN -e &quot;reset master&quot;
${MYSQLBIN} -u${SLAVEUS} -p${SLAVEPW} -sN -e &quot;reset slave&quot;
${MYSQLBIN} -u${SLAVEUS} -p${SLAVEPW} -sN -e &quot;CHANGE MASTER TO master_user=&#39;${REPUS}&#39;, master_password=&#39;${REPPW}&#39;, master_host=&#39;${MASTERIP}&#39;, master_log_file=&#39;${BINFILE}&#39;, master_log_pos=${BINPOS}&quot;
${MYSQLBIN} -u${SLAVEUS} -p${SLAVEPW} -sN -e &quot;start slave&quot;

echo &quot;====&gt; Verifiying the slave is connected to the master..&quot;;
SLAVEIO=`${MYSQLBIN} -u${SLAVEUS} -p${SLAVEPW} -s -e &quot;show slave status
G&quot; | ${GREPBIN} Slave_IO_Running | ${AWKBIN} &#39;{ print $2 }&#39;`;
SLAVESQL=`${MYSQLBIN} -u${SLAVEUS} -p${SLAVEPW} -s -e &quot;show slave status
G&quot; | ${GREPBIN} Slave_SQL_Running | ${AWKBIN} &#39;{ print $2 }&#39;`;

if [[ &quot;${SLAVEIO}&quot; == &quot;Yes&quot; ]] &amp;&amp; [[ &quot;${SLAVESQL}&quot; == &quot;Yes&quot; ]]; then](if [[ &quot;${SLAVEIO}&quot; == &quot;Yes&quot; ] &amp;&amp; [[ &quot;${SLAVESQL}&quot; == &quot;Yes&quot; ]]; then)
echo &quot;====&gt; Looks good! We are done.&quot;;
else
echo &quot;====&gt; ERROR: Both slave threads aren&#39;t running, check your setup and try again.&quot;;
exit;
fi

${SVCADMBIN} disable mysql
sleep 4;
${SVCADMBIN} enable mysql

echo &quot;====&gt; Done!&quot;;</code></pre>
<h1>Performance and Tuning</h1>
<h1>Caching</h1>
<p>By default, SmartMachines come with our best guess MySQL memory tunings. However, this doesn&#39;t satisfy everyone as your tunings can vary depending on many things.</p>
<p>Tuning a MySQL database for your SmartMachine depends on two main things: How large your SmartMachine is (memory), and what engine you are going to be using (MyISAM, InnoDB). You want to be able to dedicate as much memory as possible to your database without going over the SmartMachine&#39;s memory limit. When you go over the limit your SmartMachine will start swapping and it will completely lock you out because it won&#39;t be able to allocate memory for other processes. Then you will get worse performance than before you started. So you want to give MySQL about 80% of your RAM size and leave the 20% for room to grow. This is assuming all you are running is MySQL and nothing else.</p>
<p>A main part of tuning MySQL is having proper cache&#39;ing. The more MySQL can use the cache and less the disk, the better performance you will get. Tuning these settings can improve the cache and MySQL in general:</p>
<h1>MyISAM</h1>
<p>key_buffer = numM - Cache&#39;s MyISAM index data only. A good measurement to check the sum of all of your *.MYI files and then match that size. Use:</p>
<pre><code># gdu -sch `find /var/mysql -name *.MYI`</code></pre>
<p>If you have available memory, then set it to more than this value. If you don&#39;t have available memory to cover this value then you should upgrade or look at other ways to help performance here.</p>
<p>myisam_sort_buffer_size = numM - This amount of memory is allocated when using REPAIR TABLE or when creating indexes with CREATE INDEX or ALTER TABLE. More memory will help speed these operations up. The default value on your SmartMachine is usually fine.</p>
<p>read_buffer_size = numM - This buffer is used when performing sequential table scans. Increasing it allows for more chunks of of the table to be read at a time which can reduce the amount of disk activity used. Be careful as this is a per-connection setting and will use this amount of memory per connection.</p>
<p>read_rnd_buffer_size = numM - Goes along with read_buffer_size but used for intermediate SORT&#39;s. If this value isn&#39;t set it will default to what read_buffer_size is set to. This is a per-connection setting.</p>
<p>sort_buffer_size = numM - Used for ORDER BY and GROUP BY operations. If you have a lot of queries sorting large sets, increasing this value can improve performance. Be careful as this is a per-connection setting and will use this amount of memory per connection.</p>
<h1>InnoDB</h1>
<p>innodb_buffer_pool_size = numM - Cache&#39;s InnoDB index and data information. A good measurement is to check the size of your innodb data file and then match that size. Use:</p>
<pre><code># ls -alh /var/mysql/ibdata</code></pre>
<p>If you have available memory, then set it to more than this value. If you don&#39;t have available memory to cover this value then you should upgrade or look at other ways to help performance here.</p>
<p>innodb_additional_mem_pool_size = numM - Additional memory to allocate for InnoDB buffer when it runs out.</p>
<p>innodb_log_file_size = numM - Holds most recent transactions and gets flushed in a circular rotation. This value can really improve write performance with a higher value. InnoDB by default uses 5M which is way too small. If you have a lot of writes, start with a value of 100MB or more. If you need to change this value, you have to perform a few extra steps. Shut down mysql, rename the ib_logfile&#39;s, change the setting, and then start mysql back up:</p>
<pre><code># svcadm disable mysql
# mv /var/mysql/ib_logfile0 /var/mysql/ib_logfile0.bak
# mv /var/mysql/ib_logfile1 /var/mysql/ib_logfile1.bak
&lt;edit my.cnf, change setting and save file&gt;
# svcadm enable mysql</code></pre>
<p>The new ib_logfile&#39;s will be created on start up.</p>
<p>innodb_log_buffer_size = numM - Keeps most recent changes in the buffer and flushes to innodb log files once it gets full. A higher value can help improve write performance. The maximum value is 8MB which is what we set by default on pkgsrc SmartMachines.</p>
<p>innodb_flush_log_at_trx_commit = 0|1|2 - Controls how the Innodb buffer gets flushed. The best setting for performance to loss of data is 2. This tells it to write the log buffer to the log file at every commit, but don&#39;t flush it. InnoDB will schedule a flush once per second. Warning: If you set this value to 1 you will most likely suffer write performance on your SmartMachine.</p>
<p>innodb_doublewrite = 0 - Setting this value to 0 turns off the doublewrite buffer in mysql which keeps partial writes from never happening. Because we use the ZFS file system, it does this for us so we can disable this setting. This saves us one less fsync() per write.</p>
<h1>For any table type, pay attention to these variables</h1>
<p>table_cache = num - This controls how many table opens will be cached. If your database uses many tables, this can help. If the Opened_tables from show status; starts increasing, you should increase this value.</p>
<p>thread_cache_size = num - This cache&#39;s threads, each thread represents a connection to MySQL. If you have a lot of connections opening and closing, this can hog up CPU. Check Threads_cached to Threads_created in the output of show status;. You need to up this variable if you have a lot created, and none cached.</p>
<p>query_cache_size = numM - Cache&#39;s queries. If you have a lot of SELECT&#39;s, this can be very helpful. If you have a lot of inserts and updates, this can be wasteful. The formula to check your hit ratio is:</p>
<p>qcache_hit_ratio = qcache_hits / (qcache_hits + qcache_inserts + qcache_not_cached)</p>
<p>thread_concurrency = num - Tells MySQL how many CPUs it can use. Set this to however many cores are in the system. For SmartMachines, this is set to 8 or 16.</p>
<h1>Network</h1>
<p>skip_name_resolv - Tells MySQL to not use DNS look ups on clients. This is good for security and performance since it will speed up connections and reduce DOS attacks. Be aware that using this you cannot use hostnames in user privileges but you can still use the &#39;localhost&#39; value.</p>
<h1>Using DTrace on MySQL</h1>
<p>Even though there aren&#39;t DTrace probes for MySQL released yet, we can still get useful information from MySQL. DTrace has a pid provider which allows us to get into any function the program is executing and see it&#39;s arguments. The only drawback is you have to go digging around in the source code to find out what you want to see. But thanks to guys like Brendan Gregg, they have already done some of the digging for us</p>
<p>Even if we want to go digging around ourselves, it&#39;s really not that hard; you just have to get your feet wet. And because SmartMachines have DTrace probes enabled, you can take advantage of using DTrace on MySQL. I will show some examples of this and how easy it is to hunt down your own functions.</p>
<p>First let&#39;s start with functions that have already been dug up for us:</p>
<pre><code>mysql_parse(thd, thd-&gt;query, length, &amp; found_semicolon);</code></pre>
<p>This is the function MySQL uses to parse a query. So all we have to do is trace this function through the pid provider and we get to see all the queries coming through. This shows arg1 as being the query, and we must copy it in to kernel land where DTrace works for it to see the string:</p>
<pre><code>root@ferrari:~#  dtrace -qn &#39;pid$target:mysqld:*mysql_parse*:entry { printf(&quot;%Y      %s
n&quot;, walltimestamp, copyinstr(arg1)) }&#39; -p `pgrep -x mysqld`
2007 Sep 27 10:04:35    select * from blah
2007 Sep 27 10:04:58    select * from tablenothere</code></pre>
<p>Notice that this will show all queries, even if they aren&#39;t successful. Now that we can trace queries, this can give us good information. For example we can see what queries are executed the most:</p>
<pre><code>root@ferrari:~# dtrace -qn &#39;pid$target:mysqld:*mysql_parse*:entry { @queries[copyinstr(arg1)] = count() }&#39; -p `pgrep -x mysqld`](root@ferrari:~# dtrace -qn &#39;pid$target:mysqld:*mysql-parse*:entry { @queries[copyinstr - arg1 = count -  }&#39; -p `pgrep -x mysqld`)
^C

select * from blah                                                5
select * from tablenothere                                        10</code></pre>
<p>You can&#39;t get this kind of information from MySQL unless you write some kind of script to parse through the query log. If we know that there is a query being executed 1000 more times than the others, we could always try to get this one to cache. Now lets say we want to find out how long a query took to execute. The function mysql_execute_command does the actual execution of the queries so all we do here is subtract the entry and return timestamps of this function. The script shown below uses this:</p>
<pre><code>root@ferrari:~# ./exactquerytimes.d -p `pgrep -x mysqld`
Tracing... Hit Ctrl-C to end.

Query: SELECT COUNT(*) FROM joe_visitors where  upper(vs_browser) not like&#39;%GOOGLE%&#39; and upper(vs_browser) not like&#39;%GOOGLE BOT%&#39; and upper(vs_browser) not like&#39;%BOT%&#39; and upper(vs_browser) not like&#39;%MSN%&#39; and upper(vs_browser) not like&#39;%MSNBOT%&#39; and upper(,

Time: 2.32</code></pre>
<p>On the MySQL side, it showed this query being executed at 2.32 seconds as well:</p>
<pre><code>1 row in set (2.32 sec).</code></pre>
<p>This is awesome information because as of now MySQL doesn&#39;t allow you to see a slow query that is less than 1 second (I believe this is a fix in MySQL 5.1). So with this, we can see not just slow queries, but all queries and how long they take to execute with their times.</p>
<p>Now let&#39;s try this same query but I bumped my query_cache_size up to 50M:</p>
<p>The first try (won&#39;t hit the cache):</p>
<pre><code>root@ferrari:~# ./exactquerytimes.d -p `pgrep -x mysqld`
Tracing... Hit Ctrl-C to end.

Query: SELECT COUNT(*) FROM joe_visitors where  upper(vs_browser) not like&#39;%GOOGLE%&#39; and upper(vs_browser) not like&#39;%GOOGLE BOT%&#39; and upper(vs_browser) not like&#39;%BOT%&#39; and upper(vs_browser) not like&#39;%MSN%&#39; and upper(vs_browser) not like&#39;%MSNBOT%&#39; and upper(,

Time: 2.28</code></pre>
<p>And the second try hits the cache but doesn&#39;t show anything through DTrace. So this means a query that is served from the cache won&#39;t show up in mysql_parse. Right now this probably doesn&#39;t mean much, but as you learn more about how the internals of MySQL work, then troubleshooting becomes much easier down the road.</p>
<p>So far this has all been information that was provided. Now I will show how simple it is search through MySQL&#39;s source and look at functions.</p>
<p>First we need to decide what to look for. Let&#39;s say we want to find out every time that slow query is written to the slow query log. First we download the MySQL source code from <a href="http://www.mysql.com">http://www.mysql.com</a>. Now we can search through the source code for &#39;slow query&#39;:</p>
<p>root@ferrari:/export/home/derek/mysql-5.0.45# ggrep -ri &#39;slow query&#39; *<br>This turns up only a few source code files, one of them looking most obvious called log.cc with the expression &quot;Write to the query log&quot;. The MySQL code is very well commented so it makes searching really easy. Looking in this file, that comment is right above the function:</p>
<pre><code>/*
Write to the slow query log.
*  /
bool MYSQL_LOG::write(THD *thd,const char *query, uint query_length,time_t query_start_arg)</code></pre>
<p>It&#39;s obvious that this function is the function that writes to the slow query log. Running this script below, looking for function LOG while a slow query is being inserted shows this function being executed with some weird characters around it:</p>
<pre><code>root@ferrari:~# dtrace -F -n &#39;pid$1:mysqld:*LOG*:entry {} pid$1:mysqld:*LOG*:return {}&#39; `pgrep -x mysqld`
dtrace: description&#39;pid$1:mysqld:*LOG*:entry &#39; matched 126 probes
CPU FUNCTION
0  -&gt; _ZN9MYSQL_LOG5writeEP3THD19enum_server_commandPKcz
0  -&gt; _ZN9MYSQL_LOG5writeEP3THDPKcjl
0  &lt; - _ZN9MYSQL_LOG5writeEP3THDPKcjl</code></pre>
<p>The only thing bad about tracing MySQL through the pid provider is that these weird characters change between MySQL versions, so we can&#39;t always trace for &#39;_ZN9MYSQL_LOG5writeEP3THDPKcjl&#39; if we want it to work on other machines. We have to trace for MYSQ<em>LOG</em>write which slowquerycounts.d uses:</p>
<pre><code>root@ferrari:~# ./slowquerycounts.d -p `pgrep -x mysqld`
Tracing... Hit Ctrl-C to end.

SELECT COUNT(*) FROM joe_visitors where  upper(vs_browser) not like&#39;%GOOGLE%&#39; and upper(vs_browser) not like&#39;%GOOGLE BOT%&#39; and upper(vs_browser) not like&#39;%BOT%&#39; and upper(vs_browser) not like&#39;%MSN%&#39; and upper(vs_browser) not like&#39;%MSNBOT%&#39; and upper(

3</code></pre>
<p>As you can see DTrace can be very powerful even if we don&#39;t have probes released yet, we just have to do a little extra work. Some of the information shown can be obtained from MySQL, but using DTrace still provides a benefit because we don&#39;t have to enable anything in the MySQL configuration, possibly making us restart the server. I&#39;m providing these scripts in the MySQLDTraceKit.tar.gz<br>Hopefully in the near future we will have real MySQL probes.</p>
<h1>Repairing a MySQL database</h1>
<p>To repair a corrupted MySQL (MyISAM) table, do following</p>
<ul>
<li>Sign in to Virtualmin</li>
<li>Select a database from the drop down menu on the left. A list of tables in that database will appear directly below the drop down menu.</li>
<li>In the main content area, select the check box next to the table you want to repair</li>
<li>In the With Selected drop down bellow, select Repair Table . You should now see a SQL-query message telling you that the status of the table is OK</li>
<li>At the top of the main content area, click the STRUCTURE tab</li>
<li>Select the same table again but this time select Optimize Table from the With Selected drop down. You should now see a SQL-query message telling you that the status of the table is OK.<br>Your MySQL table should now be repaired.</li>
</ul>
<h1>Backing up a MySQL database</h1>
<p>To backup a MySQL database, do the following.</p>
<h1>Using Virtualmin</h1>
<ul>
<li>Sign in to Virtualmin.</li>
<li>Select a domain from the drop-down in the left-hand navigation (your main domain should be already selected when you first login to Virtualmin).</li>
<li>Click Edit Databases. You should now see a list of your current databases on the Edit Databases page.</li>
<li>Select the MySQL database you want to back up from the left-hand column under Database name and click Manage...</li>
<li>Click Backup Database. You should now see the Backup Database page.</li>
<li>For Backup to file, enter a location on your account where you want the data base to be saved and a suitable filename (e.g., /users/home/yourusername/dbbackup). Clicking ... will allow you to browse to a suitable location on your account.</li>
<li>Select whether you want all tables to be saved, or just a few specific ones. If you want to back up everything, then just leave All tables selected</li>
<li>For Add drop table statements to backup?, leave it as No unless you need a drop table statment</li>
<li>Leave Character set for backup as the default</li>
<li>Leave Backup compatability format as the default</li>
<li>And for Compression format decide whether you want to compress your backup to save space.</li>
<li>Now, click Backup Now. You should now see a page confirming a successful backup and your database should be saved in your desired location<br>And that&#39;s it, you&#39;ve just made a backup of your MySQL database!</li>
</ul>
<h1>Using the Shell</h1>
<ul>
<li>cd to the directory where you wish to store the data.</li>
<li>Enter:</li>
</ul>
<pre><code>mysqldump --compress --user=USERNAME -p --opt --lock-tables=false --skip-add-locks --skip-extended-insert DATABASE &gt; DATABASE.sql</code></pre>
<pre><code>Replace the values in CAPS with the specific values for your account. You can also change the character set, if you wish. The file can be compressed for faster transfer with:

gzip DATABASE.sql</code></pre>
<h1>Restoring up a MySQL database</h1>
<p>To restore/import a MySQL database, do the following.</p>
<h1>Using Virtualmin</h1>
<ul>
<li>Sign in to Virtualmin.</li>
<li>Select a domain from the drop-down in the left-hand navigation (your main domain should be already selected when you first login to Virtualmin).</li>
<li>Click Edit Databases. You should now see a list of your current databases on the Edit Databases page.</li>
<li>Select the MySQL database you want to back up from the left-hand column under Database name and click Manage...</li>
<li>Click Execute SQL. You should now see the Execute SQL page.</li>
<li>Near the bottom of the page either enter a location on your account where you want the data base to be restored from for From local file (clicking ... will allow you to browse and select the file) or select From uploaded file and click Choose File to select a file from your local machine.</li>
<li>For File format, leave it as Tab separated</li>
<li>Now, click Execute. You should now see the Import Data page confirming a successful restoration and your MySQL database.<br>And that&#39;s it, you&#39;ve just restored your MySQL database!</li>
</ul>
<h1>Using the Shell</h1>
<ul>
<li>cd to the directory where your sql data is stored.</li>
<li>Enter:</li>
</ul>
<pre><code>mysql --user=USERNAME --password=PASSWORD DATABASE &lt; DATABASE.sql</code></pre>
<pre><code>If you have the file gzip&#39;ed, gunzip it first, or change the command above to:

zcat DATABASE.sql.gz | mysql --user=USERNAME --password=PASSWORD DATABASE</code></pre>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="SmartMachine+TimeZone.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=SmartMachine+TimeZone.md">SmartMachine+TimeZone.md</a></h1><br/><h1>設定SmartMachine上的時區</h1>
<h1>選擇TimeZone時區</h1>
<pre><code>[root@XXXX /opt/local/etc/nginx]# tzselect]([root@XXXX /opt/local/etc/nginx# tzselect)
Please identify a location so that time zone rules can be set correctly.
Please select a continent or ocean.
1) Africa
2) Americas
3) Antarctica
4) Arctic Ocean
5) Asia
6) Atlantic Ocean
7) Australia
8) Europe
9) Indian Ocean
10) Pacific Ocean
11) none - I want to specify the time zone using the POSIX TZ format.
#? 5
Please select a country or region.
1) Afghanistan                                            26) Laos
2) Armenia                                                27) Lebanon
3) Azerbaijan                                             28) Macao
4) Bahrain                                                29) Malaysia
5) Bangladesh                                             30) Mongolia
6) Bhutan                                                 31) Myanmar (Burma)
7) Brunei                                                 32) Nepal
8) Cambodia                                               33) Oman
9) China                                                  34) Pakistan
10) Cyprus                                                 35) Palestine
11) East Timor                                             36) Philippines
12) Georgia                                                37) Qatar
13) Hong Kong                                              38) Russia
14) India                                                  39) Saudi Arabia
15) Indonesia                                              40) Singapore
16) Iran                                                   41) Sri Lanka
17) Iraq                                                   42) Syria
18) Israel                                                 43) Taiwan
19) Japan                                                  44) Tajikistan
20) Jordan                                                 45) Thailand
21) Kazakhstan                                             46) Turkmenistan
22) Korea (North)                                          47) United Arab Emirates
23) Korea (South)                                          48) Uzbekistan
24) Kuwait                                                 49) Vietnam
25) Kyrgyzstan                                             50) Yemen
#? 43

The following information has been given:

Taiwan

Therefore TZ=&#39;Asia/Taipei&#39; will be used.
Local time is now:       Tue Nov  1 18:33:44 CST 2011
Universal Time is now:   Tue Nov  1 10:33:44 UTC 2011
Is the above information OK?
1) Yes
2) No
#? 1
Here is the TZ value again, this time on standard output:
Asia/Taipei</code></pre>
<h1>修改Time Zone設定擋</h1>
<pre><code>[root@XXXX /opt/local/etc/nginx]# vi /etc/default/init]([root@XXXX /opt/local/etc/nginx# vi /etc/default/init)</code></pre>
<h1>修改TZ設定內容為Asia/Taipei</h1>
<pre><code>TZ=Asia/Taipei</code></pre>
<h1>重新開機生效</h1>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="SmartOS+HTTP+SSL+Configure.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=SmartOS+HTTP+SSL+Configure.md">SmartOS+HTTP+SSL+Configure.md</a></h1><br/><h1>SmartOS HTTPS安裝Self-Gen SSL憑證</h1>
<h1>STEP1: 產生Self-Gen SSL金鑰</h1>
<p>openssl req -new -key server.key -out server.csr</p>
<pre><code>[root@SmartOS /opt/local/share]# cd /opt/local/etc/httpd/]([root@SmartOS /opt/local/share# cd /opt/local/etc/httpd/)
[root@SmartOS /opt/local/etc/httpd]# openssl genrsa -des3 -out server.key 1024]([root@SmartOS /opt/local/etc/httpd# openssl genrsa -des3 -out server.key 1024)
Generating RSA private key, 1024 bit long modulus
......++++++
......................++++++
e is 65537 (0x10001)
Enter pass phrase for server.key:
Verifying - Enter pass phrase for server.key:
[root@SmartOS /opt/local/etc/httpd]# openssl req -new -key server.key -out server.csr]([root@SmartOS /opt/local/etc/httpd# openssl req -new -key server.key -out server.csr)
Enter pass phrase for server.key:
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter &#39;.&#39;, the field will be left blank.
-----
Country Name (2 letter code) [AU]:TW](Country Name  - 2 letter code [AU:TW)
State or Province Name (full name) [Some-State]:Taipei](State or Province Name  - full name [Some-State:Taipei)
Locality Name (eg, city) []:Taiwan](Locality Name  - eg, city [:Taiwan)
Organization Name (eg, company) [Internet Widgits Pty Ltd]:MiCloud](Organization Name  - eg, company [Internet Widgits Pty Ltd:MiCloud)
Organizational Unit Name (eg, section) []:](Organizational Unit Name  - eg, section [:)
Common Name (e.g. server FQDN or YOUR name) []:MiCloud](Common Name  - e.g. server FQDN or YOUR name [:MiCloud)
Email Address []:service@micloud.tw](Email Address [:service@micloud.tw)

Please enter the following &#39;extra&#39; attributes
to be sent with your certificate request
A challenge password []:](A challenge password [:)
An optional company name []:](An optional company name [:)</code></pre>
<p>openssl rsa -in server.key.org -out server.key</p>
<pre><code>[root@SmartOS /opt/local/etc/httpd]# cp server.key server.key.org]([root@SmartOS /opt/local/etc/httpd# cp server.key server.key.org)
[root@SmartOS /opt/local/etc/httpd]# openssl rsa -in server.key.org -out server.key]([root@SmartOS /opt/local/etc/httpd# openssl rsa -in server.key.org -out server.key)
Enter pass phrase for server.key.org:
writing RSA key</code></pre>
<p>openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt</p>
<pre><code>[root@SmartOS /opt/local/etc/httpd]# openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt]([root@SmartOS /opt/local/etc/httpd# openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt)
Signature ok
subject=/C=TW/ST=Taipei/L=Taiwan/O=MiCloud/CN=MiCloud/emailAddress=service@micloud.tw
Getting Private key</code></pre>
<h1>STEP2: 編輯Virtual Host資訊</h1>
<pre><code># vi /opt/local/etc/httpd/virtualhosts/test.conf
&lt;VirtualHost _default_:443&gt;
SSLEngine On
SSLCertificateFile /opt/local/etc/httpd/server.crt
SSLCertificateKeyFile /opt/local/etc/httpd/server.key
ServerName 192-168-255-10.my.micloud.tw
DocumentRoot /opt/local/share/httpd/htdocs
&lt;/VirtualHost&gt;</code></pre>
<h1>STEP3: 測試連線</h1>
<pre><code>瀏覽器連線：https://your.ip.or.domaonname/</code></pre>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="SmartOS+Install+Oracle.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=SmartOS+Install+Oracle.md">SmartOS+Install+Oracle.md</a></h1><br/><h1>SmartOS install Oracle</h1>
<h1>準備</h1>
<p>開始安裝Oracle Universal前，的準備工作：<br><em>  建立資料庫專用帳戶、群組與目錄
</em>  修改主機Shared Memory設定<br>*  安裝X11相關套件</p>
<p>設定步驟可參考下面指令：</p>
<pre><code>admin$ su
...
# groupadd -g 1000 dba
# groupadd -g 1001 oinstall
# groupadd -g 1002 oper
# mkdir -p /u01/app/oracle
# useradd -u 1000 -g oinstall -G dba,oper -s /bin/bash -d /u01/app/oracle oracle
# chown -R oracle:dba /u01
# mkdir -p /u02/oradata
# chown -R oracle:dba /u02
# passwd oracle
...
# projadd -U oracle -K &quot;project.max-shm-memory=(priv,2GB,deny)&quot; user.oracle
# exit
admin$ su oracle
...</code></pre>
<h1>遠端安裝Oracle</h1>
<p>在開始遠端安裝Oracle之前，您需要先安裝X11相關套件，於Mac OS, Linux上以支援X11服務，您可以開啓式窗界面，然後直接使用下面指令將X Window Forward回到您的桌面：</p>
<pre><code>$xhost +
access control disabled, clients can connect from any host
$ssh -X oracle@your.machine.ip</code></pre>
<p>完成X11套件設定與安裝後，您可以直接下載Oracle之套件進行解壓縮安裝，安裝步驟如下：</p>
<pre><code>$ ./runInstaller -ignoreSysPrereqs
Starting Oracle Universal Installer...

Checking installer requirements...

Checking operating system version: must be 5.10.    Actual 5.11
Failed &lt;&lt;&lt;&lt;


&gt;&gt;&gt; Ignoring required pre-requisite failures. Continuing...

Preparing to launch Oracle Universal Installer ...</code></pre>
<p>注意：OpenSolaris (5.11)版本非Oracle原廠建議之作業系統，因此安裝前需要加設作業系統檢查參數：-ignoreSysPrereqs</p>
<h1>其他資訊</h1>
<p>如果您需要更多有關於Oracle之安裝資訊，您可以參考Oracle installation manuals及 The Cuddletech SAs Guide to Oracle.</p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="SmartOS+Smartmachine+Datasets.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=SmartOS+Smartmachine+Datasets.md">SmartOS+Smartmachine+Datasets.md</a></h1><br/><p>MiCloud提供許多SmartOS平台只選擇，亦有包含第三方預載服務之主機可以選擇，而不同版本之主機其預載之套件有所不同，主要分為：<br><em>  32位元與64位元版本:差異在於其上所預載之套件版本為32或是64位元，之後讀取之套件庫亦會根據平台差異而不同。
</em>  SmartOS與SmartOS Plus版本：差異在於預載之套件，Plus版本之SmartOS將預載較多服務。<br><em>  </em>SmartOS Plus 3.0.4 datasets為較適用於開發者之主機版本，其中包含了較完整之AMP相關套件與插件，讓您可以快速部署您的服務與應用程式。內載軟體包含有：Apache, Nginix, PHP, Perl, Python, Ruby, Memcached, MySQL, Postgresql...等等。此作業系統含有32-bit與64-bit版本兩種選擇。<br><em>  </em>SmartOS 1.4.7 datasets較適用於需要乾淨平台的用戶，您可以針對需求客制您所需要的平台環境，此環境將較於Plus版本為精簡。</p>
<p>SmartOS Datasets:</p>
<h1>SmartOS Plus 64</h1>
<p>Description: 64 bit Apache/MySQL/PHP optimized Template with VirtualMin web control panel<br>Version: 3.0.4 (64 bit)<br>Package Repository: <a href="http://pkgsrc.joyent.com/sdc6/2011Q2/gcc45-64/All">http://pkgsrc.joyent.com/sdc6/2011Q2/gcc45-64/All</a></p>
<p>檢視支援套件：<a href="檢視支援套件：[http://pkgsrc.joyent.com/sdc6/2011Q2/gcc45-64/All"><a href="http://pkgsrc.joyent.com/sdc6/2011Q2/gcc45-64/All">http://pkgsrc.joyent.com/sdc6/2011Q2/gcc45-64/All</a>]</a></p>
<h1>SmartOS Plus</h1>
<p>Description: 32 bit Apache/MySQL/PHP optimized Template with VirtualMin web control panel<br>Version: 3.0.4<br>Package Repository: <a href="http://pkgsrc.joyent.com/sdc6/2011Q2/gcc45/All">http://pkgsrc.joyent.com/sdc6/2011Q2/gcc45/All</a></p>
<p>檢視SmartOS Plus支援套件：[<a href="http://pkgsrc.joyent.com/sdc6/2011Q2/gcc45/All]](檢視SmartOS">http://pkgsrc.joyent.com/sdc6/2011Q2/gcc45/All]](檢視SmartOS</a> Plus支援套件：[<a href="http://pkgsrc.joyent.com/sdc6/2011Q2/gcc45/All">http://pkgsrc.joyent.com/sdc6/2011Q2/gcc45/All</a>)</p>
<h1>SmartOS 64</h1>
<p>Description: 64 bit clean install of the SmartOS<br>Version: 1.4.7 (64 bit)<br>Package Repository: <a href="http://pkgsrc.joyent.com/sdc6/2011Q2/gcc45-64/All">http://pkgsrc.joyent.com/sdc6/2011Q2/gcc45-64/All</a></p>
<p>檢視SmartOS 64支援套件：[<a href="http://pkgsrc.joyent.com/sdc6/2011Q2/gcc45-64/All]](檢視SmartOS">http://pkgsrc.joyent.com/sdc6/2011Q2/gcc45-64/All]](檢視SmartOS</a> 64支援套件：[<a href="http://pkgsrc.joyent.com/sdc6/2011Q2/gcc45-64/All">http://pkgsrc.joyent.com/sdc6/2011Q2/gcc45-64/All</a>)</p>
<h1>SmartOS</h1>
<p>Description: 32bit clean install of the SmartOS<br>Version: 1.4.7<br>Package Repository: <a href="http://pkgsrc.joyent.com/sdc6/2011Q2/gcc45/All">http://pkgsrc.joyent.com/sdc6/2011Q2/gcc45/All</a></p>
<p>檢視SmartOS支援套件：<a href="檢視SmartOS支援套件：[http://pkgsrc.joyent.com/sdc6/2011Q2/gcc45/All"><a href="http://pkgsrc.joyent.com/sdc6/2011Q2/gcc45/All">http://pkgsrc.joyent.com/sdc6/2011Q2/gcc45/All</a>]</a></p>
<h1>SmartOS Node.JS</h1>
<p>Description: 32bit SmartOS optimized for Node.JS installed. Production version of no.de. Login as user &quot;node&quot;.<br>Version: 1.1.4<br>Package Repository: <a href="http://pkgsrc.joyent.com/sdc6/2011Q2/gcc45/All">http://pkgsrc.joyent.com/sdc6/2011Q2/gcc45/All</a></p>
<p>檢視SmartOS Node.JS支援套件：[<a href="http://pkgsrc.joyent.com/sdc6/2011Q2/gcc45/All]](檢視SmartOS">http://pkgsrc.joyent.com/sdc6/2011Q2/gcc45/All]](檢視SmartOS</a> Node.JS支援套件：[<a href="http://pkgsrc.joyent.com/sdc6/2011Q2/gcc45/All">http://pkgsrc.joyent.com/sdc6/2011Q2/gcc45/All</a>)</p>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="SMF+Manifest+Recipes.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=SMF+Manifest+Recipes.md">SMF+Manifest+Recipes.md</a></h1><br/><p>Recipes for running servers with SMF.</p>
<p>In this page:</p>
<h1>mongrel_cluster</h1>
<p>This SMF profile is for running Rails apps with mongrel_cluster. It allows you to create an instance for each different Rails app you are running.</p>
<p>Make a copy of the instance tags for each mongrel_cluster app and fill in the details (replace INSTANCE_NAME, /PATH/TO/RAILS/APP, USERNAME, and GROUP).</p>
<p>Start the mongrel cluster instance with</p>
<pre><code>$ sudo svcadm enable mongrel/cluster:INSTANCE_NAME</code></pre>
<pre><code>Recipe
&lt;?xml version=&#39;1.0&#39;?&gt;
&lt;!DOCTYPE service_bundle SYSTEM &#39;/usr/share/lib/xml/dtd/service_bundle.dtd.1&#39;&gt;
&lt;service_bundle type=&#39;manifest&#39; name=&#39;mongrel/cluster&#39;&gt;
&lt;service name=&#39;network/mongrel/cluster&#39; type=&#39;service&#39; version=&#39;0&#39;&gt;
&lt;dependency
name=&#39;fs&#39;
grouping=&#39;require_all&#39;
restart_on=&#39;none&#39;
type=&#39;service&#39;&gt;
&lt;service_fmri value=&#39;svc:/system/filesystem/local&#39;/&gt;
&lt;/dependency&gt;
&lt;dependency
name=&#39;net&#39;
grouping=&#39;require_all&#39;
restart_on=&#39;none&#39;
type=&#39;service&#39;&gt;
&lt;service_fmri value=&#39;svc:/network/loopback&#39;/&gt;
&lt;!-- uncomment the following line if you are on an L+ Accelerator since /home is mounted through nfs --&gt;
&lt;!-- &lt;service_fmri value=&#39;svc:/network/nfs/client&#39;/&gt; --&gt;
&lt;/dependency&gt;
&lt;dependent
name=&#39;mongrel_multi-user&#39;
restart_on=&#39;none&#39;
grouping=&#39;optional_all&#39;&gt;
&lt;service_fmri value=&#39;svc:/milestone/multi-user&#39;/&gt;
&lt;/dependent&gt;
&lt;exec_method
name=&#39;start&#39;
type=&#39;method&#39;
exec=&#39;/opt/csw/bin/mongrel_rails cluster::start&#39;
timeout_seconds=&#39;60&#39;&gt;
&lt;/exec_method&gt;
&lt;exec_method
name=&#39;stop&#39;
type=&#39;method&#39;
exec=&#39;:kill&#39;
timeout_seconds=&#39;60&#39;&gt;
&lt;/exec_method&gt;
&lt;!--
Define instances
--&gt;
&lt;instance name=&#39;INSTANCE_NAME&#39; enabled=&#39;false&#39;&gt;
&lt;method_context working_directory=&#39;/PATH/TO/RAILS/APP&#39;&gt;
&lt;method_credential user=&#39;USERNAME&#39; group=&#39;GROUP&#39; /&gt;
&lt;method_environment&gt;
&lt;envvar name=&quot;PATH&quot; value=&quot;/usr/bin:/bin:/opt/csw/bin&quot; /&gt;
&lt;/method_environment&gt;
&lt;/method_context&gt;
&lt;/instance&gt;
&lt;instance name=&#39;SECOND_INSTANCE_NAME&#39; enabled=&#39;false&#39;&gt;
&lt;method_context working_directory=&#39;/PATH/TO/OTHER/RAILS/APP&#39;&gt;
&lt;method_credential user=&#39;USERNAME2&#39; group=&#39;GROUP2&#39; /&gt;
&lt;method_environment&gt;
&lt;envvar name=&quot;PATH&quot; value=&quot;/usr/bin:/bin:/opt/csw/bin&quot; /&gt;
&lt;/method_environment&gt;
&lt;/method_context&gt;
&lt;/instance&gt;
&lt;/service&gt;
&lt;/service_bundle&gt;</code></pre>
<h1>CouchDB</h1>
<p>This recipe assumes that you have installed CouchDB and are running it with the couchdb user/group.</p>
<p>This manifest is for CouchDB 0.7.3/0.8.0 and assumes that you have ICU installed in /opt/local and SpiderMonkey installed in /opt/local/spidermonkey. Change the LD_LIBRARY_PATH envar name to suit your configuration.</p>
<pre><code>Recipe
&lt;?xml version=&#39;1.0&#39;?&gt;

&lt;!DOCTYPE service_bundle SYSTEM &#39;/usr/share/lib/xml/dtd/service_bundle.dtd.1&#39;&gt;

&lt;service_bundle type=&#39;manifest&#39; name=&#39;export&#39;&gt;
&lt;service name=&#39;application/database/couch&#39; type=&#39;service&#39; version=&#39;0&#39;&gt;
&lt;create_default_instance enabled=&#39;false&#39;/&gt;
&lt;single_instance/&gt;
&lt;dependency name=&#39;network&#39; grouping=&#39;require_all&#39; restart_on=&#39;none&#39; type=&#39;service&#39;&gt;
&lt;service_fmri value=&#39;svc:/milestone/network:default&#39;/&gt;
&lt;/dependency&gt;
&lt;dependency name=&#39;filesystem-local&#39; grouping=&#39;require_all&#39; restart_on=&#39;none&#39; type=&#39;service&#39;&gt;
&lt;service_fmri value=&#39;svc:/system/filesystem/local:default&#39;/&gt;
&lt;/dependency&gt;
&lt;exec_method name=&#39;start&#39; type=&#39;method&#39; exec=&#39;/opt/local/bin/couchdb -b -o /opt/local/var/run/couchdb/couchdb.stdout -e /opt/local/var/run/couchdb/couchdb.stderr -p /opt/local/var/run/couchdb/couchdb.pid&#39; timeout_seconds=&#39;300&#39;&gt;
&lt;method_context&gt;
&lt;method_credential user=&#39;couchdb&#39; group=&#39;couchdb&#39;/&gt;
&lt;method_environment&gt;
&lt;envvar name=&quot;HOME&quot; value=&quot;/opt/local/var/lib/couchdb&quot; /&gt;
&lt;envvar name=&quot;LD_LIBRARY_PATH&quot; value=&quot;/opt/local/lib:/opt/local/spidermonkey/lib&quot; /&gt;
&lt;/method_environment&gt;
&lt;/method_context&gt;
&lt;/exec_method&gt;
&lt;exec_method name=&#39;stop&#39; type=&#39;method&#39; exec=&#39;/opt/local/bin/couchdb -d -p /opt/local/var/run/couchdb/couchdb.pid&#39; timeout_seconds=&#39;300&#39;&gt;
&lt;method_context&gt;
&lt;method_credential user=&#39;couchdb&#39; group=&#39;couchdb&#39;/&gt;
&lt;method_environment&gt;
&lt;envvar name=&quot;HOME&quot; value=&quot;/opt/local/var/lib/couchdb&quot; /&gt;
&lt;envvar name=&quot;LD_LIBRARY_PATH&quot; value=&quot;/opt/local/lib:/opt/local/spidermonkey/lib&quot; /&gt;
&lt;/method_environment&gt;
&lt;/method_context&gt;
&lt;/exec_method&gt;
&lt;stability value=&#39;Evolving&#39;/&gt;
&lt;template&gt;
&lt;common_name&gt;
&lt;loctext xml:lang=&#39;C&#39;&gt;Apache CouchDB&lt;/loctext&gt;
&lt;/common_name&gt;
&lt;documentation&gt;
&lt;manpage title=&#39;couchdb&#39; section=&#39;1M&#39;/&gt;
&lt;doc_link name=&#39;incubator.apache.org&#39; uri=&#39;http://incubator.apache.org/couchdb/&#39;/&gt;
&lt;/documentation&gt;
&lt;/template&gt;
&lt;/service&gt;
&lt;/service_bundle&gt;</code></pre>
<h1>Nginx</h1>
<pre><code>Recipe
&lt;?xml version=&#39;1.0&#39;?&gt;
&lt;!DOCTYPE service_bundle SYSTEM &#39;/usr/share/lib/xml/dtd/service_bundle.dtd.1&#39;&gt;
&lt;service_bundle type=&#39;manifest&#39; name=&#39;export&#39;&gt;
&lt;service name=&#39;network/nginx&#39; type=&#39;service&#39; version=&#39;0&#39;&gt;
&lt;create_default_instance enabled=&#39;true&#39;/&gt;
&lt;single_instance/&gt;
&lt;dependency name=&#39;fs&#39; grouping=&#39;require_all&#39; restart_on=&#39;none&#39; type=&#39;service&#39;&gt;
&lt;service_fmri value=&#39;svc:/system/filesystem/local&#39;/&gt;
&lt;/dependency&gt;
&lt;dependency name=&#39;net&#39; grouping=&#39;require_all&#39; restart_on=&#39;none&#39; type=&#39;service&#39;&gt;
&lt;service_fmri value=&#39;svc:/network/loopback&#39;/&gt;
&lt;/dependency&gt;
&lt;dependent name=&#39;nginx&#39; restart_on=&#39;none&#39; grouping=&#39;optional_all&#39;&gt;
&lt;service_fmri value=&#39;svc:/milestone/multi-user&#39;/&gt;
&lt;/dependent&gt;
&lt;exec_method name=&#39;start&#39; type=&#39;method&#39; exec=&#39;/opt/local/nginx/sbin/nginx -c /opt/local/nginx/conf/nginx.conf&#39; timeout_seconds=&#39;60&#39;&gt;
&lt;method_context working_directory=&#39;/var/log&#39;&gt;
&lt;method_credential user=&#39;root&#39; group=&#39;root&#39;/&gt;
&lt;method_environment&gt;
&lt;envvar name=&#39;PATH&#39; value=&#39;/usr/bin:/bin:/opt/csw/bin:/opt/local/bin&#39;/&gt;
&lt;/method_environment&gt;
&lt;/method_context&gt;
&lt;/exec_method&gt;
&lt;exec_method name=&#39;stop&#39; type=&#39;method&#39; exec=&#39;:kill&#39; timeout_seconds=&#39;60&#39;&gt;
&lt;method_context/&gt;
&lt;/exec_method&gt;
&lt;/service&gt;
&lt;/service_bundle&gt;</code></pre>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Snapshot+recovery.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Snapshot+recovery.md">Snapshot+recovery.md</a></h1><br/><h1>使用Snapshot備份及還原</h1>
<p>系統快照功能，可幫助您還原被刪除或被破壞的系統。</p>
<p>當您需要操作到可能影響系統運作的動作時，可先建立系統快照，以防系統損壞無法回復。</p>
<p><br /><br>以下為系統快照之測試：</p>
<p>1.請先登入您的主機，並建立一個測試檔”text.txt”</p>
<p><img src='images/Snapshot+recovery-snapshot2.jpg' width='650' align='center'/></p>
<p>2.建立後，登入MiCloud平台中線上管理工具，選擇該台主機，並按下右邊的&quot;建立系統快照&quot;</p>
<p><img src='images/Snapshot+recovery-snapshot.jpg' width='650' align='center'/></p>
<p>建立完成，如下圖</p>
<p><img src='images/Snapshot+recovery-snapshot1.jpg' width='650' align='center'/></p>
<p>3.回到主機將text.txt檔刪除</p>
<p><img src='images/Snapshot+recovery-snapshot3.jpg' width='650' align='center'/></p>
<p>再到平台上選擇您欲回覆時間點的系統快照，點&quot;回復選取的快照&quot;。</p>
<p><img src='images/Snapshot+recovery-snapshot7.jpg' width='650' align='center'/></p>
<p>回復選取的快照主機會經過三個動作(關閉主機--&gt;回復主機--&gt;重新啟動)，待重啟完後主機即回覆到之前的時間點狀態。</p>
<p><img src='images/Snapshot+recovery-snapshot8.jpg' width='650' align='center'/></p>
<p>開始回復，如下圖</p>
<p><img src='images/Snapshot+recovery-snapshot4.jpg' width='650' align='center'/></p>
<p>4.系統回復過程中，主機會重新啟動，所以之前的連線動作會不存在，如下圖<br><img src='images/Snapshot+recovery-snapshot9.jpg' width='650' align='center'/></p>
<p>請重新連線後確認檔案是否回復</p>
<p><img src='images/Snapshot+recovery-snapshot5.jpg' width='650' align='center'/></p>
<p>Text.txt即被回復了。</p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="SSH+KeyGen+Connect+Tutorial-Linux+or+Unix.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=SSH+KeyGen+Connect+Tutorial-Linux+or+Unix.md">SSH+KeyGen+Connect+Tutorial-Linux+or+Unix.md</a></h1><br/><h1>SSH Key 限制</h1>
<p>MiCloud SSH Key模組使用上有下面限制，使用前需要特別注意：</p>
<ol>
<li>SSH Key僅適用於SmartOS及Linux主機，Windows主機不適用。</li>
</ol>
<ol>
<li>Linux server之SSH Key必須於server建立前匯入，如於Server建立後匯入之SSH Key將無法使用於Linux主機上(但SmartOS可以使用)。</li>
</ol>
<ol>
<li><font color="red">申請Linux主機者，建議務必修改root密碼，並妥善保存，避免SSH Key遺漏時候造成無法連線問題。</font>



</li>
</ol>
<p>影片:<a href="http://www.youtube.com/watch?v=MUxTHgrMj-E">MiCloud SSH金鑰產生教學(Linux/Unix)</a></p>
<p><div align="center"></p>
<p><embed width="420" height="345" src="http://www.youtube.com/v/MUxTHgrMj_E&hd=1" type="application/x-shockwave-flash"></embed><br></div></p>
<h1>MiCloud SSH Key 管理功能</h1>
<p>MiCloud提供SSH Key的管理模組，您可透過MiCloud Customer Portal([<a href="http://micloud.tw])進行SSH">http://micloud.tw])進行SSH</a> Key的上傳與管理，透過SSH協定與SSH Key的認證，將可確保您與您伺服器之間的連線安全。](MiCloud提供SSH Key的管理模組，您可透過MiCloud Customer Portal - [<a href="http://micloud.tw進行SSH">http://micloud.tw進行SSH</a> Key的上傳與管理，透過SSH協定與SSH Key的認證，將可確保您與您伺服器之間的連線安全。)</p>
<p>SSH Key上傳與管理，請參考&quot;[使用Windows連線SmartMachine](SSH KeyGen &amp; Connect Tutorial - Windows)</p>
<h1>Linux/Unix Like 系統建立SSH-KEY與使用方法</h1>
<p>產生SSH Key:</p>
<p><code>ssh-keygen -t rsa</code></p>
<p>產生過程如下：</p>
<pre><code>Generating public/private rsa key pair.
Enter file in which to save the key (/root/.ssh/id_rsa):    #按Enter繼續下一步
/root/.ssh/id_rsa already exists.
Overwrite (yes/no)? yes                            #如果已經存在會詢問是否覆蓋
Enter passphrase (empty for no passphrase):            #按Enter繼續下一步
Enter same passphrase again:                    #按Enter繼續下一步
Your identification has been saved in /root/.ssh/id_rsa.    #private key (預設產出路徑為$HOME/.ssh)
Your public key has been saved in /root/.ssh/id_rsa.pub.    #public key
The key fingerprint is:
ad:a2:53:fc:2c:eb:f1:3a:3d:6b:44:92:29:33:f0:a5 root@XXXXX.local</code></pre>
<p>確定並複製產出的SSH Key:</p>
<pre><code>cd $HOME/.ssh/        #切換到SSH Key的預設資料匣
cat id_rsa.pub        #讀取產出的金鑰檔案</code></pre>
<p>公開金鑰產出格式一不同機器略有不同，但大至上類似下面一串文字：</p>
<pre><code>ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAsU6C3X3dwtRcpHDGb1nrYOmdWwsLAu1DVtR+UebO53Cr
QWl7j/FKcLQFPRliiIIsR0rmt5+8s3JyIwkpd+2Ci5Szvhs/URpVhtoei4Xn0TMQg/I/8ZnKHxAsZ2tg
r91eLfYSbMGqqkqS371G68HFDqTgjSAOoPUTWms8afMZ67B/Fr3Yrt8egEaSdpTw== root@XXXX</code></pre>
<p>複製這段文字貼於網頁中的SSH-Key欄位中即可</p>
<p>下圖為Linux參考畫面:</p>
<p><img src='images/SSH+KeyGen+&+Connect+Tutorial-Linux+or+Unix-linux-key.png' width='500' align='center'/></p>
<h1>Linux/Unix Like 系統連線方式</h1>
<p>使用 openssh client，請帶參數-i來使用剛剛所建的id_rsa這個private ssh key。</p>
<p>例如：</p>
<p><code>ssh -i id_rsa root@211.123.123.31</code></p>
<h1>Linux 主機更新SSH Key</h1>
<p>MiCloud Linux主機於開通主機時會將您帳戶資料中之SSH Key匯入新開通的Linux主機中，匯入的目錄位於：$HOME/.ssh/authorized_keys檔案中，此為一次性設定，日後再登錄至MiCloud Customer Portal之SSH Key將不會再寫入Linux主機中(SmartOS之認證為結合SSH Key Database之認證，因此不在此限制下)。若您需要更新SSH Key，可採下面步驟：</p>
<ul>
<li><p>產生SSH Key:<br>請參考：“MiCloud自助服務操作資訊 &gt; SSH金鑰相關使用教學”中金鑰產生部分。</p>
</li>
<li><p>將Public Key寫入Server端$HOME/.ssh/authorized_keys檔案中，以斷行隔開</p>
</li>
</ul>
<p><code>vi $HOME/.ssh/authorized_keys</code></p>
<p>增加您產生的public key至該檔案中</p>
<h1>Joyent Wiki使用SSH連線教學與資訊</h1>
<ul>
<li>SSH金鑰產生與設定：[<a href="http://wiki.joyent.com/display/gen/SSH+Guide]](*">http://wiki.joyent.com/display/gen/SSH+Guide]](*</a>  SSH金鑰產生與設定：[<a href="http://wiki.joyent.com/display/gen/SSH+Guide">http://wiki.joyent.com/display/gen/SSH+Guide</a>)</li>
<li>SSH連線緩慢之設定調整：[<a href="http://wiki.joyent.com/display/gen/SSH+Guide#SSHGuide-SSHslowfromUbuntuLinuxorCygwin]](*">http://wiki.joyent.com/display/gen/SSH+Guide#SSHGuide-SSHslowfromUbuntuLinuxorCygwin]](*</a>  SSH連線緩慢之設定調整：[<a href="http://wiki.joyent.com/display/gen/SSH+Guide#SSHGuide-SSHslowfromUbuntuLinuxorCygwin">http://wiki.joyent.com/display/gen/SSH+Guide#SSHGuide-SSHslowfromUbuntuLinuxorCygwin</a>)</li>
</ul>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="SSH+KeyGen+Connect+Tutorial-MacOS.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=SSH+KeyGen+Connect+Tutorial-MacOS.md">SSH+KeyGen+Connect+Tutorial-MacOS.md</a></h1><br/><h1>SSH Key 限制</h1>
<p>MiCloud SSH Key模組使用上有下面限制，使用前需要特別注意：</p>
<ol>
<li>SSH Key僅適用於SmartOS及Linux主機，Windows主機不適用。</li>
</ol>
<ol>
<li>Linux server之SSH Key必須於server建立前匯入，如於Server建立後匯入之SSH Key將無法使用於Linux主機上(但SmartOS可以使用)。</li>
</ol>
<ol>
<li><font color="red">申請Linux主機者，建議務必修改root密碼，並妥善保存，避免SSH Key遺漏時候造成無法連線問題。</font>



</li>
</ol>
<h1>MiCloud SSH Key 管理功能</h1>
<p>MiCloud提供SSH Key的管理模組，您可透過MiCloud Customer Portal([<a href="http://micloud.tw])進行SSH">http://micloud.tw])進行SSH</a> Key的上傳與管理，透過SSH協定與SSH Key的認證，將可確保您與您伺服器之間的連線安全。](MiCloud提供SSH Key的管理模組，您可透過MiCloud Customer Portal - [<a href="http://micloud.tw進行SSH">http://micloud.tw進行SSH</a> Key的上傳與管理，透過SSH協定與SSH Key的認證，將可確保您與您伺服器之間的連線安全。)</p>
<p>SSH Key上傳與管理，請參考&quot;[使用Windows連線SmartMachine](SSH KeyGen &amp; Connect Tutorial - Windows)</p>
<h1>Mac OS 建立 SSH-KEY 與使用方法</h1>
<p>產生SSH Key:</p>
<p><code>ssh-keygen -t rsa</code></p>
<p>產生過程如下：<br><img src='images/SSH+KeyGen+&+Connect+Tutorial-MacOS-pic1.png' width='500' align='center'/><br>上圖底下的兩個紅色框框的內容為您的私鑰與公鑰所擺放的位置。</p>
<pre><code>cd /user/[您的帳號資料夾]/.ssh    #切換到SSH Key的預設資料匣](cd /user/[您的帳號資料夾/.ssh    #切換到SSH Key的預設資料匣)
ls                              #查看該資料夾底下是否正確產生id_rsa(private key)及id_rsa.pub(public key)兩個檔案
cat id_rsa.pub                #讀取產出的金鑰檔案</code></pre>
<p><img src='images/SSH+KeyGen+&+Connect+Tutorial-MacOS-pic2.png' width='500' align='center'/><br>公開金鑰產出格式一不同機器略有不同。</p>
<p>複製上圖下方紅色框框內的文字貼於網頁中的SSH-Key欄位中即可</p>
<h1>Mac OS 連線方式</h1>
<p>使用 openssh client，請帶參數-i來使用剛剛所建的id_rsa這個private ssh key。</p>
<p>例如：</p>
<p><code>ssh -i id_rsa root@211.123.123.31</code></p>
<p><img src='images/SSH+KeyGen+&+Connect+Tutorial-MacOS-pic3.png' width='500' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="SSH+KeyGen+Connect+Tutorial-Windows.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=SSH+KeyGen+Connect+Tutorial-Windows.md">SSH+KeyGen+Connect+Tutorial-Windows.md</a></h1><br/><h1>SSH Key限制</h1>
<p>MiCloud SSH Key模組使用上有下面限制，使用前需要特別注意：</p>
<ol>
<li>SSH Key僅適用於SmartOS及Linux主機，Windows主機不適用。</li>
</ol>
<ol>
<li>Linux server之SSH Key必須於server建立前匯入，如於Server建立後匯入之SSH Key將無法使用於Linux主機上(但SmartOS可以使用)。</li>
</ol>
<p>影片:<a href="http://www.youtube.com/watch?v=QdHGTfH-WGg">MiCloud SSH Key 產生與管理</a></p>
<p><div align="center"></p>
<p><embed width="420" height="345" src="http://www.youtube.com/v/QdHGTfH_WGg&hd=1" type="application/x-shockwave-flash"></embed><br></div><br>影片:<a href="http://www.youtube.com/watch?v=1s1HZiPV17Q">Windows主機使用PuTTY連線MiCloud機器</a></p>
<p><div align="center"></p>
<p><embed width="420" height="345" src="http://www.youtube.com/v/1s1HZiPV17Q&hd=1" type="application/x-shockwave-flash"></embed><br></div></p>
<h1>MiCloud SSH Key管理功能</h1>
<p>MiCloud提供SSH Key的管理模組，您可透過MiCloud Customer Portal([<a href="http://micloud.tw])進行SSH">http://micloud.tw])進行SSH</a> Key的上傳與管理，透過SSH協定與SSH Key的認證，將可確保您與您伺服器之間的連線安全。](MiCloud提供SSH Key的管理模組，您可透過MiCloud Customer Portal - [<a href="http://micloud.tw進行SSH">http://micloud.tw進行SSH</a> Key的上傳與管理，透過SSH協定與SSH Key的認證，將可確保您與您伺服器之間的連線安全。)</p>
<ol>
<li><font color="red">申請 Linux/Unix 主機者，建議務必修改root密碼，並妥善保存，避免SSH Key遺漏時候造成無法連線問題。</font>



</li>
</ol>
<h1>Windows端SSH連線設定</h1>
<p>下面將介紹MiCloud上建立SSH Key與上傳SSH Key的方式：</p>
<ol>
<li>於下列網址下載 Putty and PuttyGen，該工具可以協助您進行SSH連線與產生SSH連線金鑰(SSH Key)。</li>
</ol>
<p><a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">Putty download page</a><br><img src='images/SSH+KeyGen+&+Connect+Tutorial-Windows-putty-download-page.png' width='500' align='center'/></p>
<ol>
<li>執行 PuttyGen.exe，並點選”Generate”按鈕</li>
</ol>
<p><img src='images/SSH+KeyGen+&+Connect+Tutorial-Windows-putty-generator.png' width='500' align='center'/><br><img src='images/SSH+KeyGen+&+Connect+Tutorial-Windows-putty-generator2.png' width='500' align='center'/><br>在執行的時候請<font color="red" style="font-weight:bold">一直搖晃您的滑鼠</font>直到密碼產生。<br><img src='images/SSH+KeyGen+&+Connect+Tutorial-Windows-putty-generator3.png' width='500' align='center'/><br>執行完成後，請儲存您的public key (Save public key按鈕)與private key (Save private key)按鈕。</p>
<p>3.上傳SSH Key</p>
<p>登入系統後，點選右上方帳戶並點選下方SSH Key頁籤 ，填上SSH Key名稱，並將上面PuttyGen產生的檔案內容拷貝貼在SSH金鑰欄位。<br><img src='images/SSH+KeyGen+&+Connect+Tutorial-Windows-p1+-7.png' width='650' align='center'/><br><img src='images/SSH+KeyGen+&+Connect+Tutorial-Windows-upload-key2.png' width='500' align='center'/><br>上圖圈起的key即是public key ，可將裡面的內容全部直接複製貼上於SSH 金鑰的欄位內即可。或是開啟SSH public key檔案。</p>
<p><strong>SSH public key檔案:</strong><br><img src='images/SSH+KeyGen+&+Connect+Tutorial-Windows-upload-key3.png' width='600' align='center'/><br>Public key檔案內容範例如上圖，請將第3-7行拷貝下來貼到SSH金鑰欄位，並在最前面加上“ssh-rsa ”，填寫畫面與填寫內容如下圖所示：<br><img src='images/SSH+KeyGen+&+Connect+Tutorial-Windows-upload-key4.png' width='500' align='center'/><br>上述動作已完成SSH Key之上傳動作，請妥善保管public / private keys。</p>
<h1>Windows使用SSH登入系統</h1>
<p>左鍵雙擊下載之putty.exe，下圖為putty執行畫面：</p>
<p>請於<strong>Host Name (or IP address)</strong>內輸入您機器的IP,<br><strong>Port</strong> 則是輸入 <strong>22</strong> (22為MiCloud的預設SSH連接阜)</p>
<p>下方的 <strong>Saved Sessions</strong> 則是給您下次使用時能夠辨別這是哪一台機器用,所以能可以以您希望的名字命名,也可以使用當台機器的IP作為命名.</p>
<p>輸入完成後請於左邊的Category表單中點選 <strong>Connection</strong> -&gt; <strong>SSH</strong> -&gt; <strong>Auth</strong> 內(如下圖)<br><img src='images/SSH+KeyGen+&+Connect+Tutorial-Windows-b1.png' width='500' align='center'/></p>
<p>點選 <strong>Browse...</strong> 後選擇您的private key加入</p>
<p>為確保您使用Putty時不會出現中文亂碼,您可於左邊的Category表單中點選 <strong>Window</strong> -&gt; <strong>Translation</strong></p>
<p><img src='images/SSH+KeyGen+&+Connect+Tutorial-Windows-b2.png' width='500' align='center'/></p>
<p>於右方 <strong>Remote Character set:</strong> 的下拉式選單中選擇 <strong>UTF-8</strong></p>
<p>為了下次能夠方便使用,請於左邊的Category表單中點選<strong>Session</strong></p>
<p><img src='images/SSH+KeyGen+&+Connect+Tutorial-Windows-b4.png' width='500' align='center'/></p>
<p>回到Session後,點選右方的Save</p>
<p>這樣下次要連線這台機器時你就不用特別再去設定,只需要於左方Saved Sessions中左鍵雙擊你存下來的那個名子即可.</p>
<p><img src='images/SSH+KeyGen+&+Connect+Tutorial-Windows-b3.png' width='500' align='center'/></p>
<p>進入Putty後,他會要求你輸入帳號(Login as:),請輸入root</p>
<p><font color="red">(註：連線時，請使用root登入，可不用輸入密碼：若使用預設帳號jill登入，則請參照Customer Portal上Credential設定。)</font><br><img src='images/SSH+KeyGen+&+Connect+Tutorial-Windows-b6.png' width='500' align='center'/><br><img src='images/SSH+KeyGen+&+Connect+Tutorial-Windows-b5.png' width='500' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Stingray+SmartMachine.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Stingray+SmartMachine.md">Stingray+SmartMachine.md</a></h1><br/><h1>Stingray基本操作說明</h1>
<h1>簡介</h1>
<p>Stingray原名Zeus，為Riverbed公司所購買之Zeus公司產品，專職負載平衡與網路流量管理相關功能。</p>
<p>研究Stingray的緣起是越來越多的專案使用到網路層的Load Balancer，因大型的軟體架構中，時常需要有負載平衡及Cluster的架構，而仰賴Apache或是簡單的Load Balancer軟體常常不能滿足需求，而硬體方式的Load Balancer像是BigIP或是Cisco相對應的負載平衡設備都往往超出預算而又超出一般軟體工程師可以觸及的範圍，在這些條件之下，Stingray反而圖顯了一些他存在的重要性。</p>
<p><img src='images/Stingray+SmartMachine-p1.PNG' width='650' align='center'/><br>Stingray的許多特性，造就他在雲端服務存在的必要性，排除原廠所簡介的特性，這邊以使用者觀點就價值核心的部份列出給大家參考：<br><em>  本身為軟體：這部份對軟體工程師而言是好消息，不需觸及硬體部份即可將一些網路之構想以Stingray所提供之介面實現，當然設定者本身也必需具備部份網路架構之基礎，方可收事半功倍之成效。另外，不少網路設備提供可程式化介面，但往往由於網路設備下所關係到的節點數量龐大，導致安全性上考量而無法釋放給軟體工程師太多空間進行管理與設定，而本身為軟體的優勢，讓您可以在任何節點部署架構，而佈至於影響到太多的網路節點。
</em>  提供各種程式語言實作之API介面：提供各種語言之API介面，也是方便系統架構與軟體工程師之特性，這部份讓系統環境中許多不定因素或是需要大量判斷之路由規則不在是夢想。<br><em>  提供友善的Web管理界面：Web的管理介面通常是一套系統必備的工具，而Stingray提供的Web介面也出奇的簡單，並可在介面中對軟體或系統進行重新?動的操控，這部份也讓管理者可以減少在外部網路環境還需要SSH連線到作業系統的需求。
</em>  目前Stingray系列以model區分有三個系列：1000 Model, 2000 Model, 4000 Model，功能模組上稍有差異，其中2000系列以上提供的Global Load Balancing是最大差異，該功能提供使用者可以依地區性來進行區域網址的導向，簡單的說，就是可以做到讓美國的IP連線美國的主機、台灣的IP連線台灣的主機...<br>*  其他有些不錯的功能像頻寬管理、服務等級監控...等功能也是2000以上系列才有提供，不過這些開發測試版本都可以直接使用喔，唯差在頻寬限制而已...<br><img src='images/Stingray+SmartMachine-p2.PNG' width='450' align='center'/><br>Stingray價目表，參考至官網<br>在官方網站簡介中，Stingray之安裝規格最小為2GB，1GB的Ubuntu(LINUX)亦可以正常安裝，且可以運作，但是考慮到穩定性，建議還是依照官方建議規格進行安裝。<br><img src='images/Stingray+SmartMachine-p3.PNG' width='550' align='center'/><br>表：建議安裝規格</p>
<h1>相關字彙</h1>
<p>在操作Stingray的過程中，常會遇到許多設定上的專有名詞，在此特別介紹一些使用上必備的專有名詞，在介紹之前，請先一起看一下Stingray的環境架構圖，其中上部箭頭代表request的來源，所有網路流量經由Stingray的對外IP:PORT進入，而此IP:PORT則是綁定在一臺Stingray設定的Virtual Server上，Virtual Server則可值接或間接(經由Rule重新導向)將需求導向到已設定之Pool，這樣就完成一個簡單的request重新導向的動作。而在這部份，Pool, Virtual Server, Rule...是Stingray的專有名詞，另外，如果您的服務是佈局全球，則您會需要GLB(Global Load Balancer)的服務，他可以幫助您視連線IP之地理位置而將IP導向最近的服務器位置。</p>
<h1>連線MiCloud Stingray Service</h1>
<p><img src='images/Stingray+SmartMachine-stingray-machine.png' width='650' align='center'/><br>MiCloud Stingray Appliance申請完成後，您可以在MiCloud Portal中該服務之資訊頁面看到相關連線資訊，其中點選credentials按鈕後可以找到您的登入密碼，登入時，請使用admin為登入帳號，並建議登入後，重設您的密碼。</p>
<h1>Pool</h1>
<p>Pool在Stingray中是一個以上的IP:PORT的代表，也是Stingray連線的出口位置，當有request指入時，Stingray會依照設定將request導至被指定的Pool上binding的主機IP:PORT位置。</p>
<h1>Virtual Server</h1>
<p>Virtual Server是Stingray環境中的一個入口代表，他會是Stingray本身之IP與一個PORT的結合。Stingray主機使用此一設定作為對外服務的一個端口，讓request由此進入，然後在導向配置的動作。</p>
<h1>Rule</h1>
<p>Rule為Virtual Server存取後方主機的規則，透過規則的管理，可以建置您伺服器群組上的規劃與應用。</p>
<h1>GLB</h1>
<p>Global Load Balancer，全球化的負載平衡，參考網路上相關論作(服務負載平衡)，GLB為提供全球的使用者，依照IP所對應之地理位置再進行重新導向到就近地區之服務提供伺服器之用。</p>
<h1>Multi-Site Manager</h1>
<p>提供串聯跨DataCenter之服務功能，讓不同的DataCenter中的主機可以達到負載平衡之目的。</p>
<h1>基本操作介面</h1>
<p>Stingray介面中以簡單的幾個區塊負責不同的功能模組之顯示，表頭部份包含有伺服器狀態列、工具列等資訊。其中狀態列顯示目前伺服器運作狀態，以便隨時在操作時候可以知道目前環境狀態：而Menu區塊則將Stingray之功能分模組顯示，另外的其他地方，則是用來顯示目前工作狀態與設定畫面的工作區域，其中，首頁的工作區域包含Traffic Manager狀態、服務中的Service與狀態、事件檢視等。</p>
<p><img src='images/Stingray+SmartMachine-p4.PNG' width='650' align='center'/></p>
<h1>基本附載平衡功能實作</h1>
<h1>情境說明：</h1>
<p>這邊實做一個簡單的Stingray的路由範例，目的是希望讓A IP的路由可以經由Stingray Server重新導向，此應用可作為DMZ與Server Farm之單一伺服器路由重導之實現，讓應用程式伺服器(如Tomcat, Weblogic, Websphere...)資源可透過DMZ網段之伺服器重導後提供服務於外部網路。<br><img src='images/Stingray+SmartMachine-p5.PNG' width='350' align='center'/></p>
<h1>步驟一：設定Pool</h1>
<p>在此我們要設定一個名稱為&quot;PHTTP_245.11_PORT8080&quot;的Pool，Pool的Name可以是任何文字，而Node的部份則為[IP]:<a href="在此我們要設定一個名稱為&quot;PHTTP-245.11-PORT8080&quot;的Pool，Pool的Name可以是任何文字，而Node的部份則為[IP:[PORT]的一組數值，其中IP可以是Stingray伺服器對應得到的一組DNS名稱。">PORT]的一組數值，其中IP可以是Stingray伺服器對應得到的一組DNS名稱。</a><br>在此範例中，Stingray伺服器位置為：211.78.245.31，而欲導向之伺服器位置為211.78.245.11:8080，並有一資源位置<a href="http://211.78.245.11:8080/test.html">http://211.78.245.11:8080/test.html</a></p>
<p><img src='images/Stingray+SmartMachine-p6.PNG' width='650' align='center'/></p>
<h1>步驟二：設定Virtual Server</h1>
<p>在此我們設定一個名稱為&quot;VS_HTTP_PORT8088&quot;的Virtual Server，Virtual Server之語意為虛擬之伺服器位置，透過Stingray對應之IP:PORT來使用此虛擬伺服器或伺服器群組，設定上必需要指定此Virtual Server要使用的協定，在此我們設定HTTP協定作為Virtual Server的協定，並選擇步驟一之&quot;PHTTP_245.11_PORT8080&quot;作為此Virtual Server欲導向之伺服器位置，設定完成後按下&quot;Create Virtual Server&quot;按鈕，則可建立Virtual Server。</p>
<p><img src='images/Stingray+SmartMachine-p7.PNG' width='450' align='center'/></p>
<h1>步驟三：啟動Virtual Server</h1>
<p>建立好之Virtual Server預設並未啟動，必需再點選該Virtual Server後，將Enabled調整至&quot;Yes&quot;後，點選&quot;Update&quot;按鈕後，才會?動方才之設定。</p>
<p><img src='images/Stingray+SmartMachine-p8.PNG' width='650' align='center'/></p>
<h1>步驟四：測試</h1>
<p>開?瀏覽器，並指向Stingray Server位置：<a href="http://211.78.245.31:8088/test.html，預期此網址將會連線至http://211.78.245.11:8080/test.html">http://211.78.245.31:8088/test.html，預期此網址將會連線至http://211.78.245.11:8080/test.html</a></p>
<p><img src='images/Stingray+SmartMachine-p9.PNG' width='650' align='center'/></p>
<p>Stingray 應用影片<a href="http://www.youtube.com/embed/KM5bRJJDDaw">Go to YouTube</a></p>
<iframe width="640" height="480" src="http://www.youtube.com/embed/KM5bRJJDDaw?rel=0" align="center" frameborder="0" allowfullscreen ></iframe>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Superiority.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Superiority.md">Superiority.md</a></h1><br/><h1>MiCloud有什麼優勢？</h1>
<ul>
<li>“MiCloud”採用Joyent雲端作業系統推出MiCloud公有雲服務，提供基礎即服務（IaaS），並鎖定教育、中小企業、醫療等產業特殊應用需求。</li>
<li>IaaS服務讓企業自訂政策條件，以自動化調整CPU、記憶體、網路等硬體資源運用，強調在作業系統內建虛擬化管理功能，直接控管硬體資源，比虛擬化軟體管理的虛擬機器更直接。</li>
<li>在您的網上申請，不僅可以立即開始使用該服務，添加或刪除服務器，您可以輕鬆控制面板上的WEB以及規範的變化。收取費用的時間單位，有能力控制局面，在訪問服務器資源的不同都是現成的，經濟實惠。</li>
<li>租用的虛擬主機的運算效能與資源皆是由一台主機去分割使用的，所以當其中的一個使用者所使用的資源過大時，其他的使用者都將會受到影響。而MiCloud擁有Joyent所開發的雲端運算作業系統，不但能夠將運算效能與資源完全獨立分割出來，相對於租用的虛擬主機無法進行橫向、直向的擴充以及資源的調配，MiCloud都能輕鬆的完成。</li>
</ul>
<h1>使用MiCloud會不會有安全上的疑慮？</h1>
<ul>
<li>MiCloud植基於Joyent公有雲架構，從SmartDataCenter的ZFS架構，使用Zone安全隔離每部虛擬機器的檔案空間，並加上網路上安全規劃的實體隔離，達到虛擬主機內部安全機制，並加上MiCloud特殊防火牆規劃，特別防護網路上多種攻擊，使您可放心使用MiCloud服務。</li>
</ul>
<ul>
<li>除平台上的安全，使用者於申請帳號時候的SSH Key亦保護擁有金鑰的使用者可以連線使用，並隔離所有無金鑰的駭客。</li>
</ul>
<ul>
<li>此外，主機的安全亦在神通嚴密的機房安全管理機制下(ISO 27001)受到嚴密的保護：</li>
</ul>
<ul>
<li>*機房門禁進出管理</li>
</ul>
<ul>
<li>*24小時監視錄影系統</li>
</ul>
<ul>
<li>*24小時網路監控</li>
</ul>
<ul>
<li>*防火牆之保護</li>
</ul>
<ul>
<li>*機房電力、空調、保全、消防等全面品質管控</li>
</ul>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Support+Asked+Questions.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Support+Asked+Questions.md">Support+Asked+Questions.md</a></h1><br/><p>The title of the page serves as the heading to this section. It describes the problem that this page is solving.</p>
<p>In this page:</p>
<h1>What is the difference between an Accelerator and a SmartMachine?</h1>
<p>SmartMachine and Accelerator are both names used to describe the same thing – a zone running on Joyent SmartOS. Accelerator was the name used prior to May 2010.</p>
<h1>What is my SmartMachine name?</h1>
<p>Your SmartMachine name is the default name associated with your SmartMachine when delivered. It looks like: z12345AA, z12345AB, or fjsliyaa, fjsliyab. To find the name of your SmartMachine use this command:</p>
<pre><code>zonename</code></pre>
<h1>How can I find my SmartMachine public or private IP?</h1>
<p>The public and private IP of your SmartMachine is in the welcome e-mail. Or you can find your public or private IP by using the command:</p>
<pre><code>ifconfig -a</code></pre>
<p>The private IP will be the 10.* equivalent of your public IP.</p>
<h1>Where can I get a SmartMachine image to use on my local computer?</h1>
<p>Currently we do not have a publicly available SmarthMachine image. However, the SmartMachine is a pretty simple setup. We run Solaris Express Community Release and Pkgsrc.</p>
<p>You can get the Solaris Express Community Release image at: <a href="http://opensolaris.org/os/downloads/sol_ex_dvd_1/">http://opensolaris.org/os/downloads/sol_ex_dvd_1/</a><br>See this list for our pkgsrc repository: <a href="http://wiki.joyent.com/accelerators:kb:pkgsrc:updating">http://wiki.joyent.com/accelerators:kb:pkgsrc:updating</a></p>
<h1>How do I reset my SmartMachine to a clean image?</h1>
<p>If you signed up for your SmartMachine through the MyJoyent control panel, delete the SmartMachine from your account and order a new SmartMachine as its replacement.</p>
<p>If you signed up for a SmartMachine another way, submit a ticket that you would like to wipe your SmartMachine clean and start fresh. Be sure you have everything backed up because we will wipe everything.</p>
<h1>I can&#39;t reach Webmin. <a href="https://x.x.x.x:10000/">https://x.x.x.x:10000/</a> is not working?</h1>
<p>If Webmin is failing to load, you have one of two problems: The process is hung, or you are hitting your memory limit.</p>
<p>First, verify that you aren&#39;t hitting your memory limit. Log in to your SmartMachine, and use the prstat -Z command and look at the RSS column in the summary. If this value is near the size of your SmartMachine, shut down some services to free memory.</p>
<p>If this isn&#39;t the problem, restart the Webmin process:</p>
<pre><code>sudo svcadm disable webmin
sudo svcadm enable webmin</code></pre>
<h1>My Path is not working ... shebang issues with /usr/bin/env</h1>
<p>Truth be told, /usr/bin/env is just fine. The problem is really that env was not originally intended as an all-cure to resolving binary paths automagically, and it will fail if it can&#39;t find, for example, ruby in its path. And the default system PATH does not include paths for the pkgsrc layer installed by us (/opt/local), which is best dealt with in interactive login profiles (for example, the root .profile).</p>
<p>To find out the set path for your processes, do this:</p>
<pre><code>Chances are you will see it run with a limited PATH.</code></pre>
<p>For example, looking for munin-node&#39;s process:</p>
<pre><code>[root@abcdefg ~]# pargs -e `pgrep -f munin-node`](grep PATH)
envp[34]: PATH=/usr/sbin:/usr/bin](envp[34: PATH=/usr/sbin:/usr/bin)</code></pre>
<p>This is normally not a problem in your login shells, because those pull the full env from /root/.profile. However, this is a problem with, for example, SMF or Cron, because those run with a limited environment by default. So you want to do one of the following:</p>
<ul>
<li>Always use full paths in scripts&#39; shebangs.</li>
<li>Modify the system profile to include full PATH.</li>
<li>Change your SMF profile to set the right PATH.<br>The first option can get tedious especially with 3rd party scripts, and the second option is not recommended, so the third option is the best option. We do recommend that you always set PATH in SMF profiles.</li>
</ul>
<p>Here is an example for mongrel setting the path:</p>
<pre><code>&lt;?xml version=&#39;1.0&#39;?&gt;
&lt;!DOCTYPE service_bundle SYSTEM &#39;/usr/share/lib/xml/dtd/service_bundle.dtd.1&#39;&gt;
&lt;service_bundle type=&#39;manifest&#39; name=&#39;mongrel/YOURAPP-production&#39;&gt;
&lt;service name=&#39;network/mongrel/YOURAPP-production&#39; type=&#39;service&#39; version=&#39;0&#39;&gt;
&lt;create_default_instance enabled=&#39;true&#39;/&gt;
&lt;single_instance/&gt;
&lt;dependency name=&#39;fs&#39; grouping=&#39;require_all&#39; restart_on=&#39;none&#39; type=&#39;service&#39;&gt;
&lt;service_fmri value=&#39;svc:/system/filesystem/local&#39;/&gt;
&lt;/dependency&gt;
&lt;dependency name=&#39;net&#39; grouping=&#39;require_all&#39; restart_on=&#39;none&#39; type=&#39;service&#39;&gt;
&lt;service_fmri value=&#39;svc:/network/loopback&#39;/&gt;
&lt;/dependency&gt;
&lt;dependent name=&#39;mongrel_multi-user&#39; restart_on=&#39;none&#39; grouping=&#39;optional_all&#39;&gt;
&lt;service_fmri value=&#39;svc:/milestone/multi-user&#39;/&gt;
&lt;/dependent&gt;
&lt;exec_method name=&#39;start&#39; type=&#39;method&#39; exec=&#39;/opt/csw/bin/mongrel_rails cluster::start&#39; timeout_seconds=&#39;60&#39;&gt;
&lt;method_context working_directory=&#39;/HOME/YOUR/PATH/TO/RAILS/APP&#39;&gt;
&lt;method_credential user=&#39;USER&#39; group=&#39;GROUP&#39; /&gt;
&lt;method_environment&gt;
&lt;envvar name=&quot;PATH&quot; value=&quot;/usr/bin:/bin:/opt/csw/bin&quot; /&gt;
&lt;/method_environment&gt;
&lt;/method_context&gt;
&lt;/exec_method&gt;
&lt;exec_method name=&#39;stop&#39; type=&#39;method&#39; exec=&#39;:kill&#39; timeout_seconds=&#39;60&#39;&gt;
&lt;method_context/&gt;
&lt;/exec_method&gt;
&lt;/service&gt;
&lt;/service_bundle&gt;</code></pre>
<h1>Cron not running script</h1>
<p>What is most likely happening here is one of two things:</p>
<ul>
<li>path issue - cron runs under a different environment and it is best to use full paths to all programs in the script that is getting called.<br>For example if you are backing up MySQL with mysqldump, you need to call that program with:</li>
</ul>
<pre><code>/opt/local/bin/mysqldump</code></pre>
<ul>
<li>permissions issue - make sure that the script is executable and the cron credentials you are using has the correct permissions. This includes:</li>
<li>*execute all programs in the script</li>
<li>*write to the directory (if backing up)</li>
<li>*access the database (if accessing a database)<h1>Apache is in maintenance</h1>
Log rotation is set to happen at 0030 GMT. If you see that Apache has gone into maintenance at this time, then use the following instructions to change the method of log rotation.</li>
</ul>
<h1>Fix Virtualmin settings</h1>
<ul>
<li>Log into Virtualmin</li>
<li>Follow this path (starting in the left pane):</li>
<li>*If you never upgraded Virtualmin: System Settings &gt; Module Config &gt; Log File Rotation</li>
<li>*If you upgraded Virtualmin and are runnign a fairly new version: System Settings &gt; Server Templates &gt; Default Settings &gt; Log File Rotation</li>
<li>Change the Directives field to just # postrotate and click Save.</li>
<li>In the left pane, click Webmin on top</li>
<li>Go to: System &gt; Log File Rotation &gt; Edit Global Options</li>
<li>Change the Truncate log file in place option to Yes and click Save.</li>
</ul>
<pre><code>Joyent provides Virtualmin as a third party opensource solution to help you manage your SmartMachine, but we are not responsible for the actual project. As such, we will make a best effort to solve your issue, however you may need to turn to the Virtualmin Support community for help with various Virtualmin features.</code></pre>
<h1>Fix existing domains</h1>
<p>Check /opt/local/etc/logrotate.conf and if any config blocks resemble the following:</p>
<pre><code>/path/to/log/file {
some commands here
}</code></pre>
<p>Remove the contents of the curly brackets. For example:</p>
<pre><code>/path/log/file {
}</code></pre>
<h1>Apache restarts at 0310</h1>
<p>Verify your settings are correct.</p>
<ul>
<li>Open /etc/logadm.conf</li>
<li>Look for this:</li>
</ul>
<pre><code>apache
-C 7
-a &#39;/usr/sbin/svcadm restart apache&#39;
-p 1d /var/log/httpd/*.log</code></pre>
<ul>
<li>Change it to this:</li>
</ul>
<pre><code>apache
-C 5
-c
-s 100m /var/log/httpd/*.log</code></pre>
<h1>Add more SmartMachines to an existing account</h1>
<p>You can add more SmartMachines directly in my.joyent.com. These machines are created without respect to any existing infrastructure you may have. If you have special requirements to ensure that your SmartMachine are set up to work well with your existing architecture you can contact Joyent Support at support@joyent.com with your request.</p>
<h1>inetd service is in maintenance</h1>
<p>Looking at svcs -vx you see that inetd is in maintenance. Looking at the service log file you see these kinds of messages:</p>
<pre><code>[ Jul 14 18:46:00 Executing start method (&quot;/usr/lib/inet/inetd start&quot;). ]]([ Jul 14 18:46:00 Executing start method  - &quot;/usr/lib/inet/inetd start&quot;. )
[ Jul 14 18:46:00 Method &quot;start&quot; exited with status 0. ]]([ Jul 14 18:46:00 Method &quot;start&quot; exited with status 0. )
[ Jul 14 18:46:01 Stopping because process dumped core. ]]([ Jul 14 18:46:01 Stopping because process dumped core. )
[ Jul 14 18:46:01 Executing stop method (&quot;/usr/lib/inet/inetd stop&quot;). ]]([ Jul 14 18:46:01 Executing stop method  - &quot;/usr/lib/inet/inetd stop&quot;. )
[ Jul 14 18:46:01 Method &quot;stop&quot; exited with status 0. ]]([ Jul 14 18:46:01 Method &quot;stop&quot; exited with status 0. )
[ Jul 14 18:46:01 Restarting too quickly, changing state to maintenance. ]]([ Jul 14 18:46:01 Restarting too quickly, changing state to maintenance. )
[ Jul 14 18:47:48 Leaving maintenance because disable requested. ]]([ Jul 14 18:47:48 Leaving maintenance because disable requested. )</code></pre>
<ul>
<li>Try to clear the service to see what happens:</li>
</ul>
<pre><code>svcadm clear inetd</code></pre>
<p>You then check with svcs -p inetd that it went back into maintenance.<br>*  Then look at the output of dmesg. You see a message like this:</p>
<pre><code>Jul 15 00:34:34 SOMETHING.joyent.us inetd[12202]: [ID 702911 daemon.error] Property &#39;connection_backlog&#39; of instance svc:/network/ftp/tcp:default is missing, inconsistent or invalid](Jul 15 00:34:34 SOMETHING.joyent.us inetd[12202: [ID 702911 daemon.error] Property &#39;connection-backlog&#39; of instance svc:/network/ftp/tcp:default is missing, inconsistent or invalid)</code></pre>
<ul>
<li>Then export that SMF file via</li>
</ul>
<pre><code>svccfg export ftp/tcp &gt; ftp.xml</code></pre>
<ul>
<li>Add where the rest of the propval lines are for inetd the line</li>
</ul>
<pre><code>&lt;propval name=&#39;connection_backlog&#39; type=&#39;integer&#39; value=&#39;10&#39;/&gt;</code></pre>
<ul>
<li>import the SMF file</li>
</ul>
<pre><code>svccfg import ftp.xml</code></pre>
<ul>
<li>clear the inetd service</li>
</ul>
<pre><code>svcadm clear inetd</code></pre>
<ul>
<li>check that it indeed came online:</li>
</ul>
<pre><code>svcs -p inetd</code></pre>
<ul>
<li>check that the dependent service is also online:</li>
</ul>
<pre><code>svcs -p ftp/tcp</code></pre>
<h1>Unable to ssh/sftp due to encryption issues</h1>
<p>In Ruby you will see something like this:</p>
<pre><code>Net::SSH::Exception: could not settle on encryption_client algorithm</code></pre>
<p>Or when trying to access through ssh from another application you may also see a cipher error – it means you need to add the cbc encryption types.</p>
<p>To add the cbc types of encryption do the following:</p>
<ul>
<li>First change to root by entering the following from the command line:</li>
</ul>
<pre><code>su -</code></pre>
<ul>
<li>The system will prompt you for a password. Enter the password that is indicated in your welcome email for Root User Access</li>
<li>Run the following command:</li>
</ul>
<pre><code>echo &quot;Ciphers aes128-ctr,aes192-ctr,aes256-ctr,arcfour128,arcfour256,arcfour,blowfish-cbc&quot; &gt;&gt; /etc/ssh/sshd_config</code></pre>
<ul>
<li>Restart ssh for the changes to take effect:</li>
</ul>
<pre><code>sudo svcadm restart ssh</code></pre>
<p>And that&#39;s it, you should now be able to access through ssh or SFTP.</p>
<h1>Updating RMagick-2.11.1 to RMagick-2.11.1nb1</h1>
<p>If you are experiencing issues with RMagick, you may need to update it. You can easily update it through pkgsrc by doing the following:</p>
<pre><code>pkgin update
pkgin -y install ruby18-RMagick</code></pre>
<p>You should be seeing &#39;ruby18-RMagick-2.11.1nb1&#39; instead of just &#39;ruby18-RMagick-2.11.1&#39;</p>
<h1>disk usage (du) numbers not adding up</h1>
<p>At times when you run du and compare it with the output of df the numbers will not add up.</p>
<p>This is most like caused by a file handle open to a file that has been deleted.</p>
<p>The command du won&#39;t count the file as existing, even though the filesystem still has that data allocated to a file.</p>
<p>When the process that&#39;s holding the filehandle open exits (this could be a database, or apache, or really any other daemon) the space consumption should go away and your filesystem usage should report correctly again.</p>
<p>The most typical thing that I&#39;ve seen cause this is a log rotation that happens and nukes a log without properly HUP&#39;ing the daemon.</p>
<h1>Finding large files filling up disk</h1>
<pre><code>There is a free monitoring service at NodeFly.com that you can use to monitor your disk usage and alert you before you run out of disk space.  The service is very easy to use... and free</code></pre>
<p>You can find what files and directories are filling up your disk in one of two ways:</p>
<p>Run the du command as root:</p>
<pre><code>cd /
du -sh *</code></pre>
<p>and follow the trail</p>
<p>The other way you can do this is with the command:</p>
<pre><code>find / -size +200000 -type f -ls | sort -k 7,7 -n</code></pre>
<p>You can increase or decrease the size (+200000 in the above example) depending on the length of your list.</p>
<pre><code>At times SmartOS will report discrepancies in the amount of disk space used from the output of du compared to the output of df. The du command counts file by file and thereby counts the total space on the filesystem. The df command differs from this in that it directly calls the filesystem and queries the current disk space used. Further details available at: http://sunsolarisadmin.blogspot.com/2007/03/du-and-df-show-different-values-for.html</code></pre>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Svcadm+usage.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Svcadm+usage.md">Svcadm+usage.md</a></h1><br/><h1>使用svcadm開啟或關閉服務</h1>
<p>Solaris base的技術，可以利用svcadm管理系統服務，以下列出常用管理的指令。</p>
<h1>svcadm用法：</h1>
<pre><code>[root@MiCloudDBT /home/user]# svcadm]([root@MiCloudDBT /home/user# svcadm)
Usage: svcadm [-v] [-z zone] [cmd [args ... ]]](Usage: svcadm [-v [-z zone] [cmd [args ... ]])

svcadm enable [-rst] &lt;service&gt; ...      - enable and online service(s)](svcadm enable [-rst &lt;service&gt; ...      - enable and online service - s)
svcadm disable [-st] &lt;service&gt; ...      - disable and offline service(s)](svcadm disable [-st &lt;service&gt; ...      - disable and offline service - s)
svcadm restart &lt;service&gt; ...            - restart specified service(s)
svcadm refresh &lt;service&gt; ...            - re-read service configuration
svcadm mark [-It] &lt;state&gt; &lt;service&gt; ... - set maintenance state](svcadm mark [-It &lt;state&gt; &lt;service&gt; ... - set maintenance state)
svcadm clear &lt;service&gt; ...              - clear maintenance state
svcadm milestone [-d] &lt;milestone&gt;       - advance to a service milestone](svcadm milestone [-d &lt;milestone&gt;       - advance to a service milestone)

Services can be specified using an FMRI, abbreviation, or fnmatch(5)
pattern, as shown in these examples for svc:/network/smtp:sendmail

svcadm &lt;cmd&gt; svc:/network/smtp:sendmail
svcadm &lt;cmd&gt; network/smtp:sendmail
svcadm &lt;cmd&gt; network/*mail
svcadm &lt;cmd&gt; network/smtp
svcadm &lt;cmd&gt; smtp:sendmail
svcadm &lt;cmd&gt; smtp
svcadm &lt;cmd&gt; sendmail</code></pre>
<hr>
<h1>svcadm啟動服務</h1>
<pre><code>svcadm enable [軟體名稱]](svcadm enable [軟體名稱)
ex:svcadm enable apache</code></pre>
<hr>
<h1>svcadm關閉服務</h1>
<pre><code>svcadm disable [軟體名稱]](svcadm disable [軟體名稱)
ex:svcadm disable apache</code></pre>
<hr>
<h1>svcadm重新啟動服務</h1>
<pre><code>svcadm restart [軟體名稱]](svcadm restart [軟體名稱)
ex:svcadm restart apache</code></pre>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Swap+Adjust.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Swap+Adjust.md">Swap+Adjust.md</a></h1><br/><h1>Swap調整</h1>
<p>Micloud 客戶的Linux虛擬機會有兩個虛擬磁碟，第一個是OS掛載在/之下，另一個是packages中設定的disk space，預設掛載在/data下。</p>
<p>如果客戶新建一個新的VM，可以採用下列兩種任一，如果客戶已經寫了資料在/data 且無法更動，那只能選擇Case2。</p>
<h1>swap目前有兩種做法，partition swap &amp; file swap：</h1>
<h1>Case1. Partition swap：</h1>
<p>-可以做為多重開機的swap重複使用，理論效能比較高一點點，但是無法變更大小，步驟稍為複雜。</p>
<h1>Case2. File swap：</h1>
<p>-的檔案是置於檔案系統之上，所以理論效能差一點點，可以刪除、移動與變更大小，步驟比前者簡單。</p>
<h1>Case1. Partition swap</h1>
<h1>STEP 1：檢查您的磁碟</h1>
<pre><code>fdisk -l</code></pre>
<p><img src='images/Swap+Adjust-pic1.gif' width='500' align='center'/><br>( 請檢查是否有 vda 與 vdb，其容量大小是否為您所申請的容量 )</p>
<h1>STEP 2：卸載 /dev/vdb1</h1>
<pre><code>umount /dev/vdb1</code></pre>
<h1>STEP 3：磁碟分割，用您擅用的磁碟分割工具，我們以 fdisk 為例</h1>
<pre><code>fdisk /dev/vdb</code></pre>
<p><img src='images/Swap+Adjust-pic2.gif' width='500' align='center'/></p>
<h1>STEP 4：製作檔案系統</h1>
<pre><code>mkfs.ext4 /dev/vdb1
mkswap /dev/vdb2</code></pre>
<h1>STEP 5：掛載檔案系統</h1>
<pre><code>mount /dev/vdb1
swapon /dev/vdb2</code></pre>
<h1>STEP 6：檢查是否生效</h1>
<pre><code>df -h ( 檢查 /dev/vdb1 是否已經掛載 )
free -m ( 檢查 swap 是否有數值 )</code></pre>
<h1>STEP 7：開機自動掛載</h1>
<pre><code>vi /etc/fstab
加入一行 /dev/vdb2 swap swap defaults 0 0</code></pre>
<p><img src='images/Swap+Adjust-pic3.gif' width='500' align='center'/><br>如果您變更過 /dev/vdb partition 的順序，或是您變更成非 ext4 檔案系統，那麼您還需要修改此檔案</p>
<h1>STEP 8：重新開機並驗證</h1>
<h1>Case2. File swap</h1>
<p>因預設設定之關係，某些虛擬機器在開通時候可能預設沒有掛載swap，雖現今的記憶體夠大，不一定會使用到 swap，但建議還是要掛載 swap，以增加系統穩定度。</p>
<h1>STEP 1：製作一個當作 swap 的檔案</h1>
<p>```dd if=/dev/zero of=/data/swap.img bs=1024k count=1024<br>( 1024k x 1024 = 1GB，請調整 count 達到您要的大小 )</p>
<pre><code>

STEP 2：製作 swap 檔案格式
===

```mkswap /data/swap.img</code></pre>
<h1>STEP 3：立刻啟動 swap 空間</h1>
<p><code>swapon /data/swap.img</code></p>
<h1>STEP 4：檢查是否生效</h1>
<p><code>free -m</code></p>
<h1>STEP 5：開機自動掛載 swap</h1>
<p><code>vi /etc/fstab</code></p>
<p>加入一行 /data/swap.img swap swap defaults 0 0</p>
<p>附註： /data 是目前 MiCloud Linux VMs 預設第二顆磁碟的掛載點，依客戶使用方式不同而有所差異</p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Test.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Test.md">Test.md</a></h1><br/></p><hr style="border-top: 1px dotted #f00;"/><p  id="Ubuntu+mirror+site.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Ubuntu+mirror+site.md">Ubuntu+mirror+site.md</a></h1><br/><p>目前MiCloud提供的系統各自採用國外所提供的套件庫，主要是因為台灣的鏡像站點並不保證其服務的可靠度及可用率，但您也可以透過修改設定檔將套件庫來源指向台灣，其可靠度您必須自行評估，以保障您的虛擬主機。</p>
<p>Ubuntu採用APT套件管理，其套件庫的修改與設定相似，實際修改方式如下說明:</p>
<h1>變更套件來源</h1>
<p>登入後，請先複製“sources.list”檔案，此檔案存放在“/etc/apt/”下，此複製動作針對改錯時，未來可以回復原來的檔案。將sources.list檔案複製一份，命名為sources.bak，指令如下</p>
<pre><code>#cp /etc/apt/sources.list /etc/apt/sources.list.bak</code></pre>
<p>備份完成後請至/etc/apt下確認是否成功增加sources.list.bak檔，如下圖</p>
<p><img src='images/Ubuntu+mirror+site-ubcp.jpg' width='650' align='center'/></p>
<p>確認Ubuntu版本並編輯sorces.list，編輯指令如下</p>
<pre><code># vi /etc/apt/sources.list</code></pre>
<p>原來的套件庫參考網站為<a href="http://us.archive.ubuntu.com/ubuntu/，將其改為參考台灣鏡像站http://opensource.nchn.org.tw/ubuntu/，下圖紅色框框部分即是要修改的部分，Ubuntu有分多個模組，用戶可以自行選擇哪幾個要變更。">http://us.archive.ubuntu.com/ubuntu/，將其改為參考台灣鏡像站http://opensource.nchn.org.tw/ubuntu/，下圖紅色框框部分即是要修改的部分，Ubuntu有分多個模組，用戶可以自行選擇哪幾個要變更。</a></p>
<pre><code>deb http://opensource.nchc.org.tw/ubuntu/ lucid main restricted
deb-src http://opensource.nchc.org.tw/ubuntu/ lucid main restricted</code></pre>
<p>修改完後儲存即可。<br><img src='images/Ubuntu+mirror+site-ubchange1.jpg' width='650' align='center'/></p>
<p>請執行更改後的檔案，並確認是否更新，執行指令及畫面如下:</p>
<p>黃色框框部分即更改過後，系統於您更改的路徑中找尋到可更新套件。</p>
<pre><code>#apt-get update</code></pre>
<p><img src='images/Ubuntu+mirror+site-ubupdate1.jpg' width='650' align='center'/></p>
<h1>更多Ubuntu mirror site list</h1>
<ul>
<li>Ubuntu全球映射站<br><a href="https://launchpad.net/ubuntu/+archivemirrors">https://launchpad.net/ubuntu/+archivemirrors</a></li>
</ul>
<ul>
<li>台灣鏡像站推薦使用<br><a href="http://opensource.nchc.org.tw/ubuntu/">http://opensource.nchc.org.tw/ubuntu/</a></li>
</ul>
<p><a href="http://ftp.nchc.org.tw/ubuntu/">http://ftp.nchc.org.tw/ubuntu/</a></p>
<p><a href="http://free.nchc.org.tw/ubuntu/">http://free.nchc.org.tw/ubuntu/</a></p>
<p><a href="http://ftp.twaren.net/ubuntu/">http://ftp.twaren.net/ubuntu/</a></p>
<hr>
<h1>安裝非預載套件</h1>
<p>使用apt指令安裝Ubuntu套件，相關指令如下:</p>
<p>先查詢可安裝的套件</p>
<pre><code>#apt-cache pkgnames</code></pre>
<p><img src='images/Ubuntu+mirror+site-un-apt-cache.jpg' width='650' align='center'/></p>
<p>若找不到您需要的套件也可透過下面的指令來搜尋</p>
<pre><code>#apt-cache search [套件名稱/關鍵字]](#apt-cache search [套件名稱/關鍵字)</code></pre>
<p><img src='images/Ubuntu+mirror+site-un-apt-cache-search.jpg' width='650' align='center'/></p>
<p>再執行安裝，指令如下</p>
<pre><code>#apt-get install [套件名稱]](#apt-get install [套件名稱)</code></pre>
<p><img src='images/Ubuntu+mirror+site-un-apt-+install.png' width='650' align='center'/></p>
<p>檢查是否安裝成功，指令</p>
<pre><code>#dpkg --get-selections | grep &quot;套件名稱&quot;</code></pre>
<p><img src='images/Ubuntu+mirror+site-un-selection.jpg' width='650' align='center'/></p>
<p>若想移除套件，指令如下</p>
<pre><code>#apt-get remove [套件名稱]](#apt-get remove [套件名稱)</code></pre>
<p><img src='images/Ubuntu+mirror+site-un-apt-+remove.jpg' width='650' align='center'/></p>
<p>若要更新己安裝的套件，指令如下:</p>
<p>(此指令可一次升級所有已安裝套件的版本，也可以單獨升級某指定套件。)</p>
<pre><code>#apt-get upgrade</code></pre>
<p><img src='images/Ubuntu+mirror+site-un-aptupgrade.jpg' width='650' align='center'/></p>
<p>只更新某套件</p>
<pre><code>#apt-get upgrade [套件名稱]](#apt-get upgrade [套件名稱)</code></pre>
<p><img src='images/Ubuntu+mirror+site-un-aptupgrade1.jpg' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Update+and+download+file.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Update+and+download+file.md">Update+and+download+file.md</a></h1><br/><h1>Windows 檔案上傳與下載</h1>
<p>要從MiCloud Windows Server上進行軟體或檔案的上下載有許多方式，在此建議您使用網路芳鄰方式來進行檔案傳輸，下面介紹相關設定方式：</p>
<h1>Windows Server 2008 設定檔案分享</h1>
<p>1.新增檔案匣並加以命名</p>
<p><img src='images/Update+and+download+file-z1.png' width='450' align='center'/><br>2.在資料峽上點選右鍵，選擇內容</p>
<p><img src='images/Update+and+download+file-z2.png' width='650' align='center'/><br>3.於您將開啟共用的資料夾按下滑鼠右鍵選擇內容,並點選上方列表切換至共用頁面<br><img src='images/Update+and+download+file-p+-3.png' width='500' align='center'/><br>4.點選&quot;進階共用(D)...&quot;<br><img src='images/Update+and+download+file-p+-4.png' width='500' align='center'/><br>5.勾選共用資料夾,點選完後可於下方點選&quot;權限（P）&quot;,進入選擇您想給他人登入使用的權限<br><img src='images/Update+and+download+file-p+-5.png' width='500' align='center'/><br><img src='images/Update+and+download+file-p6.png' width='500' align='center'/></p>
<h1>Windows 下上傳與下載檔案</h1>
<p>1.開始 -&gt; 執行 , 再開啟裡面填入您的ip（ex：&quot;<strong>//IP</strong>&quot;）<br><img src='images/Update+and+download+file-p+-6.png' width='450' align='center'/><br>2.輸入您的帳號密碼 , 然後您就能開始上傳與下載檔案<br><img src='images/Update+and+download+file-p+-7.png' width='450' align='center'/><br><img src='images/Update+and+download+file-p+-8.png' width='650' align='center'/></p>
<h1>linux 下上傳與下載檔案</h1>
<p>1.先將視窗點選到桌面 , 於左上角點選 File -&gt; Connect to Server...<br><img src='images/Update+and+download+file-l1.png' width='450' align='center'/><br>2.輸入相關資訊<br><em>  Server:輸入您將上傳或下載的機器的ip
</em>  Domain name:輸入micloud.tw<br><em>  User name:輸入您的帳號
</em>  Password:輸入您的密碼<br><img src='images/Update+and+download+file-l2.png' width='450' align='center'/><br>3.進入後便可看到您共用的資料夾<br><img src='images/Update+and+download+file-l3.png' width='650' align='center'/><br>4.若您要進一步上傳或下載檔案,需再次驗證您要登入的角色 , 然後您就能開始上傳與下載檔案<br><img src='images/Update+and+download+file-l4.png' width='450' align='center'/><br><img src='images/Update+and+download+file-l5.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Update+Timezone.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Update+Timezone.md">Update+Timezone.md</a></h1><br/><h1>Linux (Redhat / Fedora / CentOS) 設定時間的方式</h1>
<p>(1) copy /usr/share/zoneinfo/* 內的確切時區資料檔案為 /etc/localtime</p>
<p><code># cp /usr/share/zoneinfo/GMT+0 /etc/localtime</code></p>
<p>(2) 執行 date -u</p>
<p><code># date -u</code></p>
<p>(3) 輸入 date 看看是否已經是正確時區</p>
<p><code># date</code></p>
<hr>
<h1>SmartMachine 設定時間的方式</h1>
<p>選擇TimeZone時區</p>
<pre><code>[root@XXXX /opt/local/etc/nginx]# tzselect]([root@XXXX /opt/local/etc/nginx# tzselect)
Please identify a location so that time zone rules can be set correctly.
Please select a continent or ocean.
1) Africa
2) Americas
3) Antarctica
4) Arctic Ocean
5) Asia
6) Atlantic Ocean
7) Australia
8) Europe
9) Indian Ocean
10) Pacific Ocean
11) none - I want to specify the time zone using the POSIX TZ format.
#? 5
Please select a country or region.
1) Afghanistan                                            26) Laos
2) Armenia                                                27) Lebanon
3) Azerbaijan                                             28) Macao
4) Bahrain                                                29) Malaysia
5) Bangladesh                                             30) Mongolia
6) Bhutan                                                 31) Myanmar (Burma)
7) Brunei                                                 32) Nepal
8) Cambodia                                               33) Oman
9) China                                                  34) Pakistan
10) Cyprus                                                 35) Palestine
11) East Timor                                             36) Philippines
12) Georgia                                                37) Qatar
13) Hong Kong                                              38) Russia
14) India                                                  39) Saudi Arabia
15) Indonesia                                              40) Singapore
16) Iran                                                   41) Sri Lanka
17) Iraq                                                   42) Syria
18) Israel                                                 43) Taiwan
19) Japan                                                  44) Tajikistan
20) Jordan                                                 45) Thailand
21) Kazakhstan                                             46) Turkmenistan
22) Korea (North)                                          47) United Arab Emirates
23) Korea (South)                                          48) Uzbekistan
24) Kuwait                                                 49) Vietnam
25) Kyrgyzstan                                             50) Yemen
#? 43

The following information has been given:

Taiwan

Therefore TZ=&#39;Asia/Taipei&#39; will be used.
Local time is now:       Tue Nov  1 18:33:44 CST 2011
Universal Time is now:   Tue Nov  1 10:33:44 UTC 2011
Is the above information OK?
1) Yes
2) No
#? 1
Here is the TZ value again, this time on standard output:
Asia/Taipei</code></pre>
<p>修改Time Zone設定擋</p>
<pre><code>[root@XXXX /opt/local/etc/nginx]# vi /etc/default/init]([root@XXXX /opt/local/etc/nginx# vi /etc/default/init)</code></pre>
<p>修改TZ設定內容為Asia/Taipei</p>
<pre><code>TZ=Asia/Taipei</code></pre>
<p>重新開機生效</p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Updating+npm+From+Very+Old+Versions.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Updating+npm+From+Very+Old+Versions.md">Updating+npm+From+Very+Old+Versions.md</a></h1><br/><p>The latest version of npm only works with fairly recent versions of node. If you signed up with the no.de service in one of the very first pre-release betas, you might be using a very old version of Node.js™, and npm update won&#39;t quite work properly. You&#39;ll see stuff like this:</p>
<pre><code>[node@izs ~]$ npm update]([node@izs ~$ npm update)
npm info it worked if it ends with ok
npm info version 0.2.2
npm info updates npm@0.3.11
npm info fetch http://registry.npmjs.org/npm/-/npm-0.3.11.tgz
npm info install npm@0.3.11
npm ERR! install failed Error: Required package: semver(1) not found.
npm ERR! install failed     at /home/node/.node_libraries/.npm/npm/0.2.2/package/lib/build.js:139:25
npm ERR! install failed     at cb (/home/node/.node_libraries/.npm/npm/0.2.2/package/lib/utils/graceful-fs.js:28:9)
npm ERR! install failed     at node.js:764:9
npm info install failed rollback
npm info not installed npm,0.3.11
npm info install failed rolled back
npm ERR! install failed npm@0.3.11,semver@1
npm info failed to update npm@0.3.11
npm ERR! Error: Required package: semver(1) not found.
npm ERR!     at /home/node/.node_libraries/.npm/npm/0.2.2/package/lib/build.js:139:25
npm ERR!     at cb (/home/node/.node_libraries/.npm/npm/0.2.2/package/lib/utils/graceful-fs.js:28:9)
npm ERR!     at node.js:764:9
npm ERR! try running: &#39;npm help update&#39;
npm ERR! Report this *entire* log at &lt;http://github.com/isaacs/npm/issues&gt;
npm ERR! or email it to &lt;npm-@googlegroups.com&gt;
npm not ok</code></pre>
<h1>Updating to the Latest npm</h1>
<p>Chances are that there&#39;s a very old version of npm installed in your home directory, and you need to move that away so that you can use the global npm installed in /opt/nodejs/bin. Try doing this:</p>
<pre><code>npm rm npm
hash -r
which npm  # =&gt; /opt/nodejs/bin/npm</code></pre>
<p>Of course, this command should always work:</p>
<pre><code>curl http://npmjs.org/install.sh | sh</code></pre>
<p>If it doesn&#39;t, then please post an issue at <a href="https://github.com/isaacs/npm/issues">https://github.com/isaacs/npm/issues</a></p>
<h1>Use a More Recent Version of Node.js</h1>
<p>The Node.js version in the no.de machines is determined by the ~/local/nodejs symbolic link. When your Node.js SmartMachine is created, this link points to the then-most-recent version of Node.js, so that you can deploy code without it changing out from under you, which is generally good.</p>
<p>See Setting the Node.js Version to learn how to set the version of Node.js that your application uses.</p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Updating+Webmin.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Updating+Webmin.md">Updating+Webmin.md</a></h1><br/><p>In this page:</p>
<h1>Webmin / Virtualmin</h1>
<p>Webmin is the web-based configuration tool provided by default with SmartMachines. It runs as its own process, and includes its own web server.</p>
<p>After customizing your SmartMachines, you may find that you eventually need to upgrade the Webmin / Virtualmin software. Alternatively, you may also decide that you prefer to monitor and configure your system exclusively with an SSH session.</p>
<h1>Upgrading</h1>
<h1>Preflight</h1>
<p>Get to the Upgrade Webmin area</p>
<ul>
<li>Log into your smartmachine <a href="https://1.2.3.4:10000/">https://1.2.3.4:10000/</a> as %%admin%%</li>
<li>From the left-hand navigation bar select %%Webmin%%</li>
<li>From the left-hand navigation bar select %%Webmin%% below %%Login: admin%%</li>
<li>Select %%Webmin Configuration%%</li>
<li><p>From the right-hand tab select %%Upgrade Webmin%%. You&#39;ll now see the &quot;Upgrade Webmin&quot; page.</p>
<h1>Find out what is out of date</h1>
<p>You will be presented with a list of items which require updating and what has changed.</p>
</li>
<li><p>Select the %%Update modules%% tab</p>
</li>
<li>Select %%Only show which modules would be updated%% checkbox</li>
<li>Select %%Update Modules%%<br>You then can uncheck the show and actually perform the updates.</li>
</ul>
<pre><code>Virtualmin is considered a non-core module. Ensure you check the Update non-core modules as well option to include Virtualmin in any updates.</code></pre>
<h1>Setting automatic update schedule</h1>
<ul>
<li>Select the %%Scheduled update%% tab</li>
<li>Check the %%Scheduled updating currently enabled%% box</li>
<li>Set your desired schedule<h1>Upgrading Webmin</h1>
</li>
<li>From the %%Upgrade Webmin%% tab</li>
<li>Chose from where you wish to upgrade from, typically that would be %%Latest version from www.webmin.com%%</li>
<li>Unless you know what you are doing, check the %%Don&#39;t re-install deleted or new modules?%% option</li>
<li>Select the %%Upgrade Webmin%% buttton</li>
</ul>
<pre><code>Before Webmin 1.490 was released, Sourceforge.net (which the Webmin developers use to host their project files) changed the URL scheme, effectively breaking Webmin upgrades from versions earlier than 1.490. To work around, in step *2 above, instead of pulling from the www.webmin.com website, choose the %%From ftp or http URL%% option and enter this long URL (the latest Webmin 1.500):
%%http://prdownloads.sourceforge.net/webadmin/webmin-1.500.tar.gz%%
Further upgrades will work as outlined above.</code></pre>
<h1>Removing</h1>
<p>You may decide that you do not want to use Webmin at all and wish to manage your SmartMachine solely using SSH.</p>
<p>If you want to remove Webmin completely, open a new SSH session.</p>
<ul>
<li>Change to root: sudo su -</li>
<li>Disable the Webmin service:</li>
</ul>
<pre><code>svcadm disable svc:/application/webmin:default</code></pre>
<p>or</p>
<pre><code>svcadm disable svc:/network/webmin:webmin</code></pre>
<ul>
<li>Then execute the Webmin uninstall script:</li>
</ul>
<pre><code>sudo /etc/webmin/uninstall.sh</code></pre>
<ul>
<li>Finally, remove the Webmin manifest:</li>
</ul>
<pre><code>svccfg delete svc:/application/webmin:default</code></pre>
<p>or</p>
<pre><code>svccfg delete svc:/network/webmin:webmin</code></pre>
<h1>Changing webmin passwords</h1>
<p>If you forget your webmin password, run the command below. You may have to change the path based on your webmin version. &quot;admin&quot; is the webmin &quot;root&quot; user.</p>
<pre><code>sudo /opt/webmin-1.340/changepass.pl /etc/webmin admin new_password</code></pre>
<h1>Restarting</h1>
<p>If Webmin becomes unresponsive or unreachable, you can restart it from an ssh session.</p>
<ul>
<li>**Login as an administrative user. ssh admin@1.2.3.4</li>
<li>**Check Webmin&#39;s current state: sudo svcs -p webmin</li>
<li>*If shown as &quot;running&quot; then:</li>
<li>Restart Webmin: sudo svcadm restart webmin</li>
<li>*If shown as &quot;disabled&quot; then:</li>
<li>Start Webmin: sudo svcadm enable webmin</li>
<li>*If shown as &quot;maintenance&quot;:</li>
<li>Clear Webmin: sudo svcadm clear webmin</li>
<li>**Make sure Webmin is not in maintenance: svcs -x</li>
<li>**If Webmin is listed as being in maintenance, run:</li>
</ul>
<pre><code>sudo svcadm clear webmin</code></pre>
<h1>Webmin (approximate) system requirements</h1>
<ul>
<li>80 RSS</li>
<li>100 Swap<br>Check on what&#39;s available by ssh&#39;ing in and</li>
</ul>
<pre><code>prstat -Z -n 10 -s rss</code></pre>
<p>Kill processes as necessary to free up the required minimum resources. Occassionally Apache (called httpd in the &#39;Process&#39; column of the prstat listing) will consume very large amounts of memory.</p>
<h1>Webmin really won&#39;t startup</h1>
<p>If your system has the available resources (you can confirm this by running the command described in the section &#39;Webmin (approximate) system requirements&#39;) and Webmin still refuses to startup, then you may need to restart your server. Follow the steps described in the section &#39;Restarting&#39;.</p>
<pre><code>sudo reboot</code></pre>
<h1>Where are webmin&#39;s log files</h1>
<p>You&#39;ll find them here:</p>
<pre><code>sudo ls /var/webmin/
sudo cat /var/webmin/miniserv.error</code></pre>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Upgrading+to+Pkgsrc+2010Q4.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Upgrading+to+Pkgsrc+2010Q4.md">Upgrading+to+Pkgsrc+2010Q4.md</a></h1><br/><p>If you have an older Node.js™ SmartMachine, you may not be running the latest pkgsrc repository. This page shows you how to update your Node.js SmartMachine to the 2010Q4 repository.</p>
<p>In this page:</p>
<h1>Update to Pkgsrc 2010Q4</h1>
<p>1.Log in to your Node.js Smart Machine using the admin username:</p>
<pre><code>$ ssh admin@mymachine.no.de</code></pre>
<pre><code>If you cannot log in as admin, stop now and contact support .</code></pre>
<p>2.Verify the version of pkgsrc you are currently using:</p>
<pre><code>$ pkgin up
database for http://pkgsrc.joyent.com/2010Q2/All/ is up-to-date</code></pre>
<p>If you are using version <a href="http://pkgsrc.joyent.com/sdc/2010Q4/gcc45">http://pkgsrc.joyent.com/sdc/2010Q4/gcc45</a>, you are up to date and don&#39;t need to upgrade.<br>3.Run the no.de.2010Q4.sh shell script attached to this page. The easiest way is like this:</p>
<pre><code>$ curl -L http://wiki.joyent.com/download/attachments/1639244/no.de.2010Q4.sh | sudo bash</code></pre>
<p>The output will look like this:</p>
<pre><code>Recording packages installed before the update
Backing up existing software base
Moving existing software base away
Downloading new software bootstrap image
Configuring package tools
Re-installing base packages
Updating OpenSSL certificate database
Removing deprecated system files
Updating tool configuration
Re-installing missing packages
(gcc34 gmake gmp libffi mpfr mysql-client mysql-server python26 redis scmgit scmgit-docs tcp_wrappers zip)

*   * *
Your software was upgraded using packages from:

http://pkgsrc.joyent.com/sdc/2010Q4/gcc45

A backup of &#39;/opt/local&#39; was archived as:

/var/tmp/pkgsrc-backup-20110505-041037.tgz

Feel free to remove that file if you don&#39;t need it anymore.
Latest versions of all your previously installed packages
have been installed. You can run &#39;pkgin ls&#39; for a full
listing of installed packages.

*   * *
You had the gcc44 package installed. This is no longer provided
in this package set. Please install the &#39;gcc-compiler&#39; package
instead which provides an optimized GCC 4.5.2 compiler suite.</code></pre>
<p>4.Be sure to log out of the admin account and back into the node account before you install new packages.</p>
<h1>Verify the Update</h1>
<p>1.Log out of the admin account.<br>2.Log in to the node account:</p>
<pre><code>$ ssh node@mymachine.no.de</code></pre>
<p>3.Run the pkgin up command. The output should look like this:</p>
<pre><code>$ pkgin up
database for http://pkgsrc.joyent.com/sdc/2010Q4/gcc45/All is up-to-date</code></pre>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Used+commmands.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Used+commmands.md">Used+commmands.md</a></h1><br/><h1>常用指令集</h1>
<p>各版本套件指令比較表<br>雖然目前許多市面常見的作業系統例如Ubuntu、Debian、CentOS、Fedora，甚至是目前Micloud所用的SmartOS都是以linux為底的架構。不過由於開發人員的不同在指令的操作上也會有稍稍的不同，在套件的指令集中，我們利用列表來比較各版本不同的指令:</p>
<p>||             ||Ubuntu、Debian        ||CentOS、Fedora       ||SmartOS<br>|查詢已安裝的套件         |apt-cache pkgnames     |yum list              |pkgin list<br>|查詢套件可安裝套件</p>
<p>的名稱或關鍵字 | apt-cache search &quot;套件名稱&quot;</p>
<p>或apt-cache search &quot;關鍵字&quot; |yum search &quot;套件名稱&quot;</p>
<p>或yum search &quot;關鍵字&quot;  |pkgin search &quot;套件名稱&quot;</p>
<p>或pkgin search &quot;關鍵字&quot;<br>|安裝套件       |apt-get install &quot;套件名稱&quot;     |yum install &quot;套件名稱&quot;    |pkgin install &quot;套件名稱&quot;<br>|移除套件       |apt-get remove &quot;套件名稱&quot;      |yum remove &quot;套件名稱&quot;     |pkgin remove &quot;套件名稱&quot;<br>|升級所有己安裝</p>
<p>的最新列表  |apt-get update     |yum update               |pkgin update<br>|下載檔案       |wget &quot;網址&quot;                   |wget &quot;網址&quot;               |wget &quot;網址&quot;<br>|複製檔案       |cp &quot;來源檔&quot;  &quot;目的檔&quot;          |cp &quot;來源檔&quot;  &quot;目的檔&quot;      |cp &quot;來源檔&quot;  &quot;目的檔&quot;<br>|刪除檔案       |rm &quot;檔案或目錄&quot;                |rm &quot;檔案或目錄&quot;            |rm &quot;檔案或目錄&quot;<br>|檢視檔案內容    |cat &quot;檔案名稱&quot;                |cat &quot;檔案名稱&quot;             |cat &quot;檔案名稱&quot;<br>|切換目錄       |cd &quot;相對路徑或絕對路徑&quot;         |cd &quot;相對路徑或絕對路徑&quot;     |cd &quot;相對路徑或絕對路徑&quot;<br>|顯示所在目錄    |pwd                          |pwd                       |pwd<br>|檢視目錄下的檔案 |ls                          |ls                         |ls<br>|重新開機        |reboot                      |reboot                     |reboot</p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Using+Cloud+Analytics.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Using+Cloud+Analytics.md">Using+Cloud+Analytics.md</a></h1><br/><h1>使用雲端分析工具</h1>
<p>雲端分析工具，將幫助您做您Node.js的即時性的績效性能分析™應用。<br>使用雲端分析工具將需要Node 版本0.4.0或更高的版本。<br>在這個頁面，您將可以找到：</p>
<p>同時看到 <a href="http://dtrace.org/blogs/dap/2011/08/29/new-metrics-on-no-de/"><a href="http://dtrace.org/blogs/dap/2011/08/29/new-metrics-on-no-de/">http://dtrace.org/blogs/dap/2011/08/29/new-metrics-on-no-de/</a></a></p>
<p>顯示分析的概述如下：</p>
<p>分析工具將顯示兩種圖表：線狀圖和等級圖。</p>
<p>線圖顯示的數量，是根據您所給定的時間測量。</p>
<p>例如，如果您測量的是根據IP地址的HTTP操作，其圖表疊線圖將顯示每個IP地址每秒的回應數量。<br><img src='images/Using+Cloud+Analytics-pic1.jpg' width='650' align='left'/></p>
<p>而等級圖可讓您看到三個方面的數據，就像在某一特定地區，使用不同的顏色的雨水量畫出降雨分佈的地圖。</p>
<p>雲端分析等級圖則顯示不同密度的彩色區塊。</p>
<p>例如，在一個等級圖顯示了應用的細項和CPU運行速度，x軸則顯示在一秒鐘的間隔時間，Y軸則顯示了運行的時間。</p>
<p>圖中的每個區塊、密度，代表了特定的運行時間的程式的數量。</p>
<p>您可以使用過濾器，或以點選一個區塊的方式，查詢程式處理器多次執行的時間長短。</p>
<p>每個區塊的高度，都是以沿y軸的值的範圍做區分。</p>
<p><img src='images/Using+Cloud+Analytics-pic2.jpg' width='650' align='left'/></p>
<p>在這兩種圖表，x軸表示在一秒鐘的間隔時間。 y軸代表一個變量，你測量，但規模變化值的範圍擴大或縮小。</p>
<p>||控制     ||描述<br>|儀器儀表選項 |這些控件可以讓你創建一個儀表盤。</p>
<p>你可以選擇從幾個指標分解以不同的方式。</p>
<p>這些指標都在下一節描述。<br>|元素列表     |這將列出你測量的項目。</p>
<p>例如，如果你測量HTTP服務器的URL分解操作，此窗格包含一個網址列表。</p>
<p>在熱圖，從這個名單中選擇一個項目，突出包含該元素的測量所有的水桶。</p>
<p>你可以使用隔離或排除選定的項目列表底部的過濾器。<br>|排名 / 線性  |這種控制讓你選擇如何密度桶熱圖呈現。</p>
<p>線性著色意味著根據其價值，每個桶的顏色。其價值為100桶，水桶，其價值為1暗100倍。</p>
<p>排名基於著色所有的值進行排序和顏色密度分佈其中。 排名基於著色發現離群點是非常有用的。<br>|粒度    |此滑塊控制每塊的高度，因此，每個桶的值的範圍。<br>|規模    |此滑桿可讓您控制Y軸的值的範圍。 範圍是在控制下的文本。</p>
<p>當滑塊一路的頂部和底部，y軸的變化上顯示的值的範圍而定規模。</p>
<p>如果您使用滑桿來設定一個上限或下限，規模不會改變。<br>|放大    |這些控件可以讓你改變每個桶的寬度，所以你可以看到一個更廣泛的時間。 每個桶的寬度始終是一秒鐘。<br>|播放 / 暫停|這些控件可以讓您暫停和恢復顯示。<br>|水桶    |點擊水桶，桶的價值分佈。</p>
<h1>可用的度量</h1>
<p>雲分析可以告訴你各種不同的指標:</p>
<ul>
<li>CPU線程處決的</li>
<li>HTTP服務器操作</li>
<li>HTTP客戶端操作</li>
<li>垃圾收集作業</li>
<li>套接字操作</li>
<li>邏輯文件系統操作<br>在大多數情況下，操作數是不一樣分解操作延遲有趣。 潛伏期是要求其履行的金額之間的時間。</li>
</ul>
<h1>CPU線程處決的</h1>
<p>這種度量可以幫助你了解你的應用程序使用的CPU。 報告數量排序的線程執行不同的標準。 一個線程開始執行時，當線程在CPU和結束時，它被取下。<br>您可以使用自己的下面的分解，得到一個線程執行數線圖或結合運行時，他們顯示熱圖。</p>
<p>||分解 ||描述<br>|進程標識符        |對於一個給定的進程ID線程數。<br>|應用程序的名稱    |每個正在運行的應用程序的線程數。<br>|區域名稱         |在每個區域運行的線程數（SmartMachine）。</p>
<p>如果你正在運行的只有1 SmartMachine，這個信息是不是特別有用。<br>|原因離開CPU     |離開CPU的原因排序的線程數。<br>線圖顯示處決的人數是不是特別有趣。 運行時的熱圖，這表明線程在CPU上多久，更準確，因為它們表明，當您的應用程序已經做了很多計算。</p>
<pre><code>選擇不加分解本身的運行是在一個線程執行的熱分解圖運行，這不是特別有用的結果。</code></pre>
<p>如果您的應用程序不運行很長時間，你可以看看為什麼它來CPU。 它可能被內核鎖阻塞（可能表明內核鎖爭用），1用戶級鎖（表示用戶級鎖爭用），1條件變量（表示它很可能等待某些其他事件，如磁盤，I / O或網絡），等等。 或者它可能已經運行的，但採取的CPU，因為別的東西更高的優先級運行所需。</p>
<p>這是一個低級別和微妙的度量，但它可以幫助你了解是否應用程序這麼長時間的服務請求的理由是因為它在CPU上花費了很多時間。</p>
<h1>HTTP服務器操作</h1>
<p>HTTP服務器的性能度量Web服務器的主要性能。</p>
<p>可以使用下面的分解，自己獲得的事件數量的線圖，或者你可以結合延遲他們獲得熱圖。</p>
<p>||分解 ||描述<br>|方法     |HTTP方法的請求：GET，PUT，POST，DELETE<br>|網址     |通過URL請求的數量。<br>|遠程IP地址    |發出請求的客戶端的IP地址的請求數。<br>|遠程TCP端口    |發出請求的客戶端所使用的TCP端口的請求數。</p>
<p>這個衡量標準是，挑選出來自同一客戶端的多個請求，在相同的TCP連接使用HTTP保持活動的有用。</p>
<h1>HTTP客戶端操作</h1>
<p>這個度量報告HTTP請求和響應，從您的應用程序發起的反對的服務。 您可以使用該數據，以幫助您確定您的服務器的延遲是由於你使用一些其他的Web服務的延遲。 舉例來說，如果Amazon的S3服務存儲數據，你可以看到如何S3 Web服務請求。</p>
<p>如果您發現另一個Web服務是您的高延遲的源，然後你可以調查，其他的Web服務（如果你能），或重新考慮你的應用程序如何使用它，通過緩存結果在可能的情況下，也許。</p>
<p>||分解    ||描述<br>|方法    |請求的HTTP方法。<br>|網址    |通過URL請求的數量。<br>|HTTP服務器地址    |服務器地址的請求數。<br>|HTTP服務器端口    |服務器端口的請求數。</p>
<h1>垃圾收集作業</h1>
<p>這種度量可以讓你觀察到的JavaScript虛擬機的垃圾收集器所產生的延遲氣泡。 垃圾收集器跟踪分配內存和釋放內存，這不再被使用。 這意味著，作為一個程序員，你不必擔心內存分配和釋放。 然而，當垃圾收集器運行時，您所有的應用程序代碼被暫停。</p>
<p>您可以使用此指標，以觀察在您的應用程序的垃圾收集。 在這種情況下，“潛伏期”是指垃圾收集操作了多久。 如果你看到的垃圾收集活動相關的HTTP請求延遲尖峰，你可能需要重新思考如何在您的應用程序內存被使用，以免造成這麼多的垃圾，否則調整GC以避免出現大的尖峰。</p>
<p>||分解    ||描述<br>|GC型    |按類型的垃圾收集操作。</p>
<h1>套接字操作</h1>
<p>套接字操作HTTP活動的WebSockets，和大多數其他類型的網絡活動的基礎上。 這種度量可以讓你觀察到非Web應用程序的活動。 因為它是不可能知道這消息對應於別人，這是不可能直接顯示在這個級別的延遲。</p>
<p>||分解    ||描述<br>|類型    |按類型套接字操作（讀，寫）。<br>|遠程主機    |套接字操作遠程主機的數量。<br>|遠程端口    |通過遠程端口號的套接字操作。<br>|大小    |由規模數量的套接字操作。<br>|緩衝數據    |Node.js的內緩衝的數據量，因為應用程序的書面比內核更可以消耗不阻塞。</p>
<h1>邏輯文件系統的操作</h1>
<p>磁盤I / O可以是一個顯著的延遲源。 這種度量檢查磁盤的I / O的應用程序的首要原因之一：訪問文件系統。</p>
<p>||分解    ||描述<br>|進程標識符    |文件系統操作的進程的ID號。<br>|應用程序的名稱    |文件系統操作的應用程序的名稱。<br>|區域名稱    |文件系統操作的區域名稱。<br>|操作類型    |按類型的文件系統操作（讀，寫，查找，訪問等）。<br>|文件系統類型    |（ZFS，進程，LOFS等），文件系統類型的文件系統操作。</p>
<p>如果你在這裡看到顯著的延遲，HTTP請求延遲對應的，你可能會考慮改變你的應用程序與文件系統交互，也許是通過預取數據緩存。</p>
<p>分解幫助你準確識別誰在做什麼，這樣可以優化正確的事情。 與Node.js的指標，此指標的檢查文件系統的所有的SmartMachine的活動。在這些情況下，進程ID和應用程序的名稱的分解是有用的。</p>
<h1>學習更多關於雲分析</h1>
<p>你可以了解更多有關使用熱圖可視化從這些資源中的延遲：<br><em>  <a href="http://cacm.acm.org/magazines/2010/7/95062-visualizing-system-latency/fulltext">可視化系統延遲 </a>
</em>  <a href="http://dtrace.org/blogs/dap/2011/03/01/welcome-to-cloud-analytics/">雲分析</a><br>*  <a href="http://joyeur.com/2011/01/24/executive-speaker-series-bryan-cantrill-and-brendan-gregg-on-cloud-analytics/">雲性能與實時可視性解決大問題（視頻）</a></p>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Using+Customer+Portal+old.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Using+Customer+Portal+old.md">Using+Customer+Portal+old.md</a></h1><br/><h1>使用<strong>MiCloud Customer Portal</strong>(<strong>[<a href="http://micloud.tw">http://micloud.tw</a>]</strong>)</h1>
<h1>](使用--MiCloud Customer Portal-- - --[<a href="http://micloud.tw--">http://micloud.tw--</a></h1>
<p>)<br>若您還未註冊<strong>MiCloud</strong>，請點選右邊選項＜<strong>註冊新帳戶</strong>＞。</p>
<p>若您已註冊完<strong>MiCloud</strong>，請點選左邊選項＜<strong>立即登入</strong>＞。</p>
<h2><img src='images/Using+Customer+Portal+old-p1-2.png' width='650'align='center'/></h2>
<p>登入與帳戶設定說明影片: <a href="http://www.youtube.com/v/zZplInDhTvc&amp;hl=en&amp;fs=1&amp;rel=0">Go to YouTube</a></p>
<hr>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Using+Customer+Portal.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Using+Customer+Portal.md">Using+Customer+Portal.md</a></h1><br/><h1>使用<strong>MiCloud Customer Portal</strong>(<strong>[<a href="http://micloud.tw">http://micloud.tw</a>]</strong>)</h1>
<h1>](使用--MiCloud Customer Portal-- - --[<a href="http://micloud.tw--">http://micloud.tw--</a></h1>
<p>)<br>若您還未註冊<strong>MiCloud</strong>，請點選右邊選項＜<strong>註冊</strong>＞。</p>
<p>若您已註冊完<strong>MiCloud</strong>，請點選左邊選項＜<strong>登入</strong>＞。</p>
<h2><img src='images/Using+Customer+Portal-p1-2.png' width='650'align='center'/></h2>
<h1>登入與帳戶設定</h1>
<p>進入登入頁面輸入您的帳號與密碼<br>登入完成後系統將自動跳轉至訂購主機頁面，若您為第一次登入使用MiCloud，請點選右上角的帳戶設定，進入設定您的基本資料與<strong>SSH-KEY(重要!)</strong>。</p>
<h1>修改基本資料</h1>
<p>此頁面為顯示您註冊MiCloud時輸入的基本資訊，若輸入有誤可在此做更正的動作。</p>
<h1><strong>管理SSH Key(SSH KEYS)</strong></h1>
<p>MiCloud提供SSH Key的管理模組，您可透過此頁面進行SSH Key的上傳與管理，透過SSH協定與SSH Key的認證，將可確保您與您伺服器之間的連線安全。</p>
<p>SSH KEY 詳細用法：[Windows](SSH KeyGen &amp; Connect Tutorial - Windows)</p>
<p>。</p>
<h1>更改登入密碼</h1>
<p>若您需要更改登入MiCloud登入時的密碼，可於此頁做變更。</p>
<h1>付款方式</h1>
<p>依照您的帳號設定的用戶有不同的付費方式</p>
<p>詳情請看[個人用戶](Apply MiCloud Account - Personal)</p>
<h1>帳單資料</h1>
<p>可於此頁面察看您所有的帳單資訊</p>
<h1>訂購主機與使用MiCloud</h1>
<h1>訂購主機</h1>
<p>若您還未建立您的SSH KEYS，請先至[SSH KeyGen Tutorial](SSH KeyGen Tutorial - Windows)</p>
<p>若您已完成上步，可進入此頁訂購主機。</p>
<p>您可先查看頁面左邊為機器的設備與價位表，再前往頁面右邊下拉式選單選擇您的機器所需的作業系統、硬體配備及填寫機器名稱。<br><img src='images/Using+Customer+Portal-pic+-12.png' width='650' align='center'/><br>確認您選擇的作業系統與硬體設備，並勾選您所需的軟體，及填寫發票資訊。</p>
<h2><img src='images/Using+Customer+Portal-pic+-7.png' width='650' align='center'/></h2>
<p>訂購主機說明影片:<a href="http://www.youtube.com/v/zg5uj5RXtzg&amp;hl=en&amp;fs=1&amp;rel=0">Go to YouTube</a></p>
<hr>
<h1>主機</h1>
<p>此頁可顯示您所建的機器與機器的IP與基本的資料(作業系統、記憶體、購買了多久以及目前狀態)</p>
<p><img src='images/Using+Customer+Portal-pic+-6.png' width='650' align='center'/><br>左邊紅色框框概述您的機器設備與相關訊息。</p>
<p>右邊紅色框框則顯示您機器目前的狀態，以及開關機的按鈕。</p>
<p>點擊左邊藍色框框則會顯示您這台機器內建軟體預設的密碼。</p>
<h2><img src='images/Using+Customer+Portal-pic+-8.png' width='650' align='center'/></h2>
<h1>控制面板</h1>
<p>此頁可讓您觀察來自世界各地的連線來源分佈狀況(如果想提供的是全球性的服務，此圖表數據相信會對您有所幫助)。</p>
<p>下方則是提供每秒TCP or HTTP連線數量。</p>
<h2><img src='images/Using+Customer+Portal-pic+-9.png' width='650' align='center'/></h2>
<p>主機與控制面板說明影片:<a href="http://www.youtube.com/v/-nv4UaMt1p4&amp;hl=en&amp;fs=1&amp;rel=0">Go to YouTube</a></p>
<hr>
<h1>分析</h1>
<p>此頁能提供您所要「診斷」的「各類」資訊。</p>
<p>可於左邊藍色框框內的下拉式選單選擇你需要診斷的資訊。</p>
<p>右邊的藍色框框則是選擇圖表的顯示方式。</p>
<p>當您選擇完按下鍵理時將在下方產生圖表顯示。</p>
<h2><img src='images/Using+Customer+Portal-pic+-10.png' width='650' align='center'/></h2>
<p>分析說明影片:<a href="http://www.youtube.com/v/nuoEMQxiOPg&amp;hl=en&amp;fs=1&amp;rel=0">Go to YouTube</a></p>
<hr>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Using+DTrace+on+MySQL.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Using+DTrace+on+MySQL.md">Using+DTrace+on+MySQL.md</a></h1><br/><p>In this page:</p>
<h1>Using DTrace on MySQL</h1>
<p>Even though there aren&#39;t DTrace probes for MySQL released yet, we can still get useful information from MySQL. DTrace has a pid provider which allows us to get into any function the program is executing and see it&#39;s arguments. The only drawback is you have to go digging around in the source code to find out what you want to see. But thanks to guys like Brendan Gregg, they have already done some of the digging for us</p>
<p>Even if we want to go digging around ourselves, it&#39;s really not that hard; you just have to get your feet wet. And because SmartMachines have DTrace probes enabled, you can take advantage of using DTrace on MySQL. I will show some examples of this and how easy it is to hunt down your own functions.</p>
<p>First let&#39;s start with functions that have already been dug up for us:</p>
<pre><code>mysql_parse(thd, thd-&gt;query, length, &amp; found_semicolon);</code></pre>
<p>This is the function MySQL uses to parse a query. So all we have to do is trace this function through the pid provider and we get to see all the queries coming through. This shows arg1 as being the query, and we must copy it in to kernel land where DTrace works for it to see the string:</p>
<pre><code>root@ferrari:~# dtrace -qn &#39;pid$target:mysqld:*mysql_parse*:entry { printf(&quot;%Y     %s
n&quot;, walltimestamp, copyinstr(arg1)) }&#39; -p `pgrep -x mysqld`
2007 Sep 27 10:04:35     select * from blah
2007 Sep 27 10:04:58     select * from tablenothere</code></pre>
<p>Notice that this will show all queries, even if they aren&#39;t successful. Now that we can trace queries, this can give us good information. For example we can see what queries are executed the most:</p>
<pre><code>root@ferrari:~# dtrace -qn &#39;pid$target:mysqld:*mysql_parse*:entry { @queries[copyinstr(arg1)] = count() }&#39; -p `pgrep -x mysqld`](root@ferrari:~# dtrace -qn &#39;pid$target:mysqld:*mysql-parse*:entry { @queries[copyinstr - arg1 = count -  }&#39; -p `pgrep -x mysqld`)
^C

select * from blah                                                5
select * from tablenothere                                       10</code></pre>
<p>You can&#39;t get this kind of information from MySQL unless you write some kind of script to parse through the query log. If we know that there is a query being executed 1000 more times than the others, we could always try to get this one to cache. Now lets say we want to find out how long a query took to execute. The function mysql_execute_command does the actual execution of the queries so all we do here is subtract the entry and return timestamps of this function. The script shown below uses this:</p>
<pre><code>root@ferrari:~# ./exactquerytimes.d -p `pgrep -x mysqld`
Tracing... Hit Ctrl-C to end.

Query: SELECT COUNT(*) FROM joe_visitors where  upper(vs_browser) not like &#39;%GOOGLE%&#39; and upper(vs_browser) not like &#39;%GOOGLE BOT%&#39; and upper(vs_browser) not like &#39;%BOT%&#39; and upper(vs_browser) not like &#39;%MSN%&#39; and upper(vs_browser) not like &#39;%MSNBOT%&#39; and upper(,

Time: 2.32</code></pre>
<p>On the MySQL side, it showed this query being executed at 2.32 seconds as well:</p>
<p>1 row in set (2.32 sec).</p>
<p>This is awesome information because as of now MySQL doesn&#39;t allow you to see a slow query that is less than 1 second (I believe this is a fix in MySQL 5.1). So with this, we can see not just slow queries, but all queries and how long they take to execute with their times.</p>
<p>Now let&#39;s try this same query but I bumped my query_cache_size up to 50M:</p>
<p>The first try (won&#39;t hit the cache):</p>
<pre><code>root@ferrari:~# ./exactquerytimes.d -p `pgrep -x mysqld`
Tracing... Hit Ctrl-C to end.

Query: SELECT COUNT(*) FROM joe_visitors where  upper(vs_browser) not like &#39;%GOOGLE%&#39; and upper(vs_browser) not like &#39;%GOOGLE BOT%&#39; and upper(vs_browser) not like &#39;%BOT%&#39; and upper(vs_browser) not like &#39;%MSN%&#39; and upper(vs_browser) not like &#39;%MSNBOT%&#39; and upper(,

Time: 2.28</code></pre>
<p>And the second try hits the cache but doesn&#39;t show anything through DTrace. So this means a query that is served from the cache won&#39;t show up in mysql_parse. Right now this probably doesn&#39;t mean much, but as you learn more about how the internals of MySQL work, then troubleshooting becomes much easier down the road.</p>
<p>So far this has all been information that was provided. Now I will show how simple it is search through MySQL&#39;s source and look at functions.</p>
<p>First we need to decide what to look for. Let&#39;s say we want to find out every time that slow query is written to the slow query log. First we download the MySQL source code from <a href="http://www.mysql.com">http://www.mysql.com</a>. Now we can search through the source code for &#39;slow query&#39;:</p>
<pre><code>root@ferrari:/export/home/derek/mysql-5.0.45# ggrep -ri &#39;slow query&#39; *</code></pre>
<p>This turns up only a few source code files, one of them looking most obvious called log.cc with the expression &quot;Write to the query log&quot;. The MySQL code is very well commented so it makes searching really easy. Looking in this file, that comment is right above the function:</p>
<pre><code>/*
Write to the slow query log.
*  /
bool MYSQL_LOG::write(THD *thd,const char *query, uint query_length,
time_t query_start_arg)</code></pre>
<p>It&#39;s obvious that this function is the function that writes to the slow query log. Running this script below, looking for function LOG while a slow query is being inserted shows this function being executed with some weird characters around it:</p>
<pre><code>root@ferrari:~# dtrace -F -n &#39;pid$1:mysqld:*LOG*:entry {} pid$1:mysqld:*LOG*:return {}&#39; `pgrep -x mysqld`
dtrace: description &#39;pid$1:mysqld:*LOG*:entry &#39; matched 126 probes
CPU FUNCTION
0  -&gt; _ZN9MYSQL_LOG5writeEP3THD19enum_server_commandPKcz
0  -&gt; _ZN9MYSQL_LOG5writeEP3THDPKcjl
0  &lt; - _ZN9MYSQL_LOG5writeEP3THDPKcjl</code></pre>
<p>The only thing bad about tracing MySQL through the pid provider is that these weird characters change between MySQL versions, so we can&#39;t always trace for &#39;_ZN9MYSQL_LOG5writeEP3THDPKcjl&#39; if we want it to work on other machines. We have to trace for MYSQ<em>LOG</em>write which slowquerycounts.d uses:</p>
<pre><code>root@ferrari:~# ./slowquerycounts.d -p `pgrep -x mysqld`
Tracing... Hit Ctrl-C to end.

SELECT COUNT(*) FROM joe_visitors where  upper(vs_browser) not like &#39;%GOOGLE%&#39; and upper(vs_browser) not like &#39;%GOOGLE BOT%&#39; and upper(vs_browser) not like &#39;%BOT%&#39; and upper(vs_browser) not like &#39;%MSN%&#39; and upper(vs_browser) not like &#39;%MSNBOT%&#39; and upper(

3</code></pre>
<p>As you can see DTrace can be very powerful even if we don&#39;t have probes released yet, we just have to do a little extra work. Some of the information shown can be obtained from MySQL, but using DTrace still provides a benefit because we don&#39;t have to enable anything in the MySQL configuration, possibly making us restart the server. I&#39;m providing these scripts in the <a href="http://hell.jedicoder.net/files/MySQLDTraceKit.tar.gz">MySQLDTraceKit.tar.gz</a><br>Hopefully in the near future we will have real MySQL probes.</p>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Using+Memcached.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Using+Memcached.md">Using+Memcached.md</a></h1><br/><p>memcached是一套 Name-Value Pair(NVP) 分散式記憶體快取系統，其主要目的是在於減少資料庫的負擔。透過memcached的快取對於使用者在等待資料存取時間可以加快進行而不會延遲服務。以下將會教您如何在SmartMachine去啟用和設置memcached。</p>
<h1>啟動 Memcached</h1>
<p>利用root權限或是利用sudo指令來啟動memcached:</p>
<pre><code>#svcadm enable memcached</code></pre>
<p>輸入svcs指令確認memcached啟動是否成功，如以下的畫面中，可以看到memcached是online狀態，表示是啟用中:</p>
<pre><code>#svcs memcached</code></pre>
<p><img src='images/Using+Memcached-memcached-1.png' width='650' align='center'/></p>
<p>確認目前設定:</p>
<pre><code>#prctl -i process -n process.max-file-descriptor `pgrep memcached`</code></pre>
<p><img src='images/Using+Memcached-memcached-2.png' width='650' align='center'/></p>
<h1>設置 Memcached</h1>
<p>用戶可以自行設置memcached的大小以及所允許的連線數量，使用svcprop驗證目前memcached的大小:</p>
<pre><code># svcprop -p config/memory memcached</code></pre>
<p><img src='images/Using+Memcached-memcached-3.png' width='650' align='center'/></p>
<p>從上方的擷圖可以看到目前memcached大小為64 MB<br>另外，用戶可以利用指令來調整memcached大小， 例如.從64MB調至128MB:</p>
<pre><code># svccfg -s memcached setprop config/memory=128
# svcadm refresh memcached
# svcprop -p config/memory memcached
128</code></pre>
<p><img src='images/Using+Memcached-memcached-4.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="View+network+routing+instructions.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=View+network+routing+instructions.md">View+network+routing+instructions.md</a></h1><br/><h1>SmartOS檢視網路路由指令</h1>
<p>透過netstat指令檢視路由表：</p>
<pre><code># netstat -rn</code></pre>
<pre><code>Routing Table: IPv4
Destination           Gateway           Flags  Ref     Use     Interface
-------------------- -------------------- ----- ----- ---------- ---------
default              211.78.255.254       UG        3        193
127.0.0.1            127.0.0.1            UH        3          8 lo0
211.78.255.0         211.78.255.31        U         3          0 net0

Routing Table: IPv6
Destination/Mask            Gateway                   Flags Ref   Use    If
--------------------------- --------------------------- ----- --- ------- -----
::1                         ::1                         UH      2       0 lo0</code></pre>
<p>檢視到某個網站的路由：</p>
<p><code># traceroute google.com</code></p>
<pre><code>traceroute: Warning: google.com has multiple addresses; using 74.125.31.138
traceroute to google.com (74.125.31.138), 30 hops max, 40 byte packets
1  254.2.......54)  0.189 ms  0.194 ms  0.096 ms
2  211..........1 ms  0.453 ms  0.444 ms
....</code></pre>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="View+Used+Resources.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=View+Used+Resources.md">View+Used+Resources.md</a></h1><br/><h1>檢查磁碟使用情況</h1>
<p>||如何得到這個資訊    ||請使用此命令<br>|查詢整個文件系統的磁碟空間使用情況    |df -ht<br>|查詢當前目錄的磁碟空間使用情況    |du -h<br>|查詢摘要目錄使用的空間    |du -hs /opt<br>在這些命令中的-h參數的結果，是以“人類可讀”的形式呈現。</p>
<h1>從 shell 檢查程序</h1>
<p>||相關資訊    ||使用此命令<br>|通用處理器和內存統計資料    |prstat -Z -s cpu</p>
<p>If prstat changes your terminal settings, use the reset command to reset them.<br>|正在運行的程序列表    |ps -elf<br>|admin用戶程序列表    |ps -uadmin -o pcpu,user,pid,args,comm,s</p>
<p>ps -uadmin -o user,args,pcpu,pmem,vsz,time,comm<br>|MySQL用戶程序    |ps -umysql -o pcpu,vsz,osz,args,comm,s<br>|使用80 port的所有程序    |/root/bin/pcp -p 80<br>|2806過程中使用的所有埠    |/root/bin/pcp -P 28068<br>|所有埠和程序的資訊    |/root/bin/pcp -a<br>|CPU使用率    |sudo /root/jinf -C<br>|記憶體使用    |sudo /root/jinf -m<br>|互換空間的使用情況    |sudo /root/jinf -S</p>
<h1>檢查Webmin的過程</h1>
<ul>
<li>登錄到Virtualmin（請參考帳戶登錄及重要網址一文 ）。</li>
<li>點擊Webmin在左上方的選單，然後點選系統=&gt;運行的程序。</li>
<li>點擊PID、用戶、記憶體、或是CPU，以便為您的帳戶上運行的程序列表，分別按不同標準進行排序。</li>
</ul>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="What+is+Smart+Machine.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=What+is+Smart+Machine.md">What+is+Smart+Machine.md</a></h1><br/><h1>SmartMachine說明</h1>
<p>SmartMachine係指美國Joyent所研發SDC(SmartDatacenter)上之虛擬主機。SDC提升虛擬層的各項技術，達到超越市面上一般虛擬機器的效能，因此於SDC上提供之各項服務均優於一般虛擬主機。SmartMachine為植基於Solaris Kernel所發展的作業系統，全盤建構於ZFS檔案系統上。</p>
<p>該作業系統無縫的與SDC做緊密的結合，可提供同平台的其他作業系統將近一倍以上的運算能力，省去跨系統溝通的耗損，能夠提供用戶動態調整資源、更符合用戶的需求，達到快速部署之應用能力。</p>
<p>您可透過MiCloud雲端管理系統([<a href="http://micloud.tw])監控並管理您的虛擬主機，以及連線操控所部屬的應用服務。MiCloud為持續精進的雲端管理平台，提供多項第三方預載套件，包含最常使用的資料庫MySQL與網頁工具Apache">http://micloud.tw])監控並管理您的虛擬主機，以及連線操控所部屬的應用服務。MiCloud為持續精進的雲端管理平台，提供多項第三方預載套件，包含最常使用的資料庫MySQL與網頁工具Apache</a> HTTPD、PHP，以及遠端管理界面webmin等。](您可透過MiCloud雲端管理系統 - [<a href="http://micloud.tw監控並管理您的虛擬主機，以及連線操控所部屬的應用服務。MiCloud為持續精進的雲端管理平台，提供多項第三方預載套件，包含最常使用的資料庫MySQL與網頁工具Apache">http://micloud.tw監控並管理您的虛擬主機，以及連線操控所部屬的應用服務。MiCloud為持續精進的雲端管理平台，提供多項第三方預載套件，包含最常使用的資料庫MySQL與網頁工具Apache</a> HTTPD、PHP，以及遠端管理界面webmin等。)</p>
<hr>
<h1>更進階的說明，可以在Joyent Wiki搜尋到</h1>
<ul>
<li><a href="http://wiki.joyent.com/display/smart/Getting+Started+with+SmartMachines">Joyent wiki</a></li>
</ul>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Windows+Virtual+Machine+FAQ.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Windows+Virtual+Machine+FAQ.md">Windows+Virtual+Machine+FAQ.md</a></h1><br/><p>Frequently Asked Questions:</p>
<p>Do I need to activate the Windows license?</p>
<p>No. Activation should happen automatically, but it is not immediate and may take some time. To activate manually right click on My Computer and then click on Activate windows now. Do not try to activate the licence in any other way.<br>Where is my second harddrive?</p>
<p>The second disk in the Windows instances are not initialized. You have to use the Server Management utility to initialize the new drive and create and format a new NTFS or FAT32 partition. Please see the Windows Drive Initialization Walkthrough.zip for screenshots on this process.<br>What is my hostname?</p>
<ul>
<li>Click Start &gt; Run</li>
<li>In the pop-up box type cmd and press Enter.</li>
<li>You should now have a black command prompt running. Type &#39;hostname&#39; and press Enter.</li>
</ul>
<p>You will see the host name. The initial host name is generated by Windows and will for all intents and purposes be random. You can change your hostname by using the Server Management utility.</p>
<p>What is my IP address?</p>
<ul>
<li>Click Start &gt; Run</li>
<li>In the pop-up box type cmd and press Enter.</li>
<li>You should now have a black command prompt running. Type ipconfig and press Enter.</li>
</ul>
<p>You will get a list of all the network interfaces and their IP addresses.</p>
<p>How do I add another Windows instance?</p>
<p>To add another Windows server, go to <a href="http://my.joyentcloud.com">http://my.joyentcloud.com</a>.<br>How do I activate my Windows server?</p>
<p>Your Windows server is activated on provisioning.</p>
<p>However, some times you may have to Activate Windows when you first log in.</p>
<p>You will see this box. Click the &#39;Activate Now&#39; button.</p>
<p><img src='images/Windows+Virtual+Machine+FAQ-win-activate-1.png' width='650' align='left'/></p>
<p>Then you want to click the &#39;Activate Windows online now&#39; Button.</p>
<p><img src='images/Windows+Virtual+Machine+FAQ-win-activate-2.png' width='650' align='left'/></p>
<p>It may take a few minuets for the Microsoft Activation servers to finish the Activation process:</p>
<p><img src='images/Windows+Virtual+Machine+FAQ-win-activate-3.png' width='650' align='left'/></p>
<p>Once your Windows system is activated you will see this confirmation:</p>
<p><img src='images/Windows+Virtual+Machine+FAQ-win-activate-4.png' width='650' align='left'/></p>
<p>If for some reason you get an activation error send an email to support@joyent.com<br><strong>What Windows version am I running?</strong></p>
<ul>
<li>Click <strong>Start &gt; Run</strong></li>
<li>In the pop-up box type cmd and press Enter.</li>
<li>You should now have a black command prompt running. Type winver and hit Enter.</li>
</ul>
<p>You will see a popup box that will tell you about your version of Windows, similar to the one below:</p>
<p><img src='images/Windows+Virtual+Machine+FAQ-Winver.png' width='650' align='left'/></p>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Working+with+Cloud+API.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Working+with+Cloud+API.md">Working+with+Cloud+API.md</a></h1><br/><p>The Cloud API lets you interact with your JoyentCloud machines. Using the Cloud API, you can:</p>
<p>Provision new machines (both SmartMachines and traditional Virtual Machines)<br>Manage your account credentials<br>Create custom analytics for monitoring your infrastructure<br>To learn more about using the Cloud API, see the Cloud API documentation</p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Working+with+Older+SmartMachines.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="index.html?page=Working+with+Older+SmartMachines.md">Working+with+Older+SmartMachines.md</a></h1><br/><p>A topic for dealing with older (Blastwave era) SmartMachines</p>
<ul>
<li>How can you tell which release your SmartMachine is populated with?</li>
<li>*On templates made with 2007Q4 and 2008Q2, the PKG_PATH variable is set under /root/.profile</li>
<li>*On templates made with 2007Q3 (Facebook SmartMachines) the PKG_PATH variable is set under /root/.bash_profile. This means when logged in as root, you can just run echo $PKG_PATH.</li>
<li>*On templates made with 2009Q1 and beyond, the PKG_PATH variable is defined in /opt/local/etc/pkg_install.conf instead.<br>Historically, we used 2007q3 for Facebook SmartMachines, 2007q4 for SmartMachines deployed on and after March 22, 2008, followed with 2008q2 in November 2008, and 2009q1 in summer 2009.</li>
</ul>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/>
  </div>
  </div>
  </body>
</html>
